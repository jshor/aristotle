{"version":3,"file":"js/index.cc290db7.js","mappings":"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","sources":["webpack://aristotle/./node_modules/vue-loader/dist/templateLoader.js","webpack://aristotle/./node_modules/vue-loader/dist/index.js","webpack://aristotle/./src/components/interactive/Resizable.vue","webpack://aristotle/./src/components/interactive/Draggable.vue","webpack://aristotle/./src/components/Wire.vue","webpack://aristotle/./src/types/enums/SnapMode.ts","webpack://aristotle/./src/store/document/geometry/boundaries.ts","webpack://aristotle/./src/types/enums/Direction.ts","webpack://aristotle/./src/store/document/geometry/rotate.ts","webpack://aristotle/./src/store/document/geometry/wire.ts","webpack://aristotle/./src/containers/Connection.vue","webpack://aristotle/./src/components/item/Freeport.vue","webpack://aristotle/./src/components/item/elements/InputNode.vue","webpack://aristotle/./src/components/item/elements/IntegratedCircuit.vue","webpack://aristotle/./src/components/item/elements/gates/And.vue","webpack://aristotle/./src/components/item/elements/gates/Or.vue","webpack://aristotle/./src/components/item/elements/gates/Nor.vue","webpack://aristotle/./src/components/item/elements/gates/Nand.vue","webpack://aristotle/./src/components/item/elements/gates/Xnor.vue","webpack://aristotle/./src/components/item/elements/gates/Xor.vue","webpack://aristotle/./src/components/item/elements/LogicGate.vue","webpack://aristotle/./src/components/item/elements/OutputNode.vue","webpack://aristotle/./src/components/item/CircuitComponent.vue","webpack://aristotle/./src/components/item/Properties.vue","webpack://aristotle/./src/components/PortHandle.vue","webpack://aristotle/./src/components/PortPivot.vue","webpack://aristotle/./src/types/enums/PortType.ts","webpack://aristotle/./src/containers/PortItem.vue","webpack://aristotle/./src/types/enums/ItemType.ts","webpack://aristotle/./src/types/enums/ItemSubtype.ts","webpack://aristotle/./src/containers/Item.vue","webpack://aristotle/./src/components/editor/Selector.vue","webpack://aristotle/./src/components/editor/Editor.vue","webpack://aristotle/./src/components/Group.vue","webpack://aristotle/./src/menus/submenus/edit.ts","webpack://aristotle/./src/menus/submenus/grid.ts","webpack://aristotle/./src/menus/context/editor.ts","webpack://aristotle/./src/utils/printing.ts","webpack://aristotle/./src/circuit/types/Connection.ts","webpack://aristotle/./src/circuit/types/LogicValue.ts","webpack://aristotle/./src/circuit/base/CircuitNode.ts","webpack://aristotle/./src/circuit/base/InputNode.ts","webpack://aristotle/./src/circuit/base/OutputNode.ts","webpack://aristotle/./src/circuit/base/Circuit.ts","webpack://aristotle/./src/circuit/gates/Nor.ts","webpack://aristotle/./src/circuit/gates/Buffer.ts","webpack://aristotle/./src/circuit/gates/ProxyNode.ts","webpack://aristotle/./src/services/BinaryWaveService.ts","webpack://aristotle/./src/services/ClockService.ts","webpack://aristotle/./src/services/OscillationService.ts","webpack://aristotle/./src/utils/circuitNodeMapper.ts","webpack://aristotle/./src/services/SimulationService.ts","webpack://aristotle/./src/store/document/state.ts","webpack://aristotle/./src/utils/idMapper.ts","webpack://aristotle/./src/store/document/actions/clipboard.ts","webpack://aristotle/./src/store/document/actions/connection.ts","webpack://aristotle/./src/store/document/actions/editor.ts","webpack://aristotle/./src/factories/itemFactory.ts","webpack://aristotle/./src/factories/portFactory.ts","webpack://aristotle/./src/store/document/actions/freeport.ts","webpack://aristotle/./src/store/document/actions/grouping.ts","webpack://aristotle/./src/utils/fromDocumentToEditorCoordinates.ts","webpack://aristotle/./src/store/document/actions/item.ts","webpack://aristotle/./src/store/document/actions/panning.ts","webpack://aristotle/./src/utils/getConnectionChain.ts","webpack://aristotle/./src/store/document/actions/port.ts","webpack://aristotle/./src/store/document/geometry/rotation.ts","webpack://aristotle/./src/store/document/actions/positioning.ts","webpack://aristotle/./src/store/document/actions/rotation.ts","webpack://aristotle/./src/store/document/actions/selection.ts","webpack://aristotle/./src/store/document/actions/simulation.ts","webpack://aristotle/./src/store/document/actions/sizing.ts","webpack://aristotle/./src/store/document/actions/snapping.ts","webpack://aristotle/./src/store/document/actions/undoRedo.ts","webpack://aristotle/./src/utils/sortByZIndex.ts","webpack://aristotle/./src/store/document/actions/zIndex.ts","webpack://aristotle/./src/store/document/actions/zooming.ts","webpack://aristotle/./src/factories/integratedCircuitFactory.ts","webpack://aristotle/./src/store/document/index.ts","webpack://aristotle/./src/services/FileService.ts","webpack://aristotle/./src/utils/getFileName.ts","webpack://aristotle/./src/store/root.ts","webpack://aristotle/./src/containers/Document.vue","webpack://aristotle/./src/components/Icon.vue","webpack://aristotle/./src/components/toolbar/ToolbarButton.vue","webpack://aristotle/./src/components/toolbar/ToolbarSeparator.vue","webpack://aristotle/./src/components/layout/ScrollFade.vue","webpack://aristotle/./src/containers/Toolbar.vue","webpack://aristotle/./src/components/toolbox/ToolboxItem.vue","webpack://aristotle/./src/components/toolbox/ToolboxLayout.vue","webpack://aristotle/./src/factories/inputFactory.ts","webpack://aristotle/./src/factories/clockFactory.ts","webpack://aristotle/./src/factories/lightbulbFactory.ts","webpack://aristotle/./src/factories/logicGateFactory.ts","webpack://aristotle/./src/factories/index.ts","webpack://aristotle/./src/containers/Toolbox.vue","webpack://aristotle/./src/components/tab/TabItem.vue","webpack://aristotle/./src/components/tab/TabHost.vue","webpack://aristotle/./src/components/oscilloscope/OscilloscopeTimeline.vue","webpack://aristotle/./src/components/oscilloscope/OscilloscopeTitleBar.vue","webpack://aristotle/./src/components/oscilloscope/OscilloscopeViewer.vue","webpack://aristotle/./src/containers/Oscilloscope.vue","webpack://aristotle/./src/components/statusbar/StatusBarButton.vue","webpack://aristotle/./src/components/statusbar/StatusBarViewer.vue","webpack://aristotle/./src/components/statusbar/StatusBarZoom.vue","webpack://aristotle/./src/containers/StatusBar.vue","webpack://aristotle/./src/menus/submenus/file.ts","webpack://aristotle/./src/menus/submenus/view.ts","webpack://aristotle/./src/menus/index.ts","webpack://aristotle/./src/components/layout/MainView.vue","webpack://aristotle/./src/utils/isMobile.ts","webpack://aristotle/./src/App.vue","webpack://aristotle/./src/main.ts","webpack://aristotle/webpack/bootstrap","webpack://aristotle/webpack/runtime/chunk loaded","webpack://aristotle/webpack/runtime/compat get default export","webpack://aristotle/webpack/runtime/define property getters","webpack://aristotle/webpack/runtime/global","webpack://aristotle/webpack/runtime/hasOwnProperty shorthand","webpack://aristotle/webpack/runtime/make namespace object","webpack://aristotle/webpack/runtime/node module decorator","webpack://aristotle/webpack/runtime/jsonp chunk loading","webpack://aristotle/webpack/startup"],"sourcesContent":["import { normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createBlock as _createBlock, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, withCtx as _withCtx, createSlots as _createSlots, toDisplayString as _toDisplayString } from \"vue\"\n\nconst _hoisted_1 = { key: 0 }\nconst _hoisted_2 = { key: 1 }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_toolbar = _resolveComponent(\"toolbar\")!\n  const _component_toolbox = _resolveComponent(\"toolbox\")!\n  const _component_tab_item = _resolveComponent(\"tab-item\")!\n  const _component_document = _resolveComponent(\"document\")!\n  const _component_tab_host = _resolveComponent(\"tab-host\")!\n  const _component_oscilloscope = _resolveComponent(\"oscilloscope\")!\n  const _component_status_bar = _resolveComponent(\"status-bar\")!\n  const _component_main_view = _resolveComponent(\"main-view\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", {\n      class: _normalizeClass([\"app__dropzone\", {\n      'app__dropzone--active': _ctx.isDropping\n    }])\n    }, null, 2),\n    (_ctx.activeDocumentId && _ctx.activeDocument)\n      ? (_openBlock(), _createBlock(_component_main_view, { key: 0 }, {\n          top: _withCtx(() => [\n            (_ctx.isMobile)\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, \"mobile bar\"))\n              : _createCommentVNode(\"\", true),\n            (_openBlock(), _createBlock(_component_toolbar, {\n              key: _ctx.activeDocumentId,\n              store: _ctx.activeDocument.store\n            }, null, 8, [\"store\"])),\n            _createVNode(_component_toolbox, {\n              store: _ctx.activeDocument.store\n            }, null, 8, [\"store\"])\n          ]),\n          middle: _withCtx(() => [\n            _createVNode(_component_tab_host, null, _createSlots({\n              default: _withCtx(() => [\n                (_openBlock(), _createBlock(_component_document, {\n                  key: _ctx.activeDocumentId,\n                  store: _ctx.activeDocument.store,\n                  onSwitch: _ctx.switchDocument,\n                  onOpenIntegratedCircuit: _ctx.openIntegratedCircuit\n                }, null, 8, [\"store\", \"onSwitch\", \"onOpenIntegratedCircuit\"]))\n              ]),\n              _: 2\n            }, [\n              (!_ctx.isMobile)\n                ? {\n                    name: \"tabs\",\n                    fn: _withCtx(() => [\n                      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.documents, (document, id) => {\n                        return (_openBlock(), _createBlock(_component_tab_item, {\n                          key: id,\n                          label: document.displayName,\n                          active: _ctx.activeDocumentId === id,\n                          dirty: document.store().isDirty,\n                          onActivate: ($event: any) => (_ctx.activateDocument(id.toString())),\n                          onClose: ($event: any) => (_ctx.closeDocument(id.toString()))\n                        }, null, 8, [\"label\", \"active\", \"dirty\", \"onActivate\", \"onClose\"]))\n                      }), 128))\n                    ])\n                  }\n                : undefined\n            ]), 1024)\n          ]),\n          bottom: _withCtx(() => [\n            (_openBlock(), _createBlock(_component_oscilloscope, {\n              key: _ctx.activeDocumentId,\n              store: _ctx.activeDocument.store\n            }, null, 8, [\"store\"])),\n            (!_ctx.isMobile)\n              ? (_openBlock(), _createBlock(_component_status_bar, {\n                  key: _ctx.activeDocumentId,\n                  store: _ctx.activeDocument.store,\n                  \"is-fullscreen\": _ctx.isFullscreen,\n                  onFullscreen: _ctx.toggleFullscreen\n                }, null, 8, [\"store\", \"is-fullscreen\", \"onFullscreen\"]))\n              : _createCommentVNode(\"\", true)\n          ]),\n          _: 1\n        }))\n      : (_openBlock(), _createElementBlock(\"div\", _hoisted_2, \" no documents open \" + _toDisplayString(_ctx.isDropping), 1))\n  ], 64))\n}","\nimport ResizeObserver from 'resize-observer-polyfill'\nimport { defineComponent, onMounted, ref } from 'vue'\n\nexport default defineComponent({\n  name: 'Resizable',\n  emits: ['resize'],\n  setup (_, { emit }) {\n    const resizable = ref<HTMLElement>()\n\n    /**\n     * Item resize event handler. This will inform the store of the new size of the item.\n     *\n     * @param targets - target element that has been resized\n     */\n    function onSizeChanged ([ target ]: ResizeObserverEntry[]) {\n      emit('resize', target.target.getBoundingClientRect())\n    }\n\n    const observer = new ResizeObserver(onSizeChanged)\n\n    onMounted(() => {\n      if (resizable.value) {\n        observer.observe(resizable.value)\n      }\n    })\n\n    return {\n      resizable\n    }\n  }\n})\n","import { render } from \"./Resizable.vue?vue&type=template&id=83fa57da&ts=true\"\nimport script from \"./Resizable.vue?vue&type=script&lang=ts\"\nexport * from \"./Resizable.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Draggable.vue?vue&type=template&id=aacb1f64&ts=true\"\nimport script from \"./Draggable.vue?vue&type=script&lang=ts\"\nexport * from \"./Draggable.vue?vue&type=script&lang=ts\"\n\nimport \"./Draggable.vue?vue&type=style&index=0&id=aacb1f64&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Wire.vue?vue&type=template&id=3bb5b135&ts=true\"\nimport script from \"./Wire.vue?vue&type=script&lang=ts\"\nexport * from \"./Wire.vue?vue&type=script&lang=ts\"\n\nimport \"./Wire.vue?vue&type=style&index=0&id=3bb5b135&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","enum SnapMode {\n  Outer,\n  Inner,\n  Radial,\n  Grid,\n  None\n}\n\nexport default SnapMode\n","import SnapMode from \"@/types/enums/SnapMode\"\n\n/**\n * Rounds x to the nearest n.\n */\nfunction roundToNth (x: number, n: number) {\n  return Math.round(x / n) * n\n}\n\n/**\n * Returns true if a is within the radial distance of b.\n */\nfunction isInNeighborhood (a: Point, b: Point, radius: number): boolean {\n  return Math.hypot(a.x - b.x + a.y - b.y) <= radius\n}\n\n/**\n * Returns the delta of rounding the top-left point of the given bounding box to the nearest distance.\n * This will achieve the effect of \"snapping to grid.\"\n *\n * @param a - the bounding box of the element moving\n * @param distance - the grid size\n */\nfunction getGridSnapPosition (a: BoundingBox, distance: number): Point {\n  return {\n    x: roundToNth(a.left, distance) - a.left,\n    y: roundToNth(a.top, distance) - a.top\n  }\n}\n\n/**\n * Returns the offset Cartesian distance between bounding box `a` and any other bounding boxes within the radial `distance`.\n * If no bounding boxes are within 'd' distance, it returns an offset of (0, 0).\n *\n * @param boundingBoxes\n * @param a\n * @param d\n */\nfunction getRadialSnapOffset (boundingBoxes: BoundingBox[], a: BoundingBox, distance: number): Point {\n  for (let i = 0; i < boundingBoxes.length; i++) {\n    const b = boundingBoxes[i]\n\n    if (isInNeighborhood({ x: b.left, y: b.top }, { x: a.left, y: a.top }, distance)) {\n      return {\n        x: b.left - a.left,\n        y: b.top - a.top\n      }\n    }\n  }\n\n  return { x: 0, y: 0 }\n}\n\n/**\n * Returns the offset Cartesian distance between bounding box `a` and any other bounding boxes within the linear `distance`.\n * If no bounding boxes are within 'd' distance, it returns an offset of (0, 0).\n *\n * @param boundingBoxes\n * @param a\n * @param d\n */\nfunction getOuterSnapOffset (boundingBoxes: BoundingBox[], a: BoundingBox, distance: number): Point {\n  const offset: Point = { x: 0, y: 0 }\n\n  for (let i = 0; i < boundingBoxes.length; i++) {\n    const b = boundingBoxes[i]\n    const ts = Math.abs(b.top - a.bottom) <= distance\n    const bs = Math.abs(b.bottom - a.top) <= distance\n    const ls = Math.abs(b.left - a.right) <= distance\n    const rs = Math.abs(b.right - a.left) <= distance\n\n    if (\n      (a.left <= b.right && a.left >= b.left) ||\n      (a.right >= b.left && a.right <= b.right) ||\n      (a.left <= b.left && a.right >= b.right)\n    ) {\n      // a is within the y-axis boundaries\n      if (ts) offset.y = b.top - a.bottom\n      if (bs) offset.y = b.bottom - a.top\n    }\n\n    if (\n      (a.top <= b.bottom && a.top >= b.top) ||\n      (a.bottom >= b.top && a.bottom <= b.bottom) ||\n      (a.top <= b.top && a.bottom >= b.bottom)\n    ) {\n      // a is within the x-axis boundaries\n      if (ls) offset.x = b.left - a.right\n      if (rs) offset.x = b.right - a.left\n    }\n  }\n\n  return offset\n}\n\nfunction getSnapOffset (boundingBoxes: BoundingBox[], boundingBox: BoundingBox, snapMode: SnapMode, distance: number) {\n  switch (snapMode) {\n    case SnapMode.Radial:\n      return getRadialSnapOffset(boundingBoxes, boundingBox, distance)\n    case SnapMode.Grid:\n      return getGridSnapPosition(boundingBox, distance)\n    case SnapMode.Outer:\n    default:\n      return getOuterSnapOffset(boundingBoxes, boundingBox, distance)\n  }\n}\n\n/**\n * Returns true if line a intersects with line B.\n *\n * @param a1 - first point of a\n * @param a2 - second point of a\n * @param b1 - first point of b\n * @param b2 - second point of b\n */\nfunction hasLinearIntersection (a1: Point, a2: Point, b1: Point, b2: Point): boolean {\n  const ccw = (a: Point, b: Point, c: Point) => {\n    return (c.y-a.y) * (b.x-a.x) > (b.y-a.y) * (c.x-a.x)\n  }\n\n  return ccw(a1, b1, b2) !== ccw(a2, b1, b2) && ccw(a1, a2, b1) !== ccw(a1, a2, b2)\n}\n\n/**\n * Returns true if the overlaps with the given bounding box.\n *\n * @param a1 - first point of the line\n * @param a2 - second point of the line\n * @param boundingBox - the rectange\n */\nfunction isLineIntersectingRectangle (a1: Point, a2: Point, boundingBox: BoundingBox): boolean {\n  const b1 = { x: boundingBox.left, y: boundingBox.top }\n  const b2 = { x: boundingBox.right, y: boundingBox.top }\n  const b3 = { x: boundingBox.right, y: boundingBox.bottom }\n  const b4 = { x: boundingBox.left, y: boundingBox.bottom }\n\n  return hasLinearIntersection(a1, a2, b1, b2)\n    || hasLinearIntersection(a1, a2, b2, b3)\n    || hasLinearIntersection(a1, a2, b3, b4)\n    || hasLinearIntersection(a1, a2, b4, b1)\n}\n\n/**\n * Returns true if a and b intersect.\n *\n * @param a\n * @param b\n * @returns boolean result of intersection\n */\nfunction hasIntersection (a: BoundingBox, b: BoundingBox): boolean {\n  if (a.left >= b.right || b.left >= a.right) {\n    // one rect is on left side of other\n    return false\n  }\n\n  if (a.top >= b.bottom || b.top >= a.bottom) {\n    // one rect is above other\n    return false\n  }\n\n  return true\n}\n\n/**\n * Scales the bounding box by the given scalar.\n *\n * @param box\n * @param scale\n */\nfunction scaleBoundingBox (box: BoundingBox, scale: number): BoundingBox {\n  return {\n    left: box.left * scale,\n    top: box.top * scale,\n    bottom: box.bottom * scale,\n    right: box.right * scale\n  }\n}\n\n/**\n * Returns true if the given bounding box is one- or two-dimensional.\n */\nfunction isOneOrTwoDimensional (box: BoundingBox) {\n  return box.left !== box.right || box.top !== box.bottom\n}\n\n/**\n * Returns a list of one infinitely-horizontal and one infinitely-vertical boundaries.\n *\n * @param point - the point to compute boundaries for\n * @returns list of bounding boxes\n */\nfunction getLinearBoundaries (point: Point): BoundingBox[] {\n  return [\n    {\n      left: point.x,\n      right: point.x,\n      top: -Infinity,\n      bottom: Infinity\n    },\n    {\n      left: -Infinity,\n      right: Infinity,\n      top: point.y,\n      bottom: point.y\n    }\n  ]\n}\n\n/**\n * Returns a point as a boundary.\n *\n * @param point\n * @returns point boundary\n */\nfunction getPointBoundary (point: Point): BoundingBox {\n  return {\n    left: point.x,\n    top: point.y,\n    right: point.x,\n    bottom: point.y\n  }\n}\n\n/**\n * Computes the bounding box of the given item.\n *\n * @param item\n * @returns computed bounding box\n */\nfunction getBoundingBox (position: Point, rotation: number, width: number, height: number): BoundingBox {\n  if (rotation % 2 === 0) {\n    // item is right side up or upside down\n    return {\n      left: position.x,\n      top: position.y,\n      bottom: height + position.y,\n      right: width + position.x\n    }\n  }\n\n  // item is rotated at a 90 degree angle (CW or CCW)\n  const midX = position.x + (width / 2)\n  const midY = position.y + (height / 2)\n\n  return {\n    left: midX - (height / 2),\n    top: midY - (width / 2),\n    right: midX + (height / 2),\n    bottom: midY + (width / 2)\n  }\n}\n\n/**\n * Computes the group bounding box for the given list of bounding boxes.\n *\n * @param boundingBoxes - list of bounding boxes contained\n * @returns computed bounding box\n */\nfunction getGroupBoundingBox (boundingBoxes: BoundingBox[]): BoundingBox {\n  return boundingBoxes.reduce((rect, boundingBox) => ({\n    left: Math.min(rect.left, boundingBox.left),\n    top: Math.min(rect.top, boundingBox.top),\n    right: Math.max(rect.right, boundingBox.right),\n    bottom: Math.max(rect.bottom, boundingBox.bottom)\n  }), {\n    left: Infinity,\n    top: Infinity,\n    right: 0,\n    bottom: 0\n  })\n}\n\n/**\n * Returns the center point of the given bounding box.\n */\nfunction getBoundingBoxMidpoint (boundingBox: BoundingBox): Point {\n  const width = boundingBox.right - boundingBox.left\n  const height = boundingBox.bottom - boundingBox.top\n\n  return {\n    x: width / 2,\n    y: height / 2\n  }\n}\n\n/**\n * Given parent and child bounding boxes, determines the screen point (top left) of the child centered in the parent.\n *\n * @param parentBox\n * @param childBox\n * @param factor - any factor to round by\n */\nfunction getCenteredScreenPoint (parentBox: BoundingBox, childBox: BoundingBox, factor: number): Point {\n  const parentMidpoint = getBoundingBoxMidpoint(parentBox)\n  const childWidth = childBox.right - childBox.left\n  const childHeight = childBox.bottom - childBox.top\n\n  return {\n    x: roundToNth(parentMidpoint.x - (childWidth / 2), factor),\n    y: roundToNth(parentMidpoint.y - (childHeight / 2), factor)\n  }\n}\n\n/**\n * Computes the minima or maxima between the given points.\n *\n * @param a\n * @param b\n * @param fn\n */\nfunction getExtremePoint (fn: 'min' | 'max', ...points: Point[]): Point {\n  const x = Math[fn](...points.map(({ x }) => x))\n  const y = Math[fn](...points.map(({ y }) => y))\n\n  return { x, y }\n}\n\nexport default {\n  isInNeighborhood,\n  getRadialSnapOffset,\n  getOuterSnapOffset,\n  getGridSnapPosition,\n  isLineIntersectingRectangle,\n  scaleBoundingBox,\n  isOneOrTwoDimensional,\n  getLinearBoundaries,\n  getPointBoundary,\n  hasIntersection,\n  getBoundingBox,\n  getGroupBoundingBox,\n  getBoundingBoxMidpoint,\n  getCenteredScreenPoint,\n  getSnapOffset,\n  getExtremePoint\n}\n","enum Direction {\n  Left = 0,\n  Top,\n  Right,\n  Bottom\n}\n\nexport default Direction\n","import Direction from '@/types/enums/Direction'\n\n/**\n * Normalizes the given rotation with respect to any additional rotation to augment by.\n *\n * @param {number} rotation\n * @param {number} additional\n * @returns {number}\n */\nexport default function rotate (rotation: Direction, additional: Direction = 0): Direction {\n  return ((rotation + additional % 4) + 4) % 4\n}\n","import Direction from '@/types/enums/Direction'\nimport rotate from './rotate'\n\nconst WIRE_PADDING = 15\n\n/**\n * Renders the wire geometry for the given source and target ports.\n *\n * @param source\n * @param target\n */\nexport default function renderLayout (source: Port, target: Port): WireGeometry {\n  const a = source.position\n  const b = target.position\n  const { start, end } = getEndpoints(a, b)\n\n  if (start.x === end.x || start.y === end.y || end.x <= 1 && start.x <= 1 || end.y <= 1 && start.y <= 1) {\n    return computeStraightLine(start, end)\n  }\n\n  const sourceDirection = getPortDirection(source, a, b)\n  const targetDirection = getPortDirection(target, a, b)\n\n  return computeBezier(sourceDirection, targetDirection, start, end)\n}\n\n\nexport function computeStraightLine (a: Point, b: Point) {\n  return {\n    path: `M ${a.x},${a.y} L ${b.x},${b.y}`,\n    width: Math.abs(a.x - b.x) + WIRE_PADDING,\n    height: Math.abs(a.y - b.y) + WIRE_PADDING,\n    minX: -(WIRE_PADDING / 2),\n    minY: -(WIRE_PADDING / 2)\n  }\n}\n\n/**\n * Reverses the orientation of a FreePort by 180 degrees, if the dimension on an axis exceeds that of its wire's opposite end.\n * This gives the visual effect of \"pinching the wire\" so that weird, unnecessary curves aren't sticking out of FreePorts.\n *\n * @param {number} direction\n * @returns {number}\n */\nexport function inflectDirection (direction: number, a: Point, b: Point): Direction {\n  switch (direction) {\n    case Direction.Left:\n      return a.y > b.y ? Direction.Right : Direction.Left\n    case Direction.Top:\n      return a.x < b.x ? Direction.Bottom : Direction.Top\n    case Direction.Right:\n      return a.y > b.y ? Direction.Left : Direction.Right\n    case Direction.Bottom:\n      return a.x < b.x ? Direction.Top : Direction.Bottom\n    default:\n      return inflectDirection(rotate(direction), a, b) // normalize direction to [0,3] and try again\n  }\n}\n\n/**\n * Returns the wire direction for a given port.\n *\n * @param {IPort} port\n * @param {Point} a - the source point\n * @param {Point} b - the target point\n * @returns {number}\n */\nexport function getPortDirection (port: Port, a: Point, b: Point) {\n  // the true direction needs to take into account inherent orientation + its rotation\n  // bezier index directions are one integer off (see computeBezier()) -- subtract by 1\n  let direction = rotate(port.orientation + port.rotation - 1)\n\n  if (port.isFreeport) {\n    // inflect direction for FreePorts to give the \"pinched\" appearance when dragged out of range\n    direction = inflectDirection(direction, a, b)\n\n    if (port.rotation % 4 === 1 || port.rotation % 4 === 2) {\n      direction = rotate(direction - 2)\n    }\n  }\n\n  return direction\n}\n\n/**\n * Updates the source and target endpoints such that the start and end are true.\n * This prevents translations or rotations from \"swapping\" the start and end points.\n *\n * @param {IPort} port\n * @param {Point} a - the source point\n * @param {Point} b - the target point\n * @returns {object<{ start: Point, end: Point }>}\n */\nexport function getEndpoints (a: Point, b: Point): { start: Point, end: Point } {\n  if (a.x <= b.x) {\n    if (a.y <= b.y) {\n      // top left (a) to bottom right (b)\n      return {\n        start: {\n          x: 0,\n          y: 0\n        },\n        end: {\n          x: Math.floor(b.x - a.x),\n          y: Math.floor(b.y - a.y)\n        }\n      }\n    }\n    // bottom left (a) to top right (b)\n    return {\n      start: {\n        x: 0,\n        y: Math.floor(a.y - b.y)\n      },\n      end: {\n        x: Math.floor(b.x - a.x),\n        y: 0\n      }\n    }\n  }\n\n  if (a.y <= b.y) {\n    // bottom left (b) to top right (a)\n    return {\n      start: {\n        x: Math.floor(a.x - b.x),\n        y: 0\n      },\n      end: {\n        x: 0,\n        y: Math.floor(b.y - a.y)\n      }\n    }\n  }\n\n  // top left (b) to bottom right (a)\n  return {\n    start: {\n      x: Math.floor(a.x - b.x),\n      y: Math.floor(a.y - b.y)\n    },\n    end: {\n      x: 0,\n      y: 0\n    }\n  }\n}\n\n/**\n * Computes a Bezier SVG curve path with respect to given source and target directions and positions.\n *\n * @param {number} sourceDirection - the direction that the source is pointing to\n * @param {number} targetDirection - the direction that the target is pointing from\n * @param {Point} start - the source port position\n * @param {Point} end - the target port position\n */\nexport function computeBezier (sourceDirection: number, targetDirection: number, start: Point, end: Point): WireGeometry {\n  const x1 = start.x\n  const y1 = start.y\n  const x4 = end.x\n  const y4 = end.y\n\n  // TODO: change dx/dy to be more user-friendly\n  const dx = Math.max(Math.abs(x1 - x4) / 2, 10)\n  const dy = Math.max(Math.abs(y1 - y4) / 2, 10)\n\n  const x2 = [x1, x1 + dx, x1, x1 - dx][sourceDirection].toFixed(3)\n  const y2 = [y1 - dy, y1, y1 + dy, y1][sourceDirection].toFixed(3)\n  const x3 = [x4, x4 + dx, x4, x4 - dx][targetDirection].toFixed(3)\n  const y3 = [y4 - dy, y4, y4 + dy, y4][targetDirection].toFixed(3)\n\n  const path = [\n    'M', x1.toFixed(3), y1.toFixed(3),\n    'C', x2, y2, x3, y3, x4.toFixed(3), y4.toFixed(3)\n  ].join(' ')\n\n  const toNumArr = (...n: Array<string | number>) => n.map(k => parseInt(k.toString(), 10))\n\n  const minX = Math.min(...toNumArr(x1, x2, x3, x4)) - WIRE_PADDING / 2\n  const maxX = Math.max(...toNumArr(x1, x2, x3, x4)) + WIRE_PADDING / 2\n  const minY = Math.min(...toNumArr(y1, y2, y3, y4)) - WIRE_PADDING / 2\n  const maxY = Math.max(...toNumArr(y1, y2, y3, y4)) + WIRE_PADDING / 2\n\n  const width = maxX - minX + WIRE_PADDING\n  const height = maxY - minY + WIRE_PADDING\n\n  return { width, height, path, minX, minY }\n}\n","import { render } from \"./Connection.vue?vue&type=template&id=5d32ce7e&ts=true\"\nimport script from \"./Connection.vue?vue&type=script&lang=ts\"\nexport * from \"./Connection.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Freeport.vue?vue&type=template&id=5e8c7cdc&ts=true\"\nimport script from \"./Freeport.vue?vue&type=script&lang=ts\"\nexport * from \"./Freeport.vue?vue&type=script&lang=ts\"\n\nimport \"./Freeport.vue?vue&type=style&index=0&id=5e8c7cdc&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./InputNode.vue?vue&type=template&id=653554b3&ts=true\"\nimport script from \"./InputNode.vue?vue&type=script&lang=ts\"\nexport * from \"./InputNode.vue?vue&type=script&lang=ts\"\n\nimport \"./InputNode.vue?vue&type=style&index=0&id=653554b3&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./IntegratedCircuit.vue?vue&type=template&id=072f46ee&ts=true\"\nimport script from \"./IntegratedCircuit.vue?vue&type=script&lang=ts\"\nexport * from \"./IntegratedCircuit.vue?vue&type=script&lang=ts\"\n\nimport \"./IntegratedCircuit.vue?vue&type=style&index=0&id=072f46ee&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./And.vue?vue&type=template&id=451c19e4&ts=true\"\nimport script from \"./And.vue?vue&type=script&lang=ts\"\nexport * from \"./And.vue?vue&type=script&lang=ts\"\n\nimport \"./And.vue?vue&type=style&index=0&id=451c19e4&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Or.vue?vue&type=template&id=4e6eb8f2&ts=true\"\nimport script from \"./Or.vue?vue&type=script&lang=ts\"\nexport * from \"./Or.vue?vue&type=script&lang=ts\"\n\nimport \"./Or.vue?vue&type=style&index=0&id=4e6eb8f2&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Nor.vue?vue&type=template&id=7803c0c0&ts=true\"\nimport script from \"./Nor.vue?vue&type=script&lang=ts\"\nexport * from \"./Nor.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Nand.vue?vue&type=template&id=1bef5bae&ts=true\"\nimport script from \"./Nand.vue?vue&type=script&lang=ts\"\nexport * from \"./Nand.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Xnor.vue?vue&type=template&id=3e58dbce&ts=true\"\nimport script from \"./Xnor.vue?vue&type=script&lang=ts\"\nexport * from \"./Xnor.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Xor.vue?vue&type=template&id=2e4c44f6&ts=true\"\nimport script from \"./Xor.vue?vue&type=script&lang=ts\"\nexport * from \"./Xor.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./LogicGate.vue?vue&type=template&id=4853bdc0&ts=true\"\nimport script from \"./LogicGate.vue?vue&type=script&lang=ts\"\nexport * from \"./LogicGate.vue?vue&type=script&lang=ts\"\n\nimport \"./LogicGate.vue?vue&type=style&index=0&id=4853bdc0&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./OutputNode.vue?vue&type=template&id=38254202&ts=true\"\nimport script from \"./OutputNode.vue?vue&type=script&lang=ts\"\nexport * from \"./OutputNode.vue?vue&type=script&lang=ts\"\n\nimport \"./OutputNode.vue?vue&type=style&index=0&id=38254202&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./CircuitComponent.vue?vue&type=template&id=019043e1&ts=true\"\nimport script from \"./CircuitComponent.vue?vue&type=script&lang=ts\"\nexport * from \"./CircuitComponent.vue?vue&type=script&lang=ts\"\n\nimport \"./CircuitComponent.vue?vue&type=style&index=0&id=019043e1&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Properties.vue?vue&type=template&id=0ac03fe7&ts=true\"\nimport script from \"./Properties.vue?vue&type=script&lang=ts\"\nexport * from \"./Properties.vue?vue&type=script&lang=ts\"\n\nimport \"./Properties.vue?vue&type=style&index=0&id=0ac03fe7&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./PortHandle.vue?vue&type=template&id=874b4b32&ts=true\"\nimport script from \"./PortHandle.vue?vue&type=script&lang=ts\"\nexport * from \"./PortHandle.vue?vue&type=script&lang=ts\"\n\nimport \"./PortHandle.vue?vue&type=style&index=0&id=874b4b32&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./PortPivot.vue?vue&type=template&id=5d35e0ac&ts=true\"\nimport script from \"./PortPivot.vue?vue&type=script&lang=ts\"\nexport * from \"./PortPivot.vue?vue&type=script&lang=ts\"\n\nimport \"./PortPivot.vue?vue&type=style&index=0&id=5d35e0ac&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","enum PortType {\n  Output = 0,\n  Input\n}\n\nexport default PortType\n","import { render } from \"./PortItem.vue?vue&type=template&id=71943606&ts=true\"\nimport script from \"./PortItem.vue?vue&type=script&lang=ts\"\nexport * from \"./PortItem.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","enum ItemType {\n  Buffer = 'Buffer',\n  CircuitNode = 'CircuitNode',\n  Freeport = 'Freeport',\n  InputNode = 'InputNode',\n  IntegratedCircuit = 'IntegratedCircuit',\n  LogicGate = 'LogicGate',\n  OutputNode = 'OutputNode'\n}\n\nexport default ItemType\n","enum ItemSubtype {\n  None = 'None',\n\n  /* input nodes */\n  Switch = 'Switch',\n  PushButton = 'PushButton',\n  Clock = 'Clock',\n\n  /* output nodes */\n  Lightbulb = 'Lightbulb',\n\n  /* buffers */\n  Buffer = 'Buffer',\n  Not = 'Not',\n\n  /* tri-state */\n  Tristate = 'Tristate',\n\n  /* logic gates */\n  And = 'And',\n  Or = 'Or',\n  Nand = 'Nand',\n  Nor = 'Nor',\n  Xnor = 'Xnor',\n  Xor = 'Xor'\n}\n\nexport default ItemSubtype\n","import { render } from \"./Item.vue?vue&type=template&id=4e974ce0&ts=true\"\nimport script from \"./Item.vue?vue&type=script&lang=ts\"\nexport * from \"./Item.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Selector.vue?vue&type=template&id=00c70482&ts=true\"\nimport script from \"./Selector.vue?vue&type=script&lang=ts\"\nexport * from \"./Selector.vue?vue&type=script&lang=ts\"\n\nimport \"./Selector.vue?vue&type=style&index=0&id=00c70482&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Editor.vue?vue&type=template&id=31363568&ts=true\"\nimport script from \"./Editor.vue?vue&type=script&lang=ts\"\nexport * from \"./Editor.vue?vue&type=script&lang=ts\"\n\nimport \"./Editor.vue?vue&type=style&index=0&id=31363568&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Group.vue?vue&type=template&id=2e6e8258&ts=true\"\nimport script from \"./Group.vue?vue&type=script&lang=ts\"\nexport * from \"./Group.vue?vue&type=script&lang=ts\"\n\nimport \"./Group.vue?vue&type=style&index=0&id=2e6e8258&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { MenuItemConstructorOptions } from 'electron/main'\nimport { DocumentStore } from '@/store/document'\n\nexport default function edit (useDocumentStore: DocumentStore, submenus: MenuItemConstructorOptions[] = []): MenuItemConstructorOptions[] {\n  const store = useDocumentStore()\n\n  let menu: MenuItemConstructorOptions[] = [\n    {\n      label: '&Undo',\n      enabled: store.canUndo,\n      accelerator: 'CommandOrControl+Z',\n      click: store.undo\n    },\n    { type: 'separator' },\n    {\n      role: 'cut',\n      enabled: store.hasSelection\n    },\n    {\n      role: 'copy',\n      enabled: store.hasSelection\n    },\n    {\n      role: 'paste',\n      enabled: store.hasSelection\n    },\n    {\n      label: 'Delete',\n      accelerator: 'Delete',\n      enabled: store.hasSelection,\n      click: store.deleteSelection\n    },\n    { type: 'separator' },\n    {\n      role: 'selectAll',\n      enabled: store.baseItems.length > 0\n    }\n  ]\n\n  if (store.selectedItemIds.length > 0) {\n    menu.push({ type: 'separator' })\n    menu.push({\n      label: '&Rotate',\n      submenu: [\n        {\n          label: 'Rotate 90 &CW',\n          accelerator: 'CmdOrCtrl+R',\n          click: () => store.rotate(1)\n        },\n        {\n          label: 'Rotate 90 CC&W',\n          accelerator: 'CmdOrCtrl+Shift+R',\n          click: () => store.rotate(-1)\n        }\n      ]\n    })\n  }\n\n  if (store.hasSelection) {\n    menu.push({ type: 'separator' })\n    menu.push({\n      label: '&Bring to Front',\n      submenu: [\n        {\n          label: '&Bring to Front',\n          click: () => store.setZIndex(store.zIndex)\n        },\n        {\n          label: 'Bring &Forward',\n          click: () => store.incrementZIndex(1)\n        }\n      ]\n    })\n    menu.push({\n      label: '&Send to Back',\n      submenu: [\n        {\n          label: '&Send to Back',\n          click: () => store.setZIndex(store.zIndex)\n        },\n        {\n          label: 'Send &Backward',\n          click: () => store.incrementZIndex(-1)\n        }\n      ]\n    })\n  }\n\n  if (store.canGroup) {\n    menu.push({\n      label: '&Group',\n      submenu: [\n        { label: '&Group' },\n        {\n          label: '&Ungroup',\n          enabled: store.canUngroup\n        }\n      ]\n    })\n  }\n\n  if (submenus.length > 0) {\n    menu.push({ type: 'separator' })\n    menu = menu.concat(submenus)\n  }\n\n  if (store.selectedItemIds.length === 1) {\n    menu.push({ type: 'separator' })\n    menu.push({\n      label: '&Item Properties'\n    })\n  }\n\n  if (store.activePortId) {\n    menu.push({ type: 'separator' })\n    menu.push({\n      type: 'checkbox',\n      label: 'Show in &Oscilloscope',\n      checked: true\n    })\n  }\n\n  return menu\n}\n","import { MenuItemConstructorOptions } from 'electron/main'\nimport { DocumentStore } from '@/store/document'\n\nexport default function grid (useDocumentStore: DocumentStore): MenuItemConstructorOptions[] {\n  const store = useDocumentStore()\n\n  return [\n    {\n      label: '&Grid',\n      submenu: [\n        {\n          label: '&Show grid'\n        },\n        { type: 'separator' },\n        { label: 'Snap to &grid' },\n        { label: 'Snap to &elements' }\n      ]\n    }\n  ]\n}\n","import { MenuItemConstructorOptions } from 'electron/main'\nimport { Store } from 'pinia'\nimport { DocumentStore } from '@/store/document'\nimport edit from '../submenus/edit'\nimport grid from '../submenus/grid'\n\nexport default function editor (store: DocumentStore): MenuItemConstructorOptions[] {\n  return edit(store, grid(store).concat({ type: 'separator' }))\n}\n","import domToImage from 'dom-to-image'\n\n/**\n * Renders a printer-friendly HTML DOM clone of the given editor element.\n *\n * @param zoom - current zoom level of the document\n * @param editor - the editor DOM element to clone\n * @param boundingBox - the bounding box of all items in the editor\n * @param padding - number of pixels to use as surrounding padding\n */\nfunction createPrintArea (zoom: number, editor: HTMLElement, boundingBox: BoundingBox, padding: number, className: string = 'printer-friendly') {\n  const printArea = editor.cloneNode(true) as HTMLElement\n  const width = boundingBox.right - boundingBox.left + (padding * 2)\n  const height = boundingBox.bottom - boundingBox.top + (padding * 2)\n\n  for (let i = 0; i < printArea.children.length; i++) {\n    const child = printArea.children[i] as HTMLElement\n    const left = parseInt(child.style.left.replace('px', ''), 10) + padding\n    const top = parseInt(child.style.top.replace('px', ''), 10) + padding\n\n    child.style.left = `${(left - boundingBox.left)}px`\n    child.style.top = `${(top - boundingBox.top)}px`\n  }\n\n  printArea.style['zoom' as any] = zoom.toString()\n  printArea.style.width = `${width}px`\n  printArea.style.height = `${height}px`\n  printArea.style.position = 'relative'\n  printArea.style.top = '0'\n  printArea.style.left = '0'\n  printArea.style.background = 'none'\n\n  if (className) {\n    printArea.classList.add(className)\n  }\n\n  return { printArea, width, height }\n}\n\n/**\n * Renders a hidden iframe on the page for printing.\n *\n * @param image - the image to print\n * @param pageSize - list of [width, height] dimensions, in inches\n */\nfunction createPrintFrame (image: HTMLImageElement, pageSize: number[]) {\n  const iframe = document.createElement('iframe')\n\n  iframe.name = 'print'\n  iframe.style.width = '1px'\n  iframe.style.height = '1px'\n  iframe.style.opacity = '0'\n  iframe.style.position = 'absolute'\n  iframe.style.top = '0px'\n  iframe.style.left = '0px'\n\n  document.body.appendChild(iframe)\n\n  const printFrame = iframe.contentWindow\n\n  if (printFrame) {\n    const styleTag = document.createElement('style')\n\n    styleTag.appendChild(document.createTextNode(`\n      @page {\n        size: ${pageSize.map(s => `${s}in`).join(' ')};\n        margin: 0in;\n      }\n    `))\n\n    printFrame.document.head.append(styleTag)\n    printFrame.document.body.appendChild(image)\n  }\n\n  return iframe\n}\n\n/**\n * Renders a binary PNG screenshot of the given HTML element.\n *\n * @param printArea\n */\nasync function createImage<T extends string | Blob> (printArea: HTMLElement, fn: 'toBlob' | 'toPng') {\n  document.body.appendChild(printArea)\n\n  const dataUrl = await domToImage[fn](printArea) as T\n\n  printArea.remove()\n\n  return dataUrl\n}\n\n/**\n * Prints (using a physical printer) the contents of the given window.\n */\nasync function printWindow (win: Window | null) {\n  return new Promise<void>(resolve => {\n    setTimeout(() => {\n      if (!win) return resolve()\n\n      win.addEventListener('afterprint', () => resolve())\n      win.print()\n    })\n  })\n}\n\n/**\n * Prints (using a physical printer) the editor.\n * The version printed will be rendered as a printer-friendly (read: ink-friendly) screenshot of the given editor.\n *\n * @param zoom - current zoom level of the document\n * @param editor - the editor DOM element to clone\n * @param boundingBox - the bounding box of all items in the editor\n */\nasync function printImage (zoom: number, editor: HTMLElement, boundingBox: BoundingBox) {\n  const { printArea, width, height } = createPrintArea(1 / zoom, editor, boundingBox, 20)\n  const dataUrl = await printing.createImage<string>(printArea, 'toPng')\n  const pageSize = [8.5, 11] // inches\n  const minSize = Math.min(...pageSize) * 96 // pixels\n  const maxSize = Math.max(...pageSize) * 96 // pixels\n  const image = new Image()\n\n  let percent = 1 // percentage to resize the image by (to fit printable window area)\n\n  image.src = dataUrl as string\n\n  if (width > minSize || width > maxSize || height > minSize || height > maxSize) {\n    // make the image print in either landscape or portrait, whichever fits better\n    const isLandscape = width > height\n\n    // if the image exceeds one of the dimensions, resize it in ratio to match the dimension\n    percent = isLandscape\n      ? maxSize / width\n      : maxSize / height\n\n    if (isLandscape) {\n      pageSize.reverse()\n    }\n  }\n\n  image.style.width = `${Math.floor(width * percent)}px`\n  image.style.height = `${Math.floor(height * percent)}px`\n\n  const iframe = printing.createPrintFrame(image, pageSize)\n\n  await printing.printWindow(iframe?.contentWindow)\n\n  iframe?.remove()\n}\n\nconst printing = {\n  createPrintArea,\n  createPrintFrame,\n  createImage,\n  printImage,\n  printWindow\n}\n\nexport default printing\n","import CircuitNode from '../base/CircuitNode'\n\nclass Connection {\n  node: CircuitNode\n  id: string\n\n  constructor (node: CircuitNode, id: string) {\n    this.node = node\n    this.id = id\n  }\n}\n\nexport default Connection\n","const LogicValue = {\n  TRUE: 1,\n  FALSE: -1,\n  UNKNOWN: 0\n}\n\nexport default LogicValue\n","import Connection from '../types/Connection'\nimport LogicValue from '../types/LogicValue'\n\nclass CircuitNode {\n  /**\n   * Incoming values, to be used for calculation of the node's state.\n   *\n   * @type {Array<LogicValue>}\n   */\n  public inputValues: { [id: string]: number } = {}\n\n  /**\n   * List of outgoing connections.\n   *\n   * @type {Array<Connection>}\n   */\n  public outputs: Array<Connection> = []\n\n  /**\n   * Set to true if the value of the node has changed since last circuit evaluation.\n   *\n   * @type {Boolean}\n   */\n  public isValueChanged: boolean = true\n\n  /**\n   * Set to true to have the debugger continue regardless of whether this node changed or not.\n   *\n   * @type {Boolean}\n   */\n  public forceContinue: boolean = false\n\n  /**\n   * Name of the node.\n   *\n   * @type {String}\n   */\n  public name: string\n\n  /**\n   * Current value of the node.\n   *\n   * @type {LogicValue}\n   * @default LogicValue.UNKNOWN\n   */\n  public value: number = LogicValue.UNKNOWN\n\n  /**\n   * Next value for the node.\n   *\n   * @type {LogicValue}\n   * @default LogicValue.UNKNOWN\n   */\n  public newValue: number = LogicValue.UNKNOWN\n\n  /**\n   * List of dictionaries containing event types and their respective callbacks.\n   * Used for the invocation of event listeners when their respective events are fired.\n   *\n   * @type {Array<Object>}\n   */\n  public events: Array<{ eventType: string, callback: Function }> = []\n\n  /**\n   * Constructor.\n   *\n   * @param {String} name - name of the node\n   * @param {Number} [inputIds = []] - ids for each input port\n   */\n  constructor (name: string, inputIds: string[] = []) {\n    this.name = name\n    this.inputValues = inputIds.reduce((map, id) => ({\n      ...map,\n      [id]: LogicValue.UNKNOWN\n    }), {})\n  }\n\n  /**\n   * Updates the node's value to be static having the given value.\n   *\n   * @param {LogicValue} value\n   */\n  public setValue = (value: number): void => {\n    this.newValue = value\n  }\n\n  /**\n   * Invokes the registered events having the given `eventType`.\n   *\n   * @param {String} eventType - 'change' or 'reset'\n   * @param {LogicValue} value\n   */\n  public invokeEvent = (eventType: string, value: number): void => {\n    this.events.forEach((event) => {\n      if (event.eventType === eventType) {\n        event.callback(value)\n      }\n    })\n  }\n\n  /**\n   * Evaluates the node. Default behavior returns the current value.\n   *\n   * @returns {LogicValue}\n   */\n  public eval = (): number => {\n    return this.value\n  }\n\n  /**\n   * Calculates how many input values equal the given comparison value.\n   *\n   * @param {LogicValue} compare - value to get count of\n   * @returns {Number}\n   */\n  public valueCount = (compare: number): number => {\n    return Object\n      .values(this.inputValues)\n      .filter((value) => value === compare)\n      .length\n  }\n\n  /**\n   * Updates all outgoing connected nodes with the given value.\n   *\n   * @param {LogicValue} newValue - new value to output to the nodes\n   */\n  public updateOutputs = (newValue: number): void => {\n    this.outputs.forEach(({ node, id }: Connection) => {\n      node.update(newValue, id)\n    })\n  }\n\n  /**\n   * Updates the input value at the given index with the given value.\n   *\n   * @param {LogicValue} value - new value\n   * @param {Number} id - source port id\n   */\n  public update = (value: number, id: string): void => {\n    this.inputValues[id] = value\n    this.newValue = this.eval()\n  }\n\n  /**\n   * Propagates a signal, if the value of the node has changed.\n   *\n   * @returns {CircuitNodes[]} queue of all resulting nodes to be evaluated in the next state\n   */\n  public propagate = (): Array<CircuitNode> => {\n    let queue: CircuitNode[] = []\n\n    if (this.value !== this.newValue) {\n      this.isValueChanged = true\n      this.value = this.newValue\n      this.updateOutputs(this.newValue)\n      this.invokeEvent('change', this.newValue)\n\n      this\n        .outputs\n        .forEach(({ node }) => {\n          if (node.forceContinue) {\n            // if this node is forced to continue propagation, enqueue its result\n            queue = queue.concat(node.propagate())\n          } else {\n            // otherwise, just enqueue the node itself\n            queue.push(node)\n          }\n        })\n    }\n\n    return queue\n  }\n\n  /**\n   * Resets the value and subsequent value of the node with Hi-Z.\n   */\n  public reset = (): void => {\n    this.value = LogicValue.UNKNOWN\n    this.newValue = LogicValue.UNKNOWN\n    this.invokeEvent('change', this.newValue)\n  }\n\n  /**\n   * Registers an event listener.\n   *\n   * @param {String} eventType - 'change' or 'reset'\n   * @param {Function} callback - method to invoke on event\n   */\n  public on = (eventType: string, callback: Function): void => {\n    this.events.push({ eventType, callback })\n  }\n\n  /**\n   * Returns the value of the node next time the circuit is evaluated.\n   *\n   * @returns {Number}\n   */\n  public getProjectedValue = (): number => {\n    return this.eval() || this.newValue || this.value\n  }\n}\n\n\nexport default CircuitNode\n","import CircuitNode from './CircuitNode'\n\nclass InputNode extends CircuitNode {\n  /**\n   * Resets the node.\n   *\n   * @override CircuitNode.reset\n   */\n  public reset = (): void => {\n    // do nothing\n  }\n}\n\nexport default InputNode\n","import CircuitNode from './CircuitNode'\n\nclass OutputNode extends CircuitNode {\n  /**\n   * Updates the value of the node.\n   *\n   * @override CircuitNode.update\n   * @param {LogicValue} value\n   */\n  public update = (value: number): void => {\n    if (this.newValue !== value) {\n      this.newValue = value\n      this.invokeEvent('change', value)\n    }\n  }\n}\n\nexport default OutputNode\n","import CircuitNode from '../base/CircuitNode'\nimport Connection from '../types/Connection'\nimport LogicValue from '../types/LogicValue'\nimport InputNode from './InputNode'\nimport OutputNode from './OutputNode'\n\nclass Circuit {\n  /**\n   * The debugger processing queue.\n   *\n   * @type {Array<CircuitNode>}\n   */\n  public queue: Array<CircuitNode> = []\n\n  /**\n   * A list of all the nodes in the circuit.\n   *\n   * @type {Array<CircuitNode>}\n   */\n  public nodes: Array<CircuitNode> = []\n\n  /**\n   * A list of all input nodes in the circuit.\n   *\n   * @type {Array<CircuitNode>}\n   */\n  public inputNodes: Array<InputNode> = []\n\n  /**\n   * Adds a node to the circuit and its appropriate queue(s).\n   *\n   * @param {CircuitNode} node - node to add\n   */\n  public addNode = (node: CircuitNode): void => {\n    if (node instanceof InputNode) {\n      this.inputNodes.push(node)\n      this.enqueue(node)\n    }\n    this.nodes.push(node)\n  }\n\n  /**\n   * Removes a node from the circuit and its appropriate queue(s).\n   *\n   * @param {CircuitNode} node - node to remove\n   */\n  public removeNode = (node: CircuitNode): void => {\n    if (node instanceof InputNode) {\n      const inputIndex = this.inputNodes.findIndex(({ name }) => name === node.name)\n\n      if (inputIndex !== -1) {\n        this.inputNodes.splice(inputIndex, 1)\n      }\n      // this.reset() // TODO: why?\n    }\n\n    const index = this.nodes.findIndex(({ name }) => name === node.name)\n\n    if (index !== -1) {\n      this.removeNodeOutputs(node)\n      this.nodes.splice(index, 1)\n    }\n\n    this.next()\n  }\n\n  /**\n   * Adds a connection entry from the source node to the target node on the given index.\n   *\n   * @param {CircuitNode} source - source node\n   * @param {CircuitNode} target - target node\n   * @param {Number} targetId - entry port id on the target node for the connection\n   */\n  public addConnection = (source: CircuitNode, target: CircuitNode, targetId: string): void => {\n    source.outputs.push(new Connection(target, targetId))\n    source.value = LogicValue.UNKNOWN\n    this.enqueue(source)\n  }\n\n  /**\n   * Removes the connection on the source node at the source index and the connection at its target node.\n   * The input value at the target index will be reset to Hi-Z.\n   *\n   * @param {CircuitNode} sourceNode - source node to disconnect\n   * @param {CircuitNode} targetNode - target node to disconnect\n   */\n  public removeConnection = (sourceNode: CircuitNode, targetNode: CircuitNode): void => {\n    sourceNode\n      .outputs\n      .concat()\n      .forEach(({ node, id }: Connection, i: number) => {\n        if (targetNode === node) {\n          // reset the input of the target for this connection to hi-Z\n          targetNode.update(LogicValue.UNKNOWN, id)\n\n          // remove the output entry at the source\n          sourceNode.outputs.splice(i, 1)\n\n          // place the target node in the queue for processing\n          this.enqueue(targetNode)\n        }\n      })\n  }\n\n  /**\n   * Removes all connections from the given source node.\n   *\n   * @param {CircuitNode} source\n   */\n  removeNodeOutputs = (source: CircuitNode): void => {\n    for (let i: number = 0; i < source.outputs.length; i++) {\n      this.removeConnection(source, source.outputs[i].node)\n    }\n  }\n\n  /**\n   * Appends the given node(s) to the processing queue.\n   *\n   * @param {...CircuitNode} added - node(s) to add to the queue\n   */\n  public enqueue = (...added: CircuitNode[]): void => {\n    added.forEach((node) => {\n      if (!~this.queue.indexOf(node)) {\n        this.queue.push(node)\n      }\n    })\n  }\n\n  /**\n   * Removes the given node from the processing queue.\n   *\n   * @param {CircuitNode} removed - node to remove from the queue\n   */\n  public dequeue = (removed: CircuitNode): void => {\n    const removedIndex = this.queue.indexOf(removed)\n\n    if (~removedIndex) {\n      this.queue.splice(removedIndex, 1)\n    }\n  }\n\n  /**\n   * Resets the circuit.\n   */\n  public reset = (): void => {\n    this.nodes.forEach((node) => node.reset())\n  }\n\n  /**\n   * Advances the circuit simulation one step. If none of the node values have changed,\n   * it continues stepping through until either a value changes or the queue is empty.\n   */\n  public next = (): void => {\n    let isValueChanged = false\n    let localQueue: CircuitNode[] = []\n\n    while (this.queue.length > 0) {\n      const node = this.queue.shift()\n\n      if (!node) continue\n\n      localQueue = localQueue.concat(node.propagate())\n\n      this.dequeue(node)\n\n      if (node.isValueChanged) {\n        isValueChanged = true\n      }\n\n      if (node.forceContinue) {\n        this.enqueue(...localQueue)\n        localQueue = []\n      }\n    }\n\n    if (isValueChanged) {\n      this.enqueue(...localQueue)\n    }\n  }\n\n  /**\n   * Returns true when the queue is finished processing.\n   *\n   * @returns {Boolean}\n   */\n  public isComplete = (): boolean => {\n    let isComplete = true\n\n    if (this.queue.length === 0) {\n      return true\n    }\n\n    this.queue.forEach(node => {\n      const nextValue = node.getProjectedValue()\n\n      if (nextValue !== node.value && !(node instanceof OutputNode)) {\n        isComplete = false\n      }\n    })\n\n    if (isComplete) {\n      this.queue = []\n    }\n\n    return isComplete\n  }\n}\n\nexport default Circuit\n","import CircuitNode from '../base/CircuitNode'\nimport LogicValue from '../types/LogicValue'\n\nclass Nor extends CircuitNode {\n  public eval = (): number => {\n    if (this.valueCount(LogicValue.TRUE)) {\n      return LogicValue.FALSE\n    }\n\n    if (this.valueCount(LogicValue.UNKNOWN)) {\n      return LogicValue.UNKNOWN\n    }\n\n    return LogicValue.TRUE\n  }\n}\n\nexport default Nor\n","import CircuitNode from '../base/CircuitNode'\nimport LogicValue from '../types/LogicValue'\n\nclass Buffer extends CircuitNode {\n  public forceContinue: boolean = true\n\n  /**\n   * Updates the input value at the given index with the given value.\n   *\n   * @override CircuitNode.update\n   * @param {LogicValue} value - new value\n   * @param {Number} index - source index\n   */\n  public update = (value: number): void => {\n    const id = Object\n      .keys(this.inputValues)\n      .pop()\n\n    if (id) {\n      this.inputValues[id] = value\n      this.newValue = this.eval()\n    }\n  }\n\n  public eval = (): number => {\n    return Object.values(this.inputValues).pop() || LogicValue.UNKNOWN\n  }\n}\n\nexport default Buffer\n","import CircuitNode from '../base/CircuitNode'\n\nclass ProxyNode extends CircuitNode {\n  forceContinue = true\n}\n\nexport default ProxyNode\n","import { LogicValue } from '@/circuit'\n\n/**\n * @class BinaryWaveService\n * @description this service provides functionality for a graphical illustration of a wave in the oscilloscope.\n * Instances of these waves are the values of the active oscillogram.\n */\nexport default class BinaryWaveService implements Pulse {\n  /** Wave ID. */\n  public id: string\n\n  /** User-friendly label for this wave. */\n  public name: string\n\n  /** Width (in pixels) of the wave. */\n  public width: number = 0\n\n  /** The y value for the last segment. */\n  private lastY: number = 0\n\n  /** Cartesian point values for each pixel segment. */\n  public segments: Point[] = []\n\n  /** Hue color value for the wave. */\n  public hue: number = 0\n\n  /**\n   * Constructor.\n   *\n   * @param name - user-friendly label for this wave\n   * @param signal - current signal value to initialize at\n   * @param hue - color value for the wave\n   */\n  constructor (id: string, name: string, signal: number, hue: number) {\n    this.id = id\n    this.name = name\n    this.hue = hue\n    this.initialize(signal)\n  }\n\n  /**\n   * Creates an initial segment based on the given signal.\n   *\n   * @param signal\n   */\n  public initialize = (signal: number) => {\n    const segment = { x: 1, y: 1 }\n\n    if (signal === 1) {\n      segment.y = 0 // draw a vertical line from 0 up to 1\n      this.lastY = 1\n    } else {\n      segment.y = 1 // draw a vertical line from 1 down to 0\n      this.lastY = 0\n    }\n\n    this.addSegment(segment)\n    this.updateWidth()\n  }\n\n  /**\n   * Clears out the existing wave data.\n   */\n  public reset = () => {\n    this.segments = []\n    this.width = 0\n    this.initialize(this.lastY === 1 ? 0 : 1)\n  }\n\n  /**\n   * Periodic update function.\n   *\n   * @param elapsed - (no value necessary)\n   */\n  public update = (elapsed: number): void => {\n    this.drawPulseConstant()\n  }\n\n  /**\n   * Adds a new segment.\n   * This will correct for any mismatches between the segment and the previous one (if any).\n   *\n   * @param segment - new segment to add\n   */\n  addSegment = (segment: Point) => {\n    const previous = this.segments[this.segments.length - 1]\n\n    if (!previous && segment.x > 0) {\n      this.segments.push({ x: 0, y: segment.y })\n    } else if (previous && previous.x !== segment.x && previous.y !== segment.y) {\n      // if a previous segment exists, and both its x and y values mismatch, then remove it\n      this.segments.pop()\n    }\n\n    this.segments.push(segment)\n    this.updateWidth()\n  }\n\n  /**\n   * Draws the next segment of the wave with an inverted signal line.\n   *\n   * @param signal - incoming signal change value\n   */\n  drawPulseChange = (signal: number) => {\n    const { x } = this.segments[this.segments.length - 1]\n    const y = signal === LogicValue.TRUE ? 0 : 1\n\n    this.updateWidth()\n    this.addSegment({ x, y })\n  }\n\n  /**\n   * Draws the next segment of the wave, continued from the current signal line.\n   */\n  drawPulseConstant = () => {\n    const previous = this.segments[this.segments.length - 1]\n    // if the y value from the previous segment is unchanged, just extend its x value\n    const pos = this.lastY !== previous.y\n      ? previous\n      : this.segments.pop()\n\n\n    if (pos) {\n      this.updateWidth()\n      this.addSegment({\n        x: pos.x + 1,\n        y: pos.y\n      })\n    }\n    this.lastY = previous.y\n  }\n\n  /**\n   * Truncates the wave from the back such that the resulting wave is no wider than the given value.\n   *\n   * @param widthToKeep - the width, in pixels, to keep from the wave\n   */\n  truncateSegments = (widthToKeep: number) => {\n    if (widthToKeep > this.width) {\n      return\n    }\n\n    const widthToTruncate = this.width - widthToKeep\n\n    let deltaX = 0\n\n    for (let i = 0; i < this.segments.length; i++) {\n      const { x, y } = this.segments[i]\n\n      if (x > widthToTruncate) {\n        deltaX = x - widthToTruncate\n\n        this.segments.splice(0, i)\n        this.segments.unshift({ x: 0, y })\n\n        break\n      }\n    }\n\n    for (let i = 1; i < this.segments.length; i++) {\n      const { x, y } = this.segments[i]\n\n      this.segments[i] = {\n        x: x - widthToTruncate,\n        y\n      }\n    }\n\n    this.updateWidth()\n  }\n\n  updateWidth = () => {\n    this.width = this.segments.slice(-1)[0]?.x || 0\n  }\n}\n","import { TinyEmitter } from 'tiny-emitter'\nimport { v4 as uuid } from 'uuid'\n\n/**\n * @class ClockService\n * @description This provides an oscillating clock wave. It oscillates between TRUE and FALSE.\n */\nexport default class ClockService implements Pulse {\n  /** Wave ID. */\n  public id: string = uuid()\n\n  /** User-friendly label for this wave. */\n  public name: string\n\n  /** Current signal value. */\n  public signal: number = 0\n\n  /** Last update time, in milliseconds. */\n  private lastUpdate: number\n\n  /** Interval, in milliseconds, to oscillate at. */\n  private interval: number = 0\n\n  /** Event emitter. */\n  private emitter: TinyEmitter = new TinyEmitter()\n\n  /**\n   * Constructor.\n   *\n   * @param name - user-friendly label for this wave\n   * @param interval - time, in milliseconds, to oscillate at\n   * @param signal - current signal value to initialize at\n   */\n  constructor (name: string, interval: number, signal: number) {\n    this.name = name\n    this.signal = signal\n    this.interval = interval\n    this.lastUpdate = -interval\n  }\n\n  /**\n   * Event listener.\n   *\n   * @param event - available values: `change`\n   * @param fn - callback function, taking the oscillogram data as its sole argument\n   */\n  on = (event: string, fn: (signal: number) => void) => {\n    this.emitter.on(event, fn)\n  }\n\n  /**\n   * Updates all waves with the given time elapsed.\n   *\n   * @param elapsed - time elapsed during simulation\n   */\n  public update = (elapsed: number): void => {\n    if (elapsed >= this.lastUpdate + this.interval) {\n      this.signal = this.signal === -1 ? 1 : -1\n      this.lastUpdate = elapsed\n      this.emitter.emit('change', this.signal)\n    }\n  }\n}\n","import { TinyEmitter } from 'tiny-emitter'\nimport BinaryWaveService from './BinaryWaveService'\n\n/**\n * @class OscillationService\n * @description Manages all oscillating services, including binary waves and clock pulses.\n * This service uses system time to determine proper sequencing and updating.\n */\nexport default class OscillationService {\n  /** Whether or not the oscillator is paused. */\n  public isPaused: boolean = true\n\n  /** Key-value pair of all waves. */\n  public waves: Record<string, Pulse> = {}\n\n  /** The refresh rate for the oscilloscope. */\n  public refreshRate: number = 20 // TODO: this can be configured to make the waves wider/oscilloscope run faster\n\n  /** The last time the oscillator was updated, in milliseconds. */\n  public lastUpdateTime: number = Date.now()\n\n  /** Elapsed total time, in milliseconds. */\n  public timeMsElapsed: number = 0\n\n  /** Offset wave time, in milliseconds. */\n  public timeMsOffset: number = 0\n\n  /** Event emitter. */\n  private emitter: TinyEmitter = new TinyEmitter()\n\n  /**\n   * Starts the oscillator.\n   */\n  start = () => {\n    if (!this.isPaused) return\n\n    // this is the time that has elapsed prior to the completion of a full period\n    // when the oscillator is stopped, we want to maintain the time progressed before the next period\n    const remainingPeriodTime = this.lastUpdateTime % this.refreshRate\n\n    this.lastUpdateTime = Date.now() + remainingPeriodTime\n    this.isPaused = false\n    this.tick()\n  }\n\n  /**\n   * Stops the oscillator.\n   */\n  stop = () => {\n    this.isPaused = true\n  }\n\n  /**\n   * Clears all current binary wave geometries.\n   */\n  clear = () => {\n    Object\n      .values(this.waves)\n      .forEach(wave => {\n        if (wave instanceof BinaryWaveService) {\n          (wave as BinaryWaveService).reset()\n        }\n      })\n  }\n\n  /**\n   * Computes the SVG points for each given binary wave.\n   *\n   * @param waves\n   * @returns oscillogram result\n   */\n  computeWaveGeometry = (waves: Record<string, Pulse>) => {\n    const displays: Oscillogram = {}\n    const getPoints = (segments: Point[]) => segments.map(({ x, y }) => `${x},${y}`)\n\n    for (const name in waves) {\n      if (waves[name] instanceof BinaryWaveService) {\n        const wave = waves[name] as BinaryWaveService\n        const points = getPoints(wave.segments)\n\n        displays[name] = {\n          points: points.join(' '),\n          width: wave.width,\n          hue: wave.hue\n        }\n      }\n    }\n\n    return displays\n  }\n\n  /**\n   * Event listener.\n   *\n   * @param event - available values: `change`\n   * @param fn - callback function, taking the oscillogram data as its sole argument\n   */\n  on = (event: string, fn: (oscillogram: Oscillogram) => void) => {\n    this.emitter.on(event, fn)\n  }\n\n  /**\n   * Broadcasts the oscillogram.\n   *\n   * @emits change containing the oscillogram data\n   */\n  broadcast = () => {\n    // set the max history to be twice the size of the user's screen, then cut half of it when it is exceeded\n    const screenWidth = window.screen.width\n    const widthOfOneSecond = 1000 / this.refreshRate\n    const maxHistorySeconds = screenWidth / widthOfOneSecond\n\n    if (this.timeMsElapsed >= this.timeMsOffset + ((maxHistorySeconds / 2) * 1000)) {\n      this.timeMsOffset = this.timeMsElapsed\n\n      Object\n        .values(this.waves)\n        .forEach((wave: Pulse) => {\n          if (wave instanceof BinaryWaveService) {\n            wave.truncateSegments(screenWidth)\n          }\n        })\n    }\n\n    this.emitter.emit('change', this.computeWaveGeometry(this.waves))\n  }\n\n  /**\n   * Triggers all oscillation update events.\n   */\n  tick = (): void => {\n    if (this.isPaused) return\n\n    const now = Date.now()\n    const MAX_IDLE_TIME = 10000 // 10 seconds\n    let hasUpdated = false\n\n    if (now >= this.lastUpdateTime + MAX_IDLE_TIME) {\n      // if the oscilloscope has been idle for a while, then re-start it rather than try to catch up to the current time\n      this.stop()\n      this.start()\n      return\n    }\n\n    while (now >= this.lastUpdateTime + this.refreshRate) {\n      // loop through each refresh period elapsed and simulate as if they actually elapsed\n      const delta = Math.min(this.refreshRate, now - this.lastUpdateTime)\n\n      hasUpdated = true\n      this.timeMsElapsed += delta\n      this.lastUpdateTime += delta\n      this.update()\n    }\n\n    if (hasUpdated) {\n      this.broadcast()\n    }\n\n    requestAnimationFrame(this.tick)\n  }\n\n  /**\n   * Updates all waves with the given tick count.\n   */\n  update = (): void => {\n    Object\n      .values(this.waves)\n      .forEach((wave) => wave.update(this.timeMsElapsed))\n  }\n\n  /**\n   * Adds the given wave to the oscillator instance.\n   *\n   * @param {Pulse} wave\n   */\n  add = (wave: Pulse): void => {\n    if (!this.waves.hasOwnProperty(wave.id)) {\n      this.waves[wave.id] = wave\n\n      if (this.timeMsElapsed === 0) {\n        this.broadcast()\n      }\n    }\n  }\n\n  /**\n   * Removes the wave having the given id.\n   *\n   * @param {Pulse} wave\n   */\n  remove = ({ id }: Pulse): void => {\n    delete this.waves[id]\n\n    if (Object.keys(this.waves).length === 0) {\n      this.stop()\n      this.clear()\n    }\n  }\n}\n","import { CircuitNode, Nor, InputNode, OutputNode, Buffer } from '@/circuit'\nimport ItemType from '@/types/enums/ItemType'\nimport ItemSubtype from '@/types/enums/ItemSubtype'\n\nfunction getLogicGateNode (subtype: string, id: string, inputIds: string[]): CircuitNode {\n  switch (subtype) {\n    case ItemSubtype.And:\n      return new Nor(id, inputIds)\n    default:\n      return new Nor(id, inputIds)\n  }\n}\n\nfunction getCircuitNode ({ id, type, subtype }: Item, inputIds: string[]): CircuitNode {\n  switch (type) {\n    case ItemType.CircuitNode:\n      return new CircuitNode(id, inputIds)\n    case ItemType.InputNode:\n      return new InputNode(id, inputIds)\n    case ItemType.LogicGate:\n      return getLogicGateNode(subtype, id, inputIds)\n    case ItemType.Buffer:\n    case ItemType.Freeport:\n      return new Buffer(id, inputIds)\n    default:\n      return new OutputNode(id, inputIds) // TODO: use generic CircuitNode instead?\n  }\n}\n\nexport default {\n  getLogicGateNode,\n  getCircuitNode\n}\n","import { Circuit, CircuitNode } from '@/circuit'\nimport { TinyEmitter } from 'tiny-emitter'\nimport BinaryWaveService from './BinaryWaveService'\nimport ClockService from './ClockService'\nimport OscillationService from './OscillationService'\nimport ItemType from '@/types/enums/ItemType'\nimport ItemSubtype from '@/types/enums/ItemSubtype'\nimport PortType from '@/types/enums/PortType'\nimport circuitNodeMapper from '@/utils/circuitNodeMapper'\n\n/**\n * The SimulationService ties together all aspects of a running simulation, including clock pulses, oscilloscope\n * wave management, and circuit component I/O. Effectively serves as an oracle for all circuit computations.\n *\n * It is important that the simulation maintains the state of the circuit separately from the editor state, as\n * components may be removed/added/changed in the editor by the user at any time. Maintaining them separate allows\n * the state of components present in the editor to be persisted.\n *\n * There is a one-to-one relationship between SimulationService instances and Document instances.\n */\nexport default class SimulationService {\n  /** Mapping of port IDs to their respective circuit nodes. */\n  nodes: Record<string, CircuitNode> = {}\n\n  /** Mapping of port IDs to their respective nodes' binary wave instances. */\n  waves: Record<string, BinaryWaveService> = {}\n\n  /** Mapping of port IDs to their respective nodes' clock instances. */\n  clocks: Record<string, ClockService> = {}\n\n  /** Mapping of port IDs to their respective current values. */\n  valueMap: Record<string, number> = {}\n\n  /** Logical circuit instance. */\n  circuit: Circuit = new Circuit()\n\n  /** Circuit oscillator. */\n  oscillator: OscillationService = new OscillationService()\n\n  /** Event emitter. */\n  emitter: TinyEmitter = new TinyEmitter()\n\n  /** Whether or not the simulation is paused. */\n  isPaused: boolean = true\n\n  /** Oscillogram data, containing each BinaryWave instance observed in the oscilloscope. */\n  oscillogram: Oscillogram = {}\n\n  /**\n   * Constructor.\n   *\n   * @param items\n   * @param connections\n   * @param ports\n   */\n  constructor (items: Item[], connections: Connection[], ports: Record<string, Port>) {\n    this.addElements(items, connections, ports)\n    this.oscillator.on('change', oscillogram => {\n      this.oscillogram = oscillogram\n      this.emit()\n    })\n  }\n\n  /**\n   * Adds the given items and connections with the given ports to the simulation.\n   *\n   * @param items\n   * @param connections\n   * @param ports\n   */\n  addElements = (items: Item[], connections: Connection[], ports: Record<string, Port>) => {\n    items.forEach(item => this.addNode(item, ports))\n    connections.forEach(c => this.addConnection(c.source, c.target))\n  }\n\n  /**\n   * Event listener.\n   *\n   * @param event - available values: `change`\n   * @param fn - callback function, taking the port-value mapping as the first argument and oscillogram data as the second\n   */\n  on = (event: 'change', fn: (valueMap: Record<string, number>, oscillogram: Oscillogram) => void) => {\n    this.emitter.on(event, fn)\n  }\n\n  /**\n   * Emits a change event.\n   *\n   * @emits change when the oscillogram or any value changes changes\n   */\n  emit = () => {\n    this.emitter.emit('change', this.valueMap, this.oscillogram)\n  }\n\n  /**\n   * Pauses the simulation.\n   */\n  pause = () => {\n    this.oscillator.stop()\n    this.isPaused = true\n  }\n\n  /**\n   * Continues the simulation.\n   */\n  unpause = () => {\n    this.isPaused = false\n    this.oscillator.start()\n    this.emit()\n  }\n\n  /**\n   * Advances the simulation by one step.\n   *\n   * @param [iteration = 0] - internal iteration count (should always invoke using `0` or undefined)\n   */\n  step = (iteration: number = 0) => {\n    if (this.isPaused) return\n\n    this.circuit.next()\n\n    const shouldContinue = this.circuit.queue.length > 0 // TODO: use circuit.isComplete()?\n\n    if (iteration > 10000) {\n      // TODO: configure this to detect infinite loops...\n      throw new Error('An infinite loop detected!')\n    }\n\n    if (shouldContinue) {\n      this.step(++iteration)\n    }\n\n    this.emit()\n  }\n\n  canContinue: boolean = false\n\n  nextState: string | null = null\n\n  isDebug: boolean = false\n\n  nextValueMap: Record<string, number> = {}\n\n  startDebugging = () => {\n    this.isDebug = true\n    this.pause()\n    this.computeNextState()\n  }\n\n  stopDebugging = () => {\n    this.advance()\n    this.isDebug = false\n    this.nextState = null\n    this.unpause()\n  }\n\n  advance = () => {\n    const nextValues = Object.keys(this.nextValueMap)\n\n    if (nextValues.length > 0) {\n      // at least one value change was triggered by the editor since last advance\n      nextValues.forEach(portId => this.updatePortValue(portId, this.nextValueMap[portId]))\n    } else if (this.nextState) {\n      // no inputs are pending updates, and there is a new state to advance to\n      this.valueMap = JSON.parse(this.nextState) as Record<string, number>\n    }\n\n    this.nextValueMap = {}\n    this.computeNextState()\n    this.emit()\n  }\n\n  computeNextState = () => {\n    const currentState = JSON.stringify(this.valueMap)\n\n    this.circuit.next()\n\n    const nextState = JSON.stringify(this.valueMap)\n\n    if (currentState !== nextState) {\n      this.nextState = nextState\n    } else {\n      this.nextState = null\n    }\n\n    this.canContinue = this.nextState !== null\n  }\n\n  /**\n   * Sets the output value of a given target node.\n   *\n   * @param id - ID of the port with new value\n   * @param value - new value to set\n   */\n  setOutputValue = (id: string, value: number) => {\n    this.valueMap[id] = value\n    this.emit()\n  }\n\n  updatePortValue = (portId: string, value: number) => {\n    this.nodes[portId].setValue(value)\n    this.circuit.enqueue(this.nodes[portId])\n    this.waves[portId]?.drawPulseChange(value)\n  }\n\n  enqueuePortValueChange = (portId: string, value: number) => {\n    this.nextValueMap[portId] = value\n\n    // circuit can continue only if one or more port values have changed\n    this.canContinue = Object\n      .keys(this.nextValueMap)\n      .reduce((anyValueChanged: boolean, portId) => {\n        return anyValueChanged || this.valueMap[portId] !== this.nextValueMap[portId]\n      }, false)\n\n    this.emit()\n  }\n\n  /**\n   * Sets a port's value logical value, performing all necessary simulation operations that result from such an action.\n   *\n   * This should be invoked by the document.\n   *\n   * @param portId\n   * @param value - new logical value\n   */\n  setPortValue = (portId: string, value: number) => {\n    if (this.isDebug) {\n      return this.enqueuePortValueChange(portId, value)\n    }\n\n    if (this.nodes[portId] && this.nodes[portId].value !== value) {\n      this.updatePortValue(portId, value)\n      this.step()\n    }\n  }\n\n  /**\n   * Adds an integrated circuit to the simulation.\n   *\n   * @param item - the high-level integrated circuit item\n   */\n  addIntegratedCircuit = (icItem: Item) => {\n    if (!icItem.integratedCircuit) return\n\n    const { items, connections, ports } = icItem.integratedCircuit\n\n    Object\n      .values(items)\n      .forEach(item => {\n        this.addNode(item, ports, true)\n      })\n\n    Object\n      .values(connections)\n      .forEach(c => {\n        this.addConnection(c.source, c.target)\n      })\n  }\n\n  /**\n   * Adds new a node to the simulation.\n   *\n   * @param item - item to add\n   * @param ports - port mapping to reference (if an IC, then use the ports within the document itself)\n   * @param [forceContinue] - if true, forces the circuit node to evaluate immediately\n   */\n  addNode = (item: Item, ports: Record<string, Port>, forceContinue: boolean = false) => {\n    if (item.portIds.length === 0) return // if there are no ports, then there is nothing to add\n\n    if (item.integratedCircuit) {\n      return this.addIntegratedCircuit(item)\n    }\n\n    const inputIds = item.portIds.filter(portId => ports[portId].type === PortType.Input)\n    const outputIds = item.portIds.filter(portId => ports[portId].type === PortType.Output)\n    const node = circuitNodeMapper.getCircuitNode(item, inputIds)\n\n    if (forceContinue) {\n      node.forceContinue = true\n    }\n\n    item.portIds.forEach(portId => this.addPort(portId, node))\n\n    if (item.type === ItemType.InputNode && item.subtype === ItemSubtype.Clock) {\n      this.addClock(outputIds[0])\n    }\n\n    this.circuit.addNode(node)\n\n    item.portIds.forEach(portId => {\n      const port = ports[portId]\n\n      if (port.isMonitored) {\n        this.monitorPort(portId, port.value, port.hue)\n      }\n    })\n  }\n\n  /**\n   * Removes a node and all of its ports from the simulation.\n   *\n   * @param portIds - list of IDs of ports associated with the node (at least one matching is required)\n   */\n  removeNode = (item: Item) => {\n    /** returns the port IDs of all ports that are related to the given integrated circuit */\n    const getIntegratedCircuitPortIds = (ic: Item): string[] => {\n      if (!ic.integratedCircuit) return []\n\n      return Object\n        .values(ic.integratedCircuit.items)\n        .reduce((portIds, i) => {\n          if (i.integratedCircuit) {\n            return portIds\n              .concat(getIntegratedCircuitPortIds(i))\n              .concat(i.portIds)\n          }\n          return portIds.concat(i.portIds)\n        }, [] as string[])\n    }\n\n    // remove all nodes that are referenced to port IDs of the given item\n    item\n      .portIds\n      .concat(getIntegratedCircuitPortIds(item)) // ...including IC ports\n      .forEach(portId => {\n        const node = this.nodes[portId]\n\n        if (node) {\n          this.circuit.removeNode(node)\n          this.removePort(portId)\n        }\n      })\n\n    this.emit()\n  }\n\n  /**\n   * Adds an interval clock to the circuit.\n   *\n   * @param portId\n   */\n  addClock = (portId: string) => {\n    this.clocks[portId] = new ClockService(portId, 1000, 1) // TODO: make 1000 configurable by the item\n    this.clocks[portId].on('change', (signal: number) => {\n      this.setPortValue(portId, signal)\n    })\n    this.oscillator.add(this.clocks[portId])\n  }\n\n  /**\n   * Adds a port to the simulation.\n   *\n   * @param portId - ID of the port associated with the node\n   * @param node - circuit node\n   */\n  addPort = (portId: string, node: CircuitNode) => {\n    this.nodes[portId] = node\n\n    node.on('change', (value: number) => {\n      this.setOutputValue(portId, value)\n      this.waves[portId]?.drawPulseChange(value)\n    })\n  }\n\n  /**\n   * Removes a port from the simulation and all associations of it.\n   * Associations include circuit nodes, value mappings, and any active clocks and waves.\n   *\n   * @param portId\n   */\n  removePort = (portId: string) => { // TODO: need to remove wave from oscillation\n    if (this.clocks[portId]) {\n      this.oscillator.remove(this.clocks[portId])\n    }\n\n    this.unmonitorPort(portId)\n\n    delete this.nodes[portId]\n    delete this.valueMap[portId]\n    delete this.clocks[portId]\n    delete this.waves[portId]\n  }\n\n  /**\n   * Adds a new connection between the given source and target ports.\n   * This requires that the circuit nodes for both the source and target have been added to the simulation.\n   *\n   * @param sourceId\n   * @param targetId\n   */\n  addConnection = (sourceId: string, targetId: string) => {\n    if (this.nodes[sourceId] && this.nodes[targetId]) {\n      this.circuit.addConnection(this.nodes[sourceId], this.nodes[targetId], targetId)\n    }\n  }\n\n  /**\n   * Removes a connection that exists between the given source and target ports.\n   *\n   * @param sourceId\n   * @param targetId\n   */\n  removeConnection = (sourceId: string, targetId: string) => {\n    if (this.nodes[sourceId] && this.nodes[targetId]) {\n      this.circuit.removeConnection(this.nodes[sourceId], this.nodes[targetId])\n    }\n  }\n\n  /**\n   * Begins monitoring an individual port in the oscilloscope.\n   *\n   * @param portId\n   * @param value - current port value\n   */\n  monitorPort = (portId: string, value: number, hue: number) => {\n    if (!this.waves[portId]) {\n      this.waves[portId] = new BinaryWaveService(portId, portId, value, hue)\n      this.oscillator.add(this.waves[portId])\n    }\n  }\n\n  /**\n   * Removes a port from being monitored in the oscilloscope.\n   *\n   * @param portId\n   */\n  unmonitorPort = (portId: string) => {\n    if (this.waves[portId]) {\n      this.oscillator.remove(this.waves[portId])\n      this.oscillator.broadcast()\n    }\n\n    delete this.waves[portId]\n    delete this.oscillator.waves[portId]\n    delete this.oscillogram[portId]\n  }\n}\n","import SimulationService from '@/services/SimulationService'\n\nexport interface DocumentState extends SerializableState {\n  viewport: DOMRect\n  canvas: BoundingBox\n  oscilloscopeHeight: number\n  hasLoaded: boolean\n  cachedState: string | null\n  undoStack: string[]\n  redoStack: string[]\n  snapBoundaries: BoundingBox[]\n  connectablePortIds: string[]\n  taxonomyCounts: Record<string, number>\n  zoomLevel: number\n  simulation: SimulationService\n  oscillogram: Oscillogram\n  isOscilloscopeOpen: boolean\n  isCircuitEvaluated: boolean\n  isDebugging: boolean\n  isDirty: boolean\n  isToolboxOpen: boolean\n  activeFreeportId: string | null\n  selectedItemIds: string[]\n  selectedConnectionIds: string[]\n  selectedPortIndex: number\n  zIndex: number\n  activePortId: string | null\n  connectionPreviewId: string | null\n  isPrinting: boolean\n  isCreatingImage: boolean\n}\n\nexport const state = (): DocumentState => ({\n  undoStack: [],\n  redoStack: [],\n  simulation: new SimulationService([], [], {}),\n  oscillogram: {},\n  taxonomyCounts: {},\n  zoomLevel: 1,\n  zIndex: 1,\n  oscilloscopeHeight: 200,\n  isOscilloscopeOpen: false,\n  isCircuitEvaluated: false,\n  isDebugging: false,\n  isDirty: false,\n  hasLoaded: false,\n  isPrinting: false,\n  isCreatingImage: false,\n  isToolboxOpen: false,\n\n  /* canvas dimensions */\n  viewport: new DOMRect(),\n  canvas: {\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0\n  },\n\n  /* the following variables are 'temporary' information */\n  snapBoundaries: [],\n  connectablePortIds: [],\n  selectedConnectionIds: [],\n  selectedItemIds: [],\n  selectedPortIndex: -1,\n  cachedState: null,\n  activeFreeportId: null,\n  activePortId: null,\n  connectionPreviewId: null,\n\n  /* serializable state items */\n  items: {},\n  connections: {},\n  ports: {},\n  groups: {}\n})\n","import cloneDeep from 'lodash.clonedeep'\nimport { v4 as uuid } from 'uuid'\n\ntype IdMap = Record<string, string>\n\nfunction mapStandardCircuitIds (circuit: SerializableState, idMap: IdMap = {}) {\n\n  let { items, connections, ports, groups } = cloneDeep(circuit)\n\n  function mapGroups (groups: Record<string, Group>) {\n    Object\n      .values(groups)\n      .forEach(group => {\n        const oldId = group.id\n        const newId = uuid()\n\n        idMap[oldId] = newId\n        groups[newId] = cloneDeep(group)\n\n        delete groups[oldId]\n      })\n\n    return groups\n  }\n\n  function mapGroupIds (connections: Record<string, Connection>, items: Record<string, Item>) {\n    Object\n      .values(connections)\n      .forEach(connection => {\n        connection.groupId = connection.groupId !== null\n          ? idMap[connection.groupId]\n          : null\n      })\n\n    Object\n      .values(items)\n      .forEach(item => {\n        item.groupId = item.groupId !== null\n          ? idMap[item.groupId]\n          : null\n      })\n\n    return { connections, items }\n  }\n\n  function mapConnections (connections: Record<string, Connection>) {\n    Object\n      .values(connections)\n      .forEach(connection => {\n        const oldId = connection.id\n        const newId = uuid()\n\n        idMap[oldId] = newId\n        connections[newId] = cloneDeep<Connection>(connection)\n        connections[newId].id = newId\n        connections[newId].source = idMap[connections[newId].source]\n        connections[newId].target = idMap[connections[newId].target]\n\n        delete connections[oldId]\n      })\n\n      return connections\n  }\n\n  function mapConnectionChainIds (connections: Record<string, Connection>) {\n    Object\n      .values(connections)\n      .forEach(connection => {\n        connections[connection.id].connectionChainId = idMap[connections[connection.id].connectionChainId]\n      })\n\n    return connections\n  }\n\n  function mapItems (items: Record<string, Item>) {\n    Object\n      .values(items)\n      .forEach(item => {\n        const oldId = item.id\n        const newId = uuid()\n\n        idMap[oldId] = newId\n        items[newId] = cloneDeep<Item>(item)\n\n        if (item.integratedCircuit) {\n          items[newId].integratedCircuit = {\n            serializedState: item.integratedCircuit.serializedState,\n            ...mapStandardCircuitIds(cloneDeep(item.integratedCircuit), idMap)\n          }\n        } else {\n          items[newId].id = newId\n        }\n\n        items[newId].portIds = item.portIds.map(oldId => idMap[oldId])\n\n        delete items[oldId]\n      })\n\n      return items\n  }\n\n  function mapItemIds (ports: Record<string, Port>) {\n    Object\n      .values(ports)\n      .forEach(port => {\n        ports[port.id].elementId = idMap[port.elementId]\n      })\n\n    return ports\n  }\n\n  function mapPorts (ports: Record<string, Port>) {\n    Object\n      .values(ports)\n      .forEach(port => {\n        const oldId = port.id\n        const newId = uuid()\n\n        idMap[oldId] = newId\n        ports[newId] = cloneDeep<Port>(port)\n        ports[newId].id = newId\n\n        delete ports[oldId]\n      })\n\n    return ports\n  }\n\n  ports = mapPorts(ports)\n  items = mapItems(items)\n  ports = mapItemIds(ports)\n  connections = mapConnections(connections)\n  connections = mapConnectionChainIds(connections)\n  groups = mapGroups(groups)\n\n  return {\n    ...mapGroupIds(connections, items),\n    ports,\n    groups\n  }\n}\n\nfunction mapIntegratedCircuitIds (item: Item) {\n  if (!item.integratedCircuit) return item\n\n  const { items } = mapStandardCircuitIds({\n    items: {\n      [item.id]: item\n    },\n    connections: {},\n    ports: {},\n    groups: {}\n  })\n\n  return Object.values(items)[0]\n}\n\nexport default {\n  mapStandardCircuitIds,\n  mapIntegratedCircuitIds\n}\n","import { DocumentStoreInstance } from '..'\nimport idMapper from '@/utils/idMapper'\n\nexport function cut (this: DocumentStoreInstance) {\n  this.copy()\n  this.deleteSelection()\n}\n\nexport function copy (this: DocumentStoreInstance) {\n  if (!this.hasSelection) return\n\n  const items: Record<string, Item> = {}\n  const ports: Record<string, Port> = {}\n\n  this.selectedItemIds.forEach(id => {\n    items[id] = this.items[id]\n    items[id].portIds.forEach(portId => {\n      ports[portId] = this.ports[portId]\n    })\n  })\n\n  const connections = Object\n    .values(this.connections)\n    .reduce((map, connection) => {\n      if (ports[connection.source] && ports[connection.target]) {\n        map[connection.id] = connection\n      }\n\n      return map\n    }, {} as Record<string, Connection>)\n\n  const groups = Object\n    .values(this.groups)\n    .filter(({ isSelected }) => isSelected)\n    .reduce((map, group) => ({ ...map, [group.id]: group }), {})\n\n  const clipboardData: ClipboardData = {\n    items,\n    ports,\n    connections,\n    groups,\n    pasteCount: 1\n  }\n\n  window.api.copy(JSON.stringify(clipboardData))\n}\n\nexport function paste (this: DocumentStoreInstance) {\n  try {\n    const state = window.api.paste()\n    const parsed = JSON.parse(state as string) as ClipboardData\n    const mapped = idMapper.mapStandardCircuitIds(parsed) as ClipboardData\n\n    this.commitState()\n    this.deselectAll()\n\n    Object\n      .keys(mapped.ports)\n      .forEach(portId => {\n        mapped.ports[portId].value = 0\n      })\n\n    Object\n      .values(mapped.items)\n      .forEach(item => {\n        item.position.x += 20 * parsed.pasteCount\n        item.position.y += 20 * parsed.pasteCount\n        item.isSelected = false\n\n        this.addItem({\n          item,\n          ports: mapped.ports\n        })\n        this.setSelectionState({ id: item.id, value: true })\n      })\n\n    Object\n      .values(mapped.connections)\n      .forEach(connection => this.connect(connection))\n\n    Object\n      .values(mapped.groups)\n      .forEach(group => {\n        this.groups[group.id] = group\n\n        this.setGroupBoundingBox(group.id)\n        this.setSelectionState({ id: group.id, value: true })\n      })\n\n    const clipboardData: ClipboardData = {\n      ...JSON.parse(state),\n      pasteCount: parsed.pasteCount + 1\n    }\n\n    window.api.copy(JSON.stringify(clipboardData))\n  } catch (error) {\n    console.log('ERROR: ', error)\n    // TODO: clear clipboard?\n  }\n}\n","import PortType from '@/types/enums/PortType'\nimport { v4 as uuid } from 'uuid'\nimport { DocumentStoreInstance } from '..'\n\n/**\n * Establishes a 'preview' of a connection (i.e., not saved in the current document this).\n * This is so that the user can press a keyboard shortcut to quickly navigate/preview possible connections.\n *\n * @param portId - the ID of the port previewing connections for\n */\nexport function setConnectionPreview (this: DocumentStoreInstance, portId: string | null) {\n  if (this.activePortId && portId) {\n    let source = this.activePortId\n    let target = portId\n\n    if (this.ports[this.activePortId].type === PortType.Input) {\n      source = portId\n      target = this.activePortId\n    }\n\n    const id = uuid()\n\n    this.unsetConnectionPreview()\n    this.connect({ source, target, id })\n    this.connectionPreviewId = id\n  }\n}\n\n/**\n * Clears the active connection preview.\n */\nexport function unsetConnectionPreview (this: DocumentStoreInstance) {\n  if (this.connectionPreviewId) {\n    this.disconnect(this.connections[this.connectionPreviewId])\n  }\n  this.connectionPreviewId = null\n}\n\n/**\n * Commits the previewed connection action as an undo-able state.\n */\nexport function commitPreviewedConnection (this: DocumentStoreInstance) {\n  if (this.connectionPreviewId) {\n    const { source, target } = this.connections[this.connectionPreviewId]\n\n    this.disconnect({ source, target })\n    this.commitState()\n    this.connect({ source, target })\n    this.connectionPreviewId = null\n  }\n}\n\n/**\n * Establishes a 'preview' of a connection (i.e., not saved in the current document this).\n * This is so that the user can press a keyboard shortcut to quickly navigate/preview possible connections.\n *\n * @param portId - the ID of the port previewing connections for\n */\nexport function cycleConnectionPreviews (this: DocumentStoreInstance, portId: string) {\n  if (portId && portId !== this.activePortId) {\n    this.setActivePortId(portId)\n  }\n\n  let index = this.selectedPortIndex + 1\n\n  if (index <= 0) index = 0\n  if (index >= this.connectablePortIds.length) index = -1\n\n  const previewPortId = this.connectablePortIds[index]\n\n  if (previewPortId && !this.ports[portId]?.connectedPortIds.includes(previewPortId)) {\n    this.setConnectionPreview(previewPortId)\n  } else {\n    if (this.connectablePortIds.length === 0) {\n      window.api.beep() // audibly inform the user they can't connect to anything\n    }\n    this.unsetConnectionPreview()\n  }\n  this.selectedPortIndex = index\n}\n\n/**\n * Establishes a new connection between two ports.\n *\n * @param payload\n * @param payload.source - source port ID\n * @param payload.target - target port ID\n * @param payload.connectionChainId - optional connection chain ID to add the connection segment to\n */\nexport function createConnection (this: DocumentStoreInstance, data: { source: string, target: string, id?: string, connectionChainId?: string }) {\n  const id = data.id || uuid()\n\n  this.connections[id] = {\n    ...data,\n    id,\n    connectionChainId: data.connectionChainId || id,\n    groupId: null,\n    zIndex: ++this.zIndex,\n    isSelected: false\n  }\n\n  this.ports[data.source].connectedPortIds.push(data.target)\n  this.ports[data.target].connectedPortIds.push(data.source)\n}\n\nexport function connect (this: DocumentStoreInstance, data: { source: string, target: string, id?: string, connectionChainId?: string }) {\n  this.createConnection(data)\n\n  this\n    .simulation\n    .addConnection(data.source, data.target)\n\n  this.simulation.circuit.next()\n}\n\n/**\n * Disconnects two ports.\n *\n * @param payload\n * @param payload.source - source port ID\n * @param payload.target - target port ID\n */\nexport function destroyConnection (this: DocumentStoreInstance, { source, target }: { source: string, target: string }) {\n  const connection = Object\n    .values(this.connections)\n    .find(c => c.source === source && c.target === target)\n\n  if (connection) {\n    const sourceIndex = this.ports[source].connectedPortIds.findIndex(id => id === target)\n    const targetIndex = this.ports[target].connectedPortIds.findIndex(id => id === source)\n\n    this.ports[source].connectedPortIds.splice(sourceIndex, 1)\n    this.ports[target].connectedPortIds.splice(targetIndex, 1)\n\n    delete this.connections[connection.id]\n  }\n}\n\nexport function disconnect (this: DocumentStoreInstance, { source, target }: { source: string, target: string }) {\n  this\n    .simulation\n    .removeConnection(source, target)\n\n  this.simulation.circuit.next()\n\n  this.destroyConnection({ source, target })\n}\n","import { DocumentStoreInstance } from '..'\n\nexport function loadDocument (this: DocumentStoreInstance, document: string) {\n  this.applyState(document)\n  this.resetCircuit()\n}\n\nexport function clearStatelessInfo (this: DocumentStoreInstance) {\n  this.unsetConnectionPreview()\n  this.connectablePortIds = []\n  this.selectedConnectionIds = []\n  this.selectedItemIds = []\n  this.selectedPortIndex = -1\n  this.cachedState = null\n  this.activePortId = null\n  this.connectionPreviewId = null\n}\n\nexport function print (this: DocumentStoreInstance) {\n  this.isPrinting = true\n}\n\nexport function createImage (this: DocumentStoreInstance) {\n  this.isCreatingImage = true\n}\n\nexport function toggleToolbox (this: DocumentStoreInstance) {\n  this.isToolboxOpen = !this.isToolboxOpen\n}\n","import ItemType from '@/types/enums/ItemType'\n\nexport default function itemFactory (id: string, type: ItemType, subtype: string, width: number, height: number, ports: Port[] = []): Item {\n  return {\n    id,\n    name: '',\n    type,\n    subtype,\n    portIds: ports.map(({ id }) => id),\n    groupId: null,\n    rotation: 0,\n    boundingBox: {\n      top: 0,\n      left: 0,\n      right: width,\n      bottom: height\n    },\n    position: {\n      x: 0,\n      y: 0\n    },\n    zIndex: 0,\n    width,\n    height,\n    isSelected: false,\n    properties: {}\n  }\n}\n","import Direction from '@/types/enums/Direction'\nimport PortType from '@/types/enums/PortType'\n\nexport default function portFactory (elementId: string, id: string, orientation: Direction, type: PortType, name: string): Port {\n  return {\n    id,\n    orientation,\n    name,\n    position: {\n      x: 0,\n      y: 0\n    },\n    type,\n    rotation: 0,\n    elementId,\n    value: 0,\n    hue: 0,\n    isMonitored: false,\n    isFreeport: false,\n    connectedPortIds: []\n  }\n}\n","import boundaries from '../geometry/boundaries'\nimport { DocumentStoreInstance } from '..'\nimport itemFactory from '@/factories/itemFactory'\nimport portFactory from '@/factories/portFactory'\nimport Direction from '@/types/enums/Direction'\nimport ItemType from '@/types/enums/ItemType'\nimport ItemSubtype from '@/types/enums/ItemSubtype'\nimport PortType from '@/types/enums/PortType'\n\n/**\n * Adds a new freeport element. This can be used in either of two scenarios:\n *\n *  1. when a user is dragging a port to establish a connection to another port\n *  2. when a user drags on a connection to create a new \"pivot point\" on the wire\n *\n * @param payload\n * @param payload.itemId - desired ID for the new freeport\n * @param payload.inputPortId - the ID of the input port (omit for a wire drag from an output port)\n * @param payload.outputPortId - the ID of the output port (omit for a wire drag from an input port)\n * @param payload.position - the initial position of this port\n * @param payload.value - optional value of the port\n */\nexport function addFreeportItem (this: DocumentStoreInstance, { itemId, inputPortId, outputPortId, value = 0 }: {\n  itemId: string\n  outputPortId?: string\n  inputPortId?: string\n  value?: number\n}) {\n  const ports: Port[] = []\n\n  if (outputPortId) {\n    this.ports[outputPortId] = portFactory(itemId, outputPortId, Direction.Left, PortType.Output, outputPortId)\n    this.ports[outputPortId].value = value\n    this.ports[outputPortId].isFreeport = true\n    ports.push(this.ports[outputPortId])\n  }\n\n  if (inputPortId) {\n    this.ports[inputPortId] = portFactory(itemId, inputPortId, Direction.Right, PortType.Input, inputPortId)\n    this.ports[inputPortId].value = value\n    this.ports[inputPortId].isFreeport = true\n    ports.push(this.ports[inputPortId])\n  }\n\n  this.items[itemId] = itemFactory(itemId, ItemType.Freeport, ItemSubtype.None, 1, 1, ports)\n  this.items[itemId].zIndex = this.zIndex++\n\n  this\n    .simulation\n    .addNode(this.items[itemId], this.ports, true)\n}\n\n/**\n * Removes a Freeport from the document.\n * This can remove either a dragged freeport or a connector between two wire segments.\n *\n * @param id - ID of the freeport item\n */\nexport function removeFreeport (this: DocumentStoreInstance, id: string) {\n  const item = this.items[id]\n\n  let originalSourceId = ''\n  let originalTargetId = ''\n\n  // find the true source and target port ids\n  Object\n    .values(this.connections)\n    .forEach(c => {\n      if (c.target === item.portIds[0]) originalSourceId = c.source\n      if (c.source === item.portIds[1]) originalTargetId = c.target\n    })\n\n  if (originalSourceId) this.disconnect({ source: originalSourceId, target: item.portIds[0] })\n  if (originalTargetId) this.disconnect({ source: item.portIds[1], target: originalTargetId })\n  if (originalSourceId && originalTargetId) {\n    // reconnect the true source and target\n    this.connect({ source: originalSourceId, target: originalTargetId })\n  }\n\n  // finally, remove the element\n  this.removeElement(id)\n}\n\n/**\n * Creates a new freeport item with the given set of IDs in the payload.\n * This can either be a dragged port (to connect a port) or a joint between two connection segments.\n *\n * For a joint, include all required params, including the IDs of the destination ports and the freeport ports.\n * For a dragged port, include the source IDs (if dragged from an output) or the target IDs (if dragged from an input).\n *\n * @param data - IDs for apply the new freeport\n */\nexport function createFreeport (this: DocumentStoreInstance, data: Freeport, createCircuitConnection: boolean = true) {\n  if (this.items[data.itemId]) return\n\n  if (data.sourceId && data.targetId) {\n    this.commitState()\n  }\n\n  this.deselectAll()\n  this.addFreeportItem(data)\n  this.setItemBoundingBox(data.itemId)\n  this.activeFreeportId = data.itemId\n\n  let connections: { source: string, target: string }[] = []\n\n  if (data.sourceId && data.inputPortId) {\n    connections.push({\n      source: data.sourceId,\n      target: data.inputPortId\n    })\n  }\n\n  if (data.targetId && data.outputPortId) {\n    connections.push({\n      source: data.outputPortId,\n      target: data.targetId\n    })\n  }\n\n  connections.forEach(connection => {\n    this.createConnection({\n      ...connection,\n      connectionChainId: data.connectionChainId\n    })\n\n    if (createCircuitConnection) {\n      this\n        .simulation\n        .addConnection(connection.source, connection.target)\n    }\n  })\n\n  if (data.sourceId && data.targetId) {\n    // only remove the circuit connection (not the store connection), as its component may still be in action (i.e., handling dragging)\n    // once the dragging operation is complete, it will be the responsibility of the connection component to destroy itself\n    this\n      .simulation\n      .removeConnection(data.sourceId, data.targetId)\n  }\n\n  if (data.sourceId && data.targetId) {\n    // bring forward the freeport item so that it is between the two new connections\n    this.deselectAll()\n    this.setSelectionState({\n      id: data.itemId,\n      value: true\n    })\n    this.incrementZIndex(1)\n  }\n\n  this.simulation.circuit.next()\n}\n\n/**\n * Establishes a connection after a user drags a port to connect it to an item.\n * This will disconnect the temporary wire and port being dragged, and establish a new connection between the two items.\n *\n * @param payload\n * @param payload.sourceId - the ID of the source port (if being dragged from one)\n * @param payload.targetId - the ID of the target port (if being dragged from one)\n * @param payload.portId - the ID of the temporary freeport being dragged\n */\nexport function connectFreeport (this: DocumentStoreInstance, { sourceId, targetId, portId }: { sourceId?: string, targetId?: string, portId: string }) {\n  const port = this.ports[portId]\n  const newPort = Object\n    .values(this.ports)\n    .find((p: Port) => {\n      // TODO: make '10' a user-configurable number\n      return p.id !== portId && this.connectablePortIds.includes(p.id) && boundaries.isInNeighborhood(p.position, port.position, 10)\n    })\n\n  if (newPort) {\n    if (sourceId) {\n      this.disconnect({\n        source: sourceId,\n        target: portId\n      })\n      this.connect({\n        source: sourceId,\n        target: newPort.id\n      })\n    } else if (targetId) {\n      this.disconnect({\n        source: portId,\n        target: targetId\n      })\n      this.connect({\n        source: newPort.id,\n        target: targetId\n      })\n    }\n  } else {\n    // no port can be connected, so disconnect the temporary dragged wire\n    this.disconnect({\n      source: sourceId || portId,\n      target: targetId || portId\n    })\n  }\n\n  const item = Object\n    .values(this.items)\n    .find(({ portIds }) => portIds.includes(portId))\n\n  if (item) {\n    this.removeElement(item.id)\n  }\n\n  this.clearStatelessInfo()\n}\n","import { DocumentStoreInstance } from '..'\nimport { v4 as uuid } from 'uuid'\n\n/**\n * Groups together all selected items and connections.\n * If any of those selected elements are a member of a group, that group will be destroyed.\n */\nexport function group (this: DocumentStoreInstance) {\n  this.commitState()\n\n  const id = uuid()\n  const items = Object\n    .values(this.items)\n    .filter(({ isSelected }) => isSelected)\n\n  const portIds = items.reduce((portIds, item) => {\n    return portIds.concat(item.portIds)\n  }, [] as string[])\n\n  const connections = Object\n    .values(this.connections)\n    .filter(c => {\n      // ensure both source and target ports are associated with items in the group\n      return portIds.includes(c.source) && portIds.includes(c.target) && c.isSelected\n    })\n\n  // if any of the items or connections are part of another group, ungroup those\n  items.forEach(i => i.groupId && this.destroyGroup(i.groupId))\n  connections.forEach(i => i.groupId && this.destroyGroup(i.groupId))\n\n  // update the zIndex of all items to be the highest one among the selected\n  const zIndex = [...items, ...connections].reduce((zIndex: number, item: BaseItem) => {\n    return Math.max(item.zIndex, zIndex)\n  }, 0)\n\n  const group = {\n    id,\n    itemIds: items.map(({ id }) => id),\n    connectionIds: connections.map(({ id }) => id),\n    isSelected: true,\n    boundingBox: {\n      left: 0,\n      top: 0,\n      right: 0,\n      bottom: 0\n    },\n    position: {\n      x: 0, y: 0\n    },\n    zIndex\n  }\n\n  this.groups[id] = group\n\n  // set the groupId of all items in the group\n  group.itemIds.forEach(id => {\n    this.items[id].groupId = group.id\n  })\n\n  // set the groupId of all connections in the group\n  group.connectionIds.forEach(id => {\n    this.connections[id].groupId = group.id\n  })\n\n  this.setZIndex(zIndex)\n  this.setGroupBoundingBox(id)\n}\n\n/**\n * Destroys all selected groups.\n */\n export function ungroup (this: DocumentStoreInstance) {\n  this.commitState()\n\n  for (const id in this.groups) {\n    if (this.groups[id].isSelected) {\n      this.destroyGroup(id)\n    }\n  }\n}\n\n/**\n * Destroys the group having the given ID.\n *\n * @param groupId\n */\nexport function destroyGroup (this: DocumentStoreInstance, groupId: string) {\n  const group = this.groups[groupId]\n\n  // remove the groupId of all items in the group and select them\n  group.itemIds.forEach(id => {\n    this.items[id].groupId = null\n    this.selectedItemIds.push(id)\n  })\n\n  // remove the groupId of all connections in the group and select them\n  group.connectionIds.forEach(id => {\n    this.connections[id].groupId = null\n    this.selectedConnectionIds.push(id)\n  })\n\n  delete this.groups[groupId]\n}\n","export default function fromDocumentToEditorCoordinates (canvas: BoundingBox, viewport: DOMRect, point: Point, z: number) {\n  return {\n    x: (point.x - viewport.x - canvas.left) / z,\n    y: (point.y - viewport.y - canvas.top) / z\n  }\n}\n","import { v4 as uuid } from 'uuid'\nimport { DocumentStoreInstance } from '..'\nimport boundaries from '../geometry/boundaries'\nimport PortType from '@/types/enums/PortType'\nimport Direction from '@/types/enums/Direction'\nimport ItemSubtype from '@/types/enums/ItemSubtype'\nimport fromDocumentToEditorCoordinates from '@/utils/fromDocumentToEditorCoordinates'\n\nfunction generateItemName (item: Item, taxonomyCount: number) {\n  const name: string[] = [item.type]\n\n  if (item.subtype !== ItemSubtype.None) {\n    name.push(item.subtype)\n  }\n\n  name.push(taxonomyCount.toString())\n\n  return name.join(' ')\n}\n\n/**\n * Adds any non-IC component to the this.\n *\n * @param payload\n * @param payload.item - new item to add\n * @param payload.ports - mapping of IDs-to-ports, containing a subset of ports belonging to the new item\n */\nexport function addItem (this: DocumentStoreInstance, { item, ports }: { item: Item, ports: Record<string, Port> }) {\n  // add all ports associated to this item\n  // if the item is an integrated circuit, only add the ports that it defines (ones visible to the user)\n  const portList = item.integratedCircuit?.ports || ports\n\n  item\n    .portIds\n    .forEach(portId => {\n      const port = portList[portId]\n\n      if (port) {\n        this.ports[port.id] = port\n\n        if (port.isMonitored) {\n          this.monitorPort(port.id)\n        }\n      }\n    })\n\n  const taxonomy = `${item.type}_${item.subtype}`\n\n  if (!this.taxonomyCounts[taxonomy]) {\n    this.taxonomyCounts[taxonomy] = 0\n  }\n\n  item.name = generateItemName(item, ++this.taxonomyCounts[taxonomy])\n\n  // add the item to the document and create its corresponding circuit node\n  this.items[item.id] = item\n  this.items[item.id].zIndex = ++this.zIndex\n\n  this\n    .simulation\n    .addNode(item, this.ports)\n\n  this.resetItemValue(item)\n}\n\nexport function insertItemAtPosition (this: DocumentStoreInstance, { item, ports }: { item: Item, ports: Port[] }, documentPosition: Point | null = null) {\n  if (!documentPosition) {\n    documentPosition = boundaries.getBoundingBoxMidpoint(this.viewport)\n  }\n\n  const position = fromDocumentToEditorCoordinates(this.canvas, this.viewport, documentPosition, this.zoomLevel)\n\n  position.x -= item.width / 2\n  position.y -= item.height / 2\n\n  item.position = position\n\n  this.commitState()\n  this.addItem({\n    item,\n    ports: ports.reduce((map: Record<string, Port>, port) => ({ ...map, [port.id]: port }), {})\n  })\n  this.setItemBoundingBox(item.id)\n  this.setItemPortPositions(item.id)\n  this.setSelectionState({ id: item.id, value: true })\n}\n\nexport function resetItemValue (this: DocumentStoreInstance, item: Item) {\n  const property = item.properties?.startValue\n\n  if (!property) return\n\n  const value = property.value as number\n\n  item.portIds.forEach(id => this.setPortValue({ id, value }))\n}\n\n/**\n * Removes an element and all its associated ports and circuit nodes from the state.\n *\n * @param id - ID of the item to remove\n */\nexport function removeElement (this: DocumentStoreInstance, id: string) {\n  const item = this.items[id]\n\n  this\n    .simulation\n    .removeNode(item)\n\n  // remove all ports associated with the item\n  item.portIds.forEach(portId => this.removePort(portId))\n\n  // remove the item\n  delete this.items[id]\n}\n\n/**\n * Sets the number of input ports that a LogicGate should have.\n * If the number is less than the current number of ports, take away the difference number of existing ports.\n *\n * @param payload\n * @param payload.id - LogicGate ID\n * @param payload.count - new number of input ports\n */\n export function setInputCount (this: DocumentStoreInstance, { id, count }: { id: string, count: number }) {\n  const item = this.items[id]\n  const oldCount = item.properties.inputCount.value as number\n\n  if (oldCount > count) {\n    // if the count has decreased, find the last remaining port IDs which will be removed\n    this.items[id].portIds\n      .filter(portId => this.ports[portId].type === PortType.Input)\n      .slice(count)\n      .forEach(portId => this.removePort(portId))\n  } else {\n    for (let i = oldCount; i < count; i++) {\n      const portId = uuid()\n\n      // add the difference of ports one by one\n      this.addPort(id, {\n        id: portId,\n        name: '', // TODO\n        connectedPortIds: [],\n        type: PortType.Input,\n        elementId: id,\n        virtualElementId: id,\n        orientation: Direction.Left,\n        isFreeport: false,\n        isMonitored: false,\n        hue: 0,\n        position: {\n          x: 0,\n          y: 0\n        },\n        rotation: 0,\n        value: 0\n      })\n    }\n  }\n}\n\n/**\n * Updates the properties values. If no properties have changed, then no changes will take effect.\n * This will perform any actions necessary to occur when a property value changes.\n *\n * @param payload\n * @param payload.id - item ID\n * @param payload.properties - new version of the properties\n */\nexport function setProperties (this: DocumentStoreInstance, { id, properties }: { id: string, properties: PropertySet }) {\n  const item = this.items[id]\n\n  for (const propertyName in properties) {\n    const property = properties[propertyName]\n\n    if (item.properties[propertyName].value === property.value) {\n      continue // do nothing if the property value has not changed\n    }\n\n    switch (propertyName) {\n      case 'inputCount':\n        this.setInputCount({ id, count: property.value as number })\n        break\n    }\n\n    this.items[id].properties[propertyName].value = property.value\n  }\n}\n","import { DocumentStoreInstance } from '..'\nimport boundaries from '../geometry/boundaries'\n\n/**\n * Pans to the given point.\n */\nexport function panTo (this: DocumentStoreInstance, pan: Point) {\n  const deltaX = pan.x - this.canvas.left\n  const deltaY = pan.y - this.canvas.top\n\n  this.canvas.left += deltaX\n  this.canvas.right += deltaX\n  this.canvas.top += deltaY\n  this.canvas.bottom += deltaY\n}\n\n/**\n * Pans to the center of the available canvas, such that its center is visible in the center of the viewport.\n */\nexport function panToCenter (this: DocumentStoreInstance) {\n  const midpoint = boundaries.getBoundingBoxMidpoint(this.canvas)\n\n  this.panTo({\n    x: (this.viewport.width / 2) - midpoint.x,\n    y: (this.viewport.height / 2) - midpoint.y\n  })\n}\n","/**\n * Returns all connections and any associated freeport items within a connection chain.\n *\n * @param connections - list of all connections to explore\n * @param portMap - ID-to-port mapping of the entire document\n * @param connectionChainId - ID of the connection chain to explore\n * @returns the IDs of the connections and the freeports discovered in the chain\n */\nexport default function getConnectionChain (connections: Connection[], portMap: Record<string, Port>, connectionChainId: string) {\n  const { connectionIds, freeportIds } = Object\n    .values(connections)\n    .reduce(({ connectionIds, freeportIds }, connection) => {\n      if (connectionChainId === connection.connectionChainId) {\n        const sourcePort = portMap[connection.source]\n        const targetPort = portMap[connection.target]\n\n        connectionIds.add(connection.id)\n\n        if (sourcePort?.isFreeport) freeportIds.add(sourcePort.elementId)\n        if (targetPort?.isFreeport) freeportIds.add(targetPort.elementId)\n      }\n\n      return { connectionIds, freeportIds }\n    }, {\n      connectionIds: new Set<string>(),\n      freeportIds: new Set<string>()\n    })\n\n  return {\n    connectionIds: Array.from(connectionIds),\n    freeportIds: Array.from(freeportIds)\n  }\n}\n","import { CircuitNode } from '@/circuit'\nimport { DocumentStoreInstance } from '..'\nimport getConnectionChain from '@/utils/getConnectionChain'\nimport PortType from '@/types/enums/PortType'\n\nexport function addPort (this: DocumentStoreInstance, itemId: string, port: Port) {\n  const node = Object\n    .values(this.simulation.nodes)\n    .find(({ name }) => this.items[itemId].portIds.includes(name))\n\n  this.ports[port.id] = port\n  this.items[itemId].portIds.push(port.id)\n\n  if (node) {\n    this.simulation.addPort(port.id, node as CircuitNode)\n  } else {\n    this.simulation.addNode(this.items[itemId], this.ports)\n  }\n}\n\n/**\n * Removes a port from the state.\n * This will destroy the entire connection chain that it is a part of (if any).\n *\n * @param portId - ID of the port to destroy\n */\nexport function removePort (this: DocumentStoreInstance, portId: string) {\n  // remove all connections associated with this port\n  Object\n    .values(this.connections)\n    .filter(({ source, target }) => source === portId || target === portId)\n    .forEach(c => {\n      // find all segments and freeports of this connection and remove them\n      const {\n        connectionIds,\n        freeportIds\n      } = getConnectionChain(Object.values(this.connections), this.ports, c.connectionChainId)\n\n      connectionIds.forEach(id => {\n        // delete all connections associated with the chain\n        const { source, target } = this.connections[id]\n\n        this\n          .simulation\n          .removeConnection(source, target)\n\n        delete this.connections[id]\n      })\n\n      freeportIds.forEach(id => {\n        // delete all freeports associated with the chain\n        this.items[id].portIds.forEach(portId => {\n          delete this.ports[portId]\n          this.simulation.removePort(portId)\n        })\n\n        delete this.items[id]\n      })\n    })\n\n  const port = this.ports[portId]\n\n  if (port) {\n    const item = this.items[port.elementId]\n\n    if (!item) return\n\n    // remove the reference to the port from the element\n    const portIndex = item.portIds.findIndex(i => i === portId)\n\n    if (portIndex !== -1) {\n      this.items[item.id].portIds.splice(portIndex, 1)\n    }\n\n    delete this.ports[portId]\n    this.simulation.removePort(portId)\n  }\n}\n\n/**\n * Sets the ID of the active (i.e., 'previewed'/'enlarged') port.\n *\n * @param portId - ID of the port to activate, or null to remove it\n */\nexport function setActivePortId (this: DocumentStoreInstance, portId: string | null) {\n  if (this.activePortId !== portId) {\n    if (portId) {\n      this.setConnectablePortIds({ portId })\n    } else {\n      this.connectablePortIds = []\n    }\n\n    this.activePortId = portId\n    this.selectedPortIndex = -1\n  }\n}\n\n/**\n * Sets the list of connectable port IDs.\n * This should be invoked whenever a user starts dragging a port.\n *\n * @param portId - the ID of the port being dragged\n */\nexport function setConnectablePortIds (this: DocumentStoreInstance, { portId, isDragging }: { portId: string, isDragging?: boolean }) {\n  const port = this.ports[portId]\n\n  if (port.isFreeport) return // freeports cannot connect to anything\n\n  // generate a list of all port IDs that have at least one connection to/from it\n  const connectedPortIds = Object\n    .values(this.connections)\n    .reduce((portIds: string[], connection: Connection) => {\n      return portIds.concat([connection.source, connection.target])\n    }, [])\n\n  if (isDragging) {\n    // if this port is being dragged, then the user intends to establish a new connection with it\n    // remove the last two ports (the two ports on opposite ends of the \"preview\" connection)\n    connectedPortIds.splice(-2)\n  }\n\n  const filter = port.type === PortType.Output\n    ? (p: Port) => p.type === PortType.Input && !p.isFreeport && !connectedPortIds.includes(p.id) && p.elementId !== port.elementId\n    : (p: Port) => p.type === PortType.Output && !p.isFreeport && !connectedPortIds.includes(port.id) && p.elementId !== port.elementId\n\n  this.connectablePortIds = Object\n    .values(this.ports)\n    .filter(filter)\n    .map(({ id }) => id)\n}\n\n/**\n * Sets the value of the port in the circuit.\n *\n * @param payload.id - ID of the port\n * @param payload.value - new port value\n */\nexport function setPortValue (this: DocumentStoreInstance, { id, value }: { id: string, value: number }) {\n  this\n    .simulation\n    .setPortValue(id, value)\n}\n\nexport function togglePortMonitoring (this: DocumentStoreInstance, portId: string) {\n  if (this.ports[portId].isMonitored) {\n    this.unmonitorPort(portId)\n  } else {\n    this.monitorPort(portId)\n  }\n}\n\nexport function monitorPort (this: DocumentStoreInstance, portId: string) {\n  const port = this.ports[portId]\n\n  port.hue = port.hue ||  ~~(360 * Math.random())\n  port.isMonitored = true\n\n  this\n    .simulation\n    .monitorPort(portId, port.value, port.hue)\n\n  this.isOscilloscopeOpen = true\n}\n\nexport function unmonitorPort (this: DocumentStoreInstance, portId: string) {\n  const port = this.ports[portId]\n\n  port.isMonitored = false\n\n  this\n    .simulation\n    .unmonitorPort(portId)\n\n  this.isOscilloscopeOpen = Object.keys(this.oscillogram).length > 0\n}\n\n/**\n * Assigns values to the ports in the this according to the given map.\n *\n * @param valueMap - Port-ID-to-value mapping\n */\nexport function setPortValues (this: DocumentStoreInstance, valueMap: Record<string, number>) {\n  for (const portId in valueMap) {\n    if (this.ports[portId]) {\n      this.ports[portId].value = valueMap[portId]\n    }\n  }\n}\n","\nimport Direction from '@/types/enums/Direction'\n// TODO: rename parent 'layout' folder to 'geometry'\n\n/**\n * Normalizes the given rotation with respect to any additional rotation to augment by.\n *\n * @param {number} rotation\n * @param {number} additional\n * @returns {number}\n */\nfunction rotate (rotation: number, additional = 0): Direction {\n  return ((rotation + additional % 4) + 4) % 4\n}\n\n/**\n * Returns the absolute Cartesian position of an item based on its parent group's rotation and position.\n *\n * @param groupBoundingBox - group for which the item is a member of\n * @param item - item to compute position for\n * @param direction - rotation direction (1 for CW, -1 for CCW)\n * @returns\n */\nfunction getGroupedItemRotatedPosition (groupBoundingBox: BoundingBox, item: Item, direction: number): Point {\n  const w = groupBoundingBox.right - groupBoundingBox.left\n  const h = groupBoundingBox.bottom - groupBoundingBox.top\n  const mx = groupBoundingBox.left + (w / 2)\n  const my = groupBoundingBox.top + (h / 2)\n  const cx = item.position.x\n  const cy = item.position.y\n  const ax = cx + (item.width / 2)\n  const ay = cy + (item.height / 2)\n  const L = Math.hypot(mx - ax, my - ay)\n  const currentAngleRad = Math.atan2((ay - my), (ax - mx))\n  const newAngle = (90 * direction * (Math.PI / 180)) + currentAngleRad\n  const newAx = (L * Math.cos(newAngle)) + mx\n  const newAy = (L * Math.sin(newAngle)) + my\n\n  return {\n    x: newAx - (item.width / 2),\n    y: newAy - (item.height / 2)\n  }\n}\n\n/**\n * Returns the absolute Cartesian position of a port based on its parent's rotation and position.\n *\n * @param port\n * @param portList\n * @param item\n * @param index\n * @returns\n */\nfunction getRotatedPortPosition (port: Port, portList: Port[], item: Item, index: number): Point {\n  const { left, top, bottom, right } = item.boundingBox\n\n  // ports use CSS \"space around\" flex property for positions\n  // compute the spacing of each port based on the element width/height\n  // there are n spacings for n ports\n  const spacing = (port.orientation + item.rotation) % 2 === 0\n    ? Math.floor((bottom - top) / portList.length)\n    : Math.floor((right - left) / portList.length)\n\n  // compute the distance (from left-to-right or top-to-bottom)\n  // the distance will be the center of the computed spacing\n  const distance = (spacing * (index + 1)) - (spacing / 2)\n\n  switch (rotate(port.orientation + item.rotation)) {\n    case Direction.Left:\n      return { x: left, y: top + distance }\n    case Direction.Top:\n      return { x: right - distance, y: top }\n    case Direction.Right:\n      return { x: right, y: bottom - distance }\n    case Direction.Bottom:\n    default:\n      return { x: left + distance, y: bottom }\n  }\n}\n\nexport default {\n  rotate,\n  getGroupedItemRotatedPosition,\n  getRotatedPortPosition\n}\n","import { DocumentStoreInstance } from '..'\nimport boundaries from '../geometry/boundaries'\nimport rotation from '../geometry/rotation'\nimport Direction from '@/types/enums/Direction'\nimport SnapMode from '@/types/enums/SnapMode'\nimport ItemType from '@/types/enums/ItemType'\nimport fromDocumentToEditorCoordinates from '@/utils/fromDocumentToEditorCoordinates'\n\n/**\n * Centers all items (together as a group) to the center of the canvas.\n * All distances between items are maintained when this occurs.\n */\nexport function centerAll (this: DocumentStoreInstance) {\n  const boundingBoxes = Object\n    .values(this.items)\n    .map(({ boundingBox }) => boundingBox)\n  const boundingBox = boundaries.getGroupBoundingBox(boundingBoxes)\n  const { x, y } = boundaries.getCenteredScreenPoint(this.canvas, boundingBox, 20) // TODO: make 20 configurable as grid size\n\n  const deltaX = x - boundingBox.left\n  const deltaY = y - boundingBox.top\n\n  Object\n    .values(this.items)\n    .forEach(item => {\n      this.setItemPosition({\n        id: item.id,\n        position: {\n          x: item.position.x + deltaX,\n          y: item.position.y + deltaY\n        }\n      })\n    })\n}\n\n/**\n * Sets the absolute positions for all ports that belong to the given item.\n *\n * @param id - ID of the item containing the ports\n */\nexport function setItemPortPositions (this: DocumentStoreInstance, id: string) {\n  const item = this.items[id]\n\n  if (!item) return\n\n  const portGroups = item\n    .portIds\n    .reduce((portGroups: Map<Direction, Port[]>, portId) => {\n      const port = this.ports[portId]\n\n      if (port) {\n        const index: Direction = rotation.rotate(port.orientation + item.rotation)\n\n        portGroups.get(index)?.push(port)\n      }\n\n      return portGroups\n    }, new Map<Direction, Port[]>([\n      [Direction.Left, []],\n      [Direction.Top, []],\n      [Direction.Right, []],\n      [Direction.Bottom, []]\n    ]))\n\n  const setPortGroupPositions = (ports: Port[] = []) => {\n    ports.forEach((port, index) => {\n      this.ports[port.id].position = rotation.getRotatedPortPosition(port, ports, item, index)\n    })\n  }\n\n  setPortGroupPositions(portGroups.get(Direction.Left))\n  setPortGroupPositions(portGroups.get(Direction.Top))\n  setPortGroupPositions(portGroups.get(Direction.Right))\n  setPortGroupPositions(portGroups.get(Direction.Bottom))\n}\n\n/**\n * Sets the position of an item.\n *\n * @param payload\n * @param payload.id - ID of the item\n * @param payload.position - new position to move to\n */\nexport function setItemPosition (this: DocumentStoreInstance, { id, position }: { id: string, position: Point }) {\n  const item = this.items[id]\n  const delta: Point = {\n    x: position.x - item.position.x,\n    y: position.y - item.position.y\n  }\n\n  this.items[id].position = position\n  this.setItemBoundingBox(id)\n\n  item\n    .portIds\n    .forEach(portId => {\n      const port = this.ports[portId]\n\n      this.ports[portId].position = {\n        x: port.position.x + delta.x,\n        y: port.position.y + delta.y\n      }\n    })\n}\n\nexport function dragItem (this: DocumentStoreInstance, id: string, position: Point, snapMode?: SnapMode) {\n  const { x, y } = fromDocumentToEditorCoordinates(this.canvas, this.viewport, position, this.zoom)\n  const { width, height, rotation } = this.items[id]\n  const boundingBox = boundaries.getBoundingBox({ x, y }, rotation, width, height)\n  const offset = boundaries.getSnapOffset(this.snapBoundaries, boundingBox, snapMode || SnapMode.Outer, 15) // TODO: configurable snap position and tolerance\n\n  this.setSelectionPosition({\n    id,\n    position: {\n      x: x + offset.x,\n      y: y + offset.y\n    }\n  })\n}\n\n/**\n * Moves all selected items according to the delta provided.\n *\n * @param delta - delta to move the items by\n */\nexport function moveSelectionPosition (this: DocumentStoreInstance, delta: Point) {\n  const id: string | undefined = this.selectedItemIds[0]\n\n  if (id) {\n    const item = this.items[id]\n    const position: Point = {\n      x: item.position.x + delta.x,\n      y: item.position.y + delta.y\n    }\n\n    this.commitState()\n    this.setSelectionPosition({ id, position })\n  }\n}\n\n/**\n * Moves all selected items according to the delta that the given item has moved by.\n *\n * @param payload\n * @param payload.id - ID of the reference item moving\n * @param payload.position - new position that the reference item has moved to\n */\nexport function setSelectionPosition (this: DocumentStoreInstance, { id, position }: { id: string, position: Point }) {\n  const referenceItem = this.items[id]\n  const delta: Point = {\n    x: position.x - referenceItem.position.x,\n    y: position.y - referenceItem.position.y\n  }\n  const groupIds = new Set<string>()\n\n  this.setSelectionState({ id, value: true })\n\n  if (referenceItem.type === ItemType.Freeport) {\n    // if this item is a freeport, drag only this and nothing else\n    return this.setItemPosition({ id, position })\n  }\n\n  this\n    .selectedItemIds\n    .forEach((itemId: string) => {\n      const item = this.items[itemId]\n      const position: Point = {\n        x: item.position.x + delta.x,\n        y: item.position.y + delta.y\n      }\n\n      if (item.groupId) {\n        groupIds.add(item.groupId)\n      }\n\n      this.setItemPosition({ id: itemId, position })\n    })\n\n  groupIds.forEach(this.setGroupBoundingBox)\n}\n","import { DocumentStoreInstance } from '..'\nimport boundaries from '../geometry/boundaries'\nimport rotation from '../geometry/rotation'\n\n/**\n * Rotates all selected elements by 90 degrees.\n *\n * @param direction - direction of rotation (1 = CW, -1 = CCW)\n */\nexport function rotate (this: DocumentStoreInstance, direction: number) {\n  this.commitState()\n\n  const selectedItems = Object\n    .values(this.items)\n    .filter(({ isSelected }) => isSelected)\n  const boundingBoxes = selectedItems.map(({ boundingBox }) => boundingBox)\n  const boundingBox = boundaries.getGroupBoundingBox(boundingBoxes)\n  const groupIds = new Set<string>()\n\n  selectedItems.forEach(item => {\n    const newRotation = rotation.rotate(item.rotation + direction)\n\n    if (item.groupId) {\n      groupIds.add(item.groupId)\n    }\n\n    this.items[item.id].rotation = newRotation\n    this\n      .items[item.id]\n      .portIds\n      .forEach(portId => {\n        this.ports[portId].rotation = newRotation\n      })\n\n    this.setItemPosition({\n      id: item.id,\n      position: rotation.getGroupedItemRotatedPosition(boundingBox, item, direction)\n    })\n    this.setItemPortPositions(item.id)\n  })\n\n  groupIds.forEach(groupId => {\n    this.setGroupBoundingBox(groupId)\n  })\n}\n","import { DocumentStoreInstance } from '..'\nimport boundaries from '../geometry/boundaries'\nimport getConnectionChain from '@/utils/getConnectionChain'\nimport ItemType from '@/types/enums/ItemType'\n\n\nexport function deselectItem (this: DocumentStoreInstance, id: string) {\n  console.log('DE-SELECT ITEM', id)\n  this.setSelectionState({ id, value: false })\n}\n\nexport function selectItem (this: DocumentStoreInstance, id: string, keepSelection: boolean = false) {\n  if (!keepSelection) {\n    this.deselectAll()\n  }\n\n  console.log('SELECT ITEM', id)\n  this.setSelectionState({ id, value: true })\n}\n\n/**\n * Selects all items and connections.\n */\nexport function selectAll (this: DocumentStoreInstance) {\n  this.clearStatelessInfo()\n\n  for (let id in this.connections) {\n    this.connections[id].isSelected = true\n    this.selectedConnectionIds.push(id)\n  }\n\n  for (let id in this.items) {\n    this.items[id].isSelected = true\n    this.selectedItemIds.push(id)\n  }\n}\n\n/**\n * Deselects all elements.\n */\nexport function deselectAll (this: DocumentStoreInstance) {\n  this.clearStatelessInfo()\n\n  for (let id in this.connections) {\n    this.connections[id].isSelected = false\n    this.selectedConnectionIds = []\n  }\n\n  for (let id in this.items) {\n    this.items[id].isSelected = false\n    this.selectedItemIds.push(id)\n    this.selectedItemIds = []\n  }\n}\n\n/**\n * Selects all connections and items (and its connections) that live within the given boundary.\n *\n * @param boundingBox - two-dimensional boundary\n */\nexport function createSelection (this: DocumentStoreInstance, selection: BoundingBox) {\n  if (!boundaries.isOneOrTwoDimensional(selection)) return // omit selection lines or points\n\n  const itemIds = Object\n    .keys(this.items)\n    .filter(id => boundaries.hasIntersection(selection, this.items[id].boundingBox))\n  const connectionIds = Object\n    .keys(this.connections)\n    .filter(id => {\n      const connection = this.connections[id]\n      const source = this.ports[connection.source]\n      const target = this.ports[connection.target]\n\n      return boundaries.isLineIntersectingRectangle(source.position, target.position, selection)\n    })\n\n  itemIds\n    .concat(connectionIds)\n    .forEach(id => {\n      this.updateSelectionList({ id, isSelected: true })\n    })\n\n  this.selectItemConnections(itemIds)\n}\n\n/**\n * Selects all connections that are connected to any of the items in the given list.\n *\n * @param itemIds - list of items to select their connections for\n */\nexport function selectItemConnections (this: DocumentStoreInstance, itemIds: string[]) {\n  const portIds = itemIds.reduce((portIds: string[], itemId: string) => {\n    return portIds.concat(this.items[itemId].portIds)\n  }, [])\n\n  for (let id in this.connections) {\n    const c = this.connections[id]\n\n    if (portIds.includes(c.source) && portIds.includes(c.target)) {\n      this.updateSelectionList({ id, isSelected: true })\n    }\n  }\n}\n\n/**\n * Sets the selection this of the given element to the value provided.\n * If the item is a connection segment, then its entire connection chain will take on the same value.\n *\n * @param payload\n * @param payload.id - ID of the item, group, or connection to select\n * @param payload.isSelected - selection this to change to\n */\nexport function updateSelectionList (this: DocumentStoreInstance, { id, isSelected }: { id: string, isSelected: boolean }) {\n  const updateSelectionList = (id: string, key: 'selectedConnectionIds' | 'selectedItemIds') => {\n    const index = this[key].findIndex((i: string) => i === id)\n\n    if (isSelected && index === -1) {\n      this[key].push(id)\n    }\n\n    if (!isSelected && index !== -1) {\n      this[key].splice(index, 1)\n    }\n  }\n\n  if (this.items[id]) {\n    // select an individual item\n    this.items[id].isSelected = isSelected\n    updateSelectionList(id, 'selectedItemIds')\n  } else if (this.connections[id]) {\n    // select a connection (chain)\n    const { connectionChainId } = this.connections[id]\n    const {\n      connectionIds,\n      freeportIds\n    } = getConnectionChain(Object.values(this.connections), this.ports, connectionChainId)\n\n    // select all connection segments that are part of this connection chain\n    connectionIds.forEach(id => {\n      this.connections[id].isSelected = isSelected\n      updateSelectionList(id, 'selectedConnectionIds')\n    })\n\n    // select all freeports that are part of this connection chain\n    freeportIds.forEach(id => {\n      this.items[id].isSelected = isSelected\n      updateSelectionList(id, 'selectedItemIds')\n    })\n  }\n}\n\n/**\n * Inverts the selection this of the element having the given ID, or forces it to the value provided.\n * If the element is a member of a group, every item in that group will be selected.\n *\n * @param payload.id - the ID of the element to toggle its selection\n * @param payload.value - new selection this value to set to\n */\nexport function setSelectionState (this: DocumentStoreInstance, { id, value }: { id: string, value: boolean }) {\n  const element = this.items[id] || this.connections[id]\n  const isSelected = value\n\n  if (!element || element.isSelected === isSelected) return\n\n  if (element.groupId) {\n    // if item is part of a group, select all items in that group\n    const { itemIds, connectionIds } = this.groups[element.groupId]\n\n    itemIds\n      .concat(connectionIds)\n      .forEach(id => {\n        this.updateSelectionList({ id, isSelected })\n      })\n\n    this.updateSelectionList({ id: element.groupId, isSelected })\n  } else {\n    // otherwise, just select this one item\n    this.updateSelectionList({ id, isSelected })\n  }\n}\n\n/**\n * Places focus back to the last base item or forward to the first base item (according to z-index).\n *\n * @param {boolean} backToFirstItem - true if the next item to focus is the first item, or to the first item otherwise\n */\nexport function recycleSelection (this: DocumentStoreInstance, backToFirstItem: boolean) {\n  const id = backToFirstItem\n    ? this.baseItems[0]\n    : this.baseItems.slice(-1)[0]\n\n  if (id) {\n    this.deselectAll()\n    this.setSelectionState({ id: id.id, value: true })\n  }\n}\n\n/**\n * Deletes all selected items and connections.\n */\nexport function deleteSelection (this: DocumentStoreInstance) {\n  if (!this.hasSelection) return\n\n  this.commitState()\n\n  const nonFreeportItems = Object\n    .values(this.items)\n    .filter(({ isSelected, type }) => isSelected && type !== ItemType.Freeport)\n  const nonFreeportItemIds = nonFreeportItems.map(({ id }) => id)\n\n  // select the full chains of each connection attached to each selected item\n  Object\n    .values(this.connections)\n    .filter(c => {\n      const sourcePort = this.ports[c.source]\n      const targetPort = this.ports[c.target]\n\n      if (sourcePort && targetPort) {\n        return nonFreeportItemIds.includes(sourcePort.elementId) ||\n          nonFreeportItemIds.includes(targetPort.elementId)\n      }\n    })\n    .forEach(({ id }) => this.setSelectionState({ id, value: true }))\n\n  // remove all selected connections\n  Object\n    .values(this.connections)\n    .filter(({ isSelected }) => isSelected)\n    .forEach(connection => {\n      this.disconnect({\n        source: connection.source,\n        target: connection.target\n      })\n    })\n\n  // delete all selected non-freeport items\n  nonFreeportItems.forEach(i => this.removeElement(i.id))\n\n  // handle selected freeport deletions using removeFreeport\n  Object\n    .values(this.items)\n    .filter(({ isSelected, type }) => isSelected && type === ItemType.Freeport)\n    .forEach(f => this.removeFreeport(f.id))\n}\n","import SimulationService from '@/services/SimulationService'\nimport { DocumentStoreInstance } from '..'\n\n/**\n * Stops the simulation.\n */\nexport function stop (this: DocumentStoreInstance) {\n  this.simulation.pause()\n}\n\n/**\n * Restarts the simulation (if not in debugging mode).\n */\nexport function start (this: DocumentStoreInstance) {\n  if (!this.isDebugging) {\n    this.simulation.unpause()\n  }\n}\n\nexport function buildCircuit (this: DocumentStoreInstance) {\n  this.simulation.oscillator?.stop()\n\n  const simulation = new SimulationService(Object.values(this.items), Object.values(this.connections), this.ports)\n\n  simulation.on('change', (valueMap: Record<string, number>, oscillogram: Oscillogram) => {\n    for (const portId in valueMap) {\n      if (this.ports[portId]) {\n        this.ports[portId].value = valueMap[portId]\n      }\n    }\n\n    this.isCircuitEvaluated = !this.simulation.canContinue\n    this.oscillogram = oscillogram\n  })\n\n  this.simulation = simulation\n}\n\n/**\n * Updates the store according to the port-value mapping provided.\n * This also accepts oscillogram to update the visual oscilloscope.\n */\nexport function onSimulationUpdate (this: DocumentStoreInstance, valueMap: Record<string, number>, oscillogram: Oscillogram) {\n  for (const portId in valueMap) {\n    if (this.ports[portId]) {\n      this.ports[portId].value = valueMap[portId]\n    }\n  }\n\n  this.isCircuitEvaluated = !this.simulation.canContinue\n  this.oscillogram = oscillogram\n}\n\nexport function resetCircuit (this: DocumentStoreInstance) {\n  const items = Object.values(this.items)\n  const connections = Object.values(this.connections)\n\n  Object\n    .values(this.ports)\n    .forEach(port => {\n      port.value = 0\n    })\n\n  this.simulation.oscillator?.stop()\n  this.simulation = new SimulationService(items, connections, this.ports)\n  this.simulation.on('change', this.onSimulationUpdate)\n\n  Object\n    .values(this.items)\n    .forEach(({ properties, portIds }) => {\n      if (properties?.startValue) {\n        portIds.forEach(portId => this.setPortValue({\n          id: portId,\n          value: properties.startValue.value as number\n        }))\n      }\n    })\n\n  this.simulation.unpause()\n\n  if (this.isDebugging) {\n    this.simulation.startDebugging()\n    this.isCircuitEvaluated = !this.simulation.canContinue\n  }\n}\n\nexport function stepThroughCircuit (this: DocumentStoreInstance) {\n  this.simulation.advance()\n  this.isCircuitEvaluated = !this.simulation.canContinue\n}\n\nexport function toggleDebugger (this: DocumentStoreInstance) {\n  if (this.isDebugging) {\n    this.simulation.stopDebugging()\n  } else {\n    this.simulation.startDebugging()\n  }\n\n  this.isDebugging = !this.isDebugging\n}\n\nexport function toggleOscilloscope (this: DocumentStoreInstance) {\n  if (this.isOscilloscopeOpen) {\n    this.closeOscilloscope()\n  } else {\n    this.openOscilloscope()\n  }\n}\n\nexport function openOscilloscope (this: DocumentStoreInstance) {\n  Object\n    .values(this.ports)\n    .forEach(port => {\n      if (port.isMonitored) {\n        this.simulation.monitorPort(port.id, port.value, port.hue)\n      }\n    })\n\n  this.isOscilloscopeOpen = true\n}\n\nexport function closeOscilloscope (this: DocumentStoreInstance, lastHeight?: number) {\n  if (!this.isOscilloscopeOpen) return\n\n  Object\n    .keys(this.ports)\n    .forEach(this.simulation.unmonitorPort)\n\n  this.simulation.oscillator.clear()\n  this.isOscilloscopeOpen = false\n\n  if (lastHeight) {\n    this.oscilloscopeHeight = lastHeight\n  }\n}\n\nexport function clearOscilloscope (this: DocumentStoreInstance) {\n  this.simulation.oscillator.clear()\n}\n\nexport default {\n  stop,\n  start,\n  buildCircuit,\n  onSimulationUpdate,\n  resetCircuit,\n  toggleDebugger,\n  stepThroughCircuit,\n  toggleOscilloscope,\n  openOscilloscope,\n  closeOscilloscope,\n  clearOscilloscope\n}\n","import { DocumentStoreInstance } from '..'\nimport boundaries from '../geometry/boundaries'\n\nconst MIN_SCALE = 0.1\nconst MAX_SCALE = 2\nconst SCALE_STEP = 0.1\n\n/**\n * Assigns the rects of the canvas and viewport according to the screen size and rect provided.\n *\n * @param {DOMRectReadOnly} payload.rect - the rect of the item's DOM element\n */\nexport function setViewerSize (this: DocumentStoreInstance, rect: DOMRect) {\n  this.viewport = rect\n\n  this.canvas.right = screen.width / MIN_SCALE\n  this.canvas.bottom = screen.height / MIN_SCALE\n\n  if (!this.hasLoaded && rect.width > 0 && rect.height > 0) {\n    this.hasLoaded = true\n    this.centerAll()\n    this.panToCenter()\n    // this.setZoom({ zoom: 1.4 }) // TODO: set the user-defined default zoom like this\n  }\n}\n\n/**\n * Updates the size of the item.\n * This re-positions the item such that its centroid is in the same location as it was with its old size.\n *\n * @param {object} payload\n * @param {DOMRectReadOnly} payload.rect - the rect of the item's DOM element\n * @param {string} payload.id - ID of the item\n */\nexport function setItemSize (this: DocumentStoreInstance, { rect, id }: { rect: DOMRectReadOnly, id: string }) {\n  const item = this.items[id]\n\n  const width = rect.width / this.zoomLevel\n  const height = rect.height / this.zoomLevel\n\n  // reposition w.r.t. the centroid\n  const centerX = item.position.x + (item.width / 2)\n  const centerY = item.position.y + (item.height / 2)\n  const newX = centerX - width / 2\n  const newY = centerY - height / 2\n\n  this.items[id].position = {\n    x: newX,\n    y: newY\n  }\n  this.items[id].width = width\n  this.items[id].height = height\n\n  this.setItemBoundingBox(id)\n  this.setItemPortPositions(id)\n\n  if (this.items[id].groupId) {\n    this.setGroupBoundingBox(this.items[id].groupId as string)\n  }\n}\n\n/**\n * Sets the bounding box of an item.\n *\n * @param {string} payload.id - ID of the item\n */\nexport function setItemBoundingBox (this: DocumentStoreInstance, id: string) {\n  if (!this.items[id]) return\n\n  const {\n    position,\n    rotation,\n    width,\n    height\n  } = this.items[id]\n\n  this.items[id].boundingBox = boundaries.getBoundingBox(position, rotation, width, height)\n}\n\n/**\n * Sets the bounding box of a group.\n *\n * @param {string} payload.id - ID of the group\n */\nexport function setGroupBoundingBox (this: DocumentStoreInstance, id: string) {\n  if (!this.groups[id]) return\n\n  const boundingBoxes = this\n    .groups[id]\n    .itemIds\n    .map(id => this.items[id].boundingBox)\n\n  this.groups[id].boundingBox = boundaries.getGroupBoundingBox(boundingBoxes)\n}\n","import ItemType from '@/types/enums/ItemType'\nimport boundaries from '../geometry/boundaries'\nimport { DocumentStoreInstance } from '..'\n\n/**\n * Sets the computed boundaries that an actively-dragged item to snap to.\n *\n * @param id - ID of the item or port being dragged\n */\n  export function setSnapBoundaries (this: DocumentStoreInstance, id: string) {\n  this.snapBoundaries = ((): BoundingBox[] => {\n    if (this.connectablePortIds.length) {\n      // if there are connectable port ids, then use those for boundaries\n      return this\n        .connectablePortIds\n        .filter(portId => portId !== id)\n        .map(portId => boundaries.getPointBoundary(this.ports[portId].position))\n    }\n\n    const item = this.items[id]\n\n    if (item && !item.groupId) {\n      // the item with the given id is an item that does not belong to a group\n      if (item.type === ItemType.Freeport) {\n        if (item.portIds.length > 1) {\n          // if only one port exists on the freeport, then it is a port being dragged by the user and does not apply\n          // freeports should snap to \"straighten out\" wires\n          return Object\n            .values(this.connections)\n            .reduce((boundingBoxes: BoundingBox[], connection: Connection) => {\n              if (item.portIds.includes(connection.source)) {\n                return boundingBoxes.concat(boundaries.getLinearBoundaries(this.ports[connection.target].position))\n              }\n\n              if (item.portIds.includes(connection.target)) {\n                return boundingBoxes.concat(boundaries.getLinearBoundaries(this.ports[connection.source].position))\n              }\n\n              return boundingBoxes\n            }, [])\n        }\n      } else {\n        // this an item that can snap to align with the outer edge of any non-freeport item\n        return Object\n          .values(this.items)\n          .filter(e => e.id !== id && e.type !== ItemType.Freeport)\n          .map(e => e.boundingBox)\n      }\n    }\n    return []\n  })()\n}\n","import { DocumentStoreInstance } from '..'\n\n/**\n * Reverts to the most-recently committed document this.\n */\nexport function undo (this: DocumentStoreInstance) {\n  const undoState = this.undoStack.slice(-1).pop()\n\n  if (undoState) {\n    this.redoStack.push(JSON.stringify({\n      connections: this.connections,\n      items: this.items,\n      ports: this.ports,\n      groups: this.groups\n    }))\n    this.applyState(undoState)\n    this.undoStack.pop()\n    this.isDirty = true\n  }\n}\n\n/**\n * Reverts to the most-recently-reverted this.\n */\nexport function redo (this: DocumentStoreInstance) {\n  const redoState = this.redoStack.slice(-1).pop()\n\n  if (redoState) {\n    this.undoStack.push(JSON.stringify({\n      connections: this.connections,\n      items: this.items,\n      ports: this.ports,\n      groups: this.groups\n    }))\n    this.applyState(redoState)\n    this.redoStack.pop()\n    this.isDirty = true\n  }\n}\n\nexport function commitState (this: DocumentStoreInstance) {\n  this.cacheState()\n  this.commitCachedState()\n}\n\n/**\n * Stringifies and caches the current document this.\n * This will save all connections, items, ports, and groups.\n */\nexport function cacheState (this: DocumentStoreInstance) {\n  this.cachedState = JSON.stringify({\n    connections: this.connections,\n    items: this.items,\n    ports: this.ports,\n    groups: this.groups\n  })\n}\n\n/**\n * Commits the actively-cached this to the undo stack.\n * This will clear the redo stack.\n */\nexport function commitCachedState (this: DocumentStoreInstance) {\n  if (this.cachedState) {\n    this.undoStack.push(this.cachedState.toString())\n    this.cachedState = null\n    this.redoStack = []\n    this.isDirty = true\n  }\n}\n\n/**\n * Applies the given serialized this to the active document.\n *\n * This this must contain exactly these maps: `items`, `connections`, `ports`, `groups`.\n * Any other properties will not be applied.\n *\n * @param {string} savedState - JSON-serialized this string\n */\nexport function applyState (this: DocumentStoreInstance, savedState: string) {\n  const parsedState = JSON.parse(savedState) as SerializableState\n  const { items, connections, ports, groups } = parsedState\n\n  /* returns everything in a that is not in b */\n  function getExcludedMembers (a: Record<string, BaseItem>, b: Record<string, BaseItem>) {\n    const aIds = Object.keys(a)\n    const bIds = Object.keys(b)\n\n    return aIds.filter(id => !bIds.includes(id))\n  }\n\n  // find all items and connections in current this that are not in the applied this and remove them from the circuit\n  const removedItems = getExcludedMembers(this.items, items)\n  const removedConnections = getExcludedMembers(this.connections, connections)\n\n  // add any new items from the the applied this to the circuit\n  const addedItems = getExcludedMembers(items, this.items)\n  const addedConnections = getExcludedMembers(connections, this.connections)\n\n  removedConnections.forEach(id => this.disconnect(this.connections[id]))\n  removedItems.forEach(id => this.removeElement(id))\n\n  this.ports = ports\n  this.items = items\n  this.groups = groups\n\n  addedItems.forEach(id => {\n    this.addItem({\n      item: items[id],\n      ports\n    })\n  })\n\n  addedConnections.forEach(id => this.connect(connections[id]))\n\n  this.simulation.step()\n}\n","/**\n * Sorting function to sort BaseItems by their zIndex values in ascending order.\n */\nexport default function sortByZIndex (a: BaseItem, b: BaseItem) {\n  if (a.zIndex > b.zIndex) return 1\n  else if (a.zIndex < b.zIndex) return -1\n  return 0\n}\n","import { DocumentStoreInstance } from '..'\nimport sortByZIndex from '@/utils/sortByZIndex'\n\n/**\n * Sends the selected base item(s) to the back.\n */\nexport function sendBackward (this: DocumentStoreInstance) {\n  this.commitState()\n  this.incrementZIndex(-1)\n}\n\n/**\n * Brings the selected base item(s) to the front.\n */\nexport function bringForward (this: DocumentStoreInstance) {\n  this.commitState()\n  this.incrementZIndex(1)\n}\n\n/**\n * Sends the selected base item(s) backward by one z-index.\n */\nexport function sendToBack (this: DocumentStoreInstance) {\n  this.commitState()\n  this.setZIndex(1)\n}\n\n/**\n * Brings the selected base item(s) forward by one z-index.\n */\nexport function bringToFront (this: DocumentStoreInstance) {\n  this.commitState()\n  this.setZIndex(this.zIndex)\n}\n\n/**\n * Increments the zIndex of all items selected.\n * If an item's movement collides with another item's movement, or it becomes out of bounds, its zIndex will not change.\n *\n * @param {number} direction - 1 to increment, -1 to decrement\n */\nexport function incrementZIndex (this: DocumentStoreInstance, direction: number) {\n  const items: BaseItem[] = Object.values(this.items)\n  const connections: BaseItem[] = Object.values(this.connections)\n  const baseItems = items\n    .concat(connections)\n    .sort(sortByZIndex)\n  const selectedItemIds = baseItems\n    .filter(({ isSelected }) => isSelected)\n    .map(({ id }) => id)\n\n  if (direction > 0) {\n    // if the direction is forward, then reverse the selected IDs\n    // this is because the next item that an item may want to swap with may also be swapping (and therefore frozen)\n    // reversing the order that we look at the items will prevent that from happening\n    selectedItemIds.reverse()\n  }\n\n  const frozenIds: string[] = []\n\n  selectedItemIds.forEach(id => {\n    const currentIndex = baseItems.findIndex(i => i.id === id)\n    const nextIndex = currentIndex + direction\n\n    if (nextIndex < 0 || nextIndex >= baseItems.length) {\n      // if the next zIndex pushes it out of bounds, freeze it\n      frozenIds.push(baseItems[currentIndex].id)\n      return\n    }\n\n    if (!frozenIds.includes(baseItems[nextIndex]?.id)) {\n      const item = baseItems[currentIndex]\n      // if the item to swap with is not frozen, then swap places with it\n      baseItems.splice(currentIndex, 1)\n      baseItems.splice(nextIndex, 0, item)\n    }\n  })\n\n  baseItems.forEach((item, index) => {\n    item.zIndex = index + 1\n  })\n\n  this.zIndex = Object.keys(baseItems).length\n}\n\n/**\n * Moves all selected items to the given zIndex values.\n * If those items aren't siblings already, they will be when this is invoked.\n *\n * @param {number} zIndex - new zIndex to move items to\n */\nexport function setZIndex (this: DocumentStoreInstance, zIndex: number) {\n  const items: BaseItem[] = Object.values(this.items)\n  const connections: BaseItem[] = Object.values(this.connections)\n  let baseItems = items\n    .concat(connections)\n    .sort(sortByZIndex)\n  const selectedItems = baseItems.filter(({ isSelected }) => isSelected)\n\n  for (let i = 0; i < baseItems.length; i++) {\n    if (baseItems[i].isSelected) {\n      baseItems.splice(i, 1)\n      i--\n    }\n  }\n\n  baseItems.splice(zIndex - 1, 0, ...selectedItems)\n  baseItems.forEach((item, index) => {\n    item.zIndex = index + 1\n  })\n\n  this.zIndex = Object.keys(baseItems).length\n}\n","import { DocumentStoreInstance } from '..'\nimport boundaries from '../geometry/boundaries'\nimport fromDocumentToEditorCoordinates from '@/utils/fromDocumentToEditorCoordinates'\n\nconst MIN_SCALE = 0.1\nconst MAX_SCALE = 2\nconst SCALE_STEP = 0.1\n\n/**\n * Increments the current zoom by one scale step (in the positive or negative direction).\n *\n * @param [direction = 1] - directional scalar (1 or -1)\n */\nexport function incrementZoom (this: DocumentStoreInstance, direction = 1) {\n  this.setZoom({\n    zoom: this.zoomLevel + (SCALE_STEP * direction)\n  })\n}\n\n/**\n * Sets the zoom level for the document.\n * This will zoom on the focal point (if provided) or the center of the visible area (viewport).\n *\n * @param zoom - percentage of zoom by decimal (e.g., 1.0 = 100%)\n * @param [point] - focal point to zoom on\n */\nexport function setZoom (this: DocumentStoreInstance, { zoom, point }: { zoom: number, point?: Point }) {\n  if (zoom < MIN_SCALE) zoom = MIN_SCALE\n  if (zoom > MAX_SCALE) zoom = MAX_SCALE\n\n  zoom = Math.round(zoom * 100) / 100\n\n  if (!point) {\n    point = boundaries.getBoundingBoxMidpoint(this.viewport)\n    point.x += this.viewport.left\n    point.y += this.viewport.top\n  }\n\n  const zoomedPoint = fromDocumentToEditorCoordinates(this.canvas, this.viewport, point, this.zoomLevel)\n  const scaledPoint = { // the canvas coordinate, scaled by the new zoom factor\n    x: zoomedPoint.x * zoom,\n    y: zoomedPoint.y * zoom\n  }\n  const viewportPoint = { // the point w.r.t. the top left offset of the viewport\n    x: point.x - this.viewport.x,\n    y: point.y - this.viewport.y\n  }\n\n  this.panTo({\n    x: Math.round(Math.min(viewportPoint.x - scaledPoint.x, 0)),\n    y: Math.round(Math.min(viewportPoint.y - scaledPoint.y, 0))\n  })\n\n  this.zoomLevel = zoom\n}\n","import cloneDeep from 'lodash.clonedeep'\nimport { v4 as uuid } from 'uuid'\nimport ItemType from '@/types/enums/ItemType'\nimport PortType from '@/types/enums/PortType'\nimport Direction from '@/types/enums/Direction'\nimport itemFactory from './itemFactory'\nimport { DocumentState } from '@/store/document/state'\n\n/**\n * Creates an integrated circuit item.\n * This will embed the ports, connections, and items provided as internal circuit elements and expose input and output ports for each input and output node, respectively.\n *\n * @param statePorts - ports belonging to all elements to embed\n * @param stateItems - items to embed\n * @param stateConnections - connections between items to embed\n */\nexport default function integratedCircuitFactory (state: DocumentState) {\n  const { ports, items, connections, groups } = cloneDeep(state) as DocumentState\n  const integratedCircuitItem = itemFactory(uuid(), ItemType.IntegratedCircuit, 'Flip flop', 400, 400)\n\n  Object\n    .values(items)\n    .forEach(item => {\n      if (item.type !== ItemType.InputNode && item.type !== ItemType.OutputNode) return\n\n      // loop through each input node (switch, button, etc.) and each output node (lightbulb, etc.) in the circuit\n      // input nodes will convert to buffers and will take in a signal from the outside world\n      // output nodes will convert to buffers and signals it receives and broadcast them to the outside world\n      const portType = item.type === ItemType.InputNode\n        ? PortType.Output\n        : PortType.Input\n\n      // by default, the inputs will be on the left and the outputs on the right, but the user can change this\n      const orientation = item.type === ItemType.InputNode\n        ? Direction.Left\n        : Direction.Right\n\n      item\n        .portIds\n        .filter(portId => ports[portId].type === portType)\n        .forEach(portId => {\n          const newId = uuid()\n\n          // each input node (switch, button, etc.) will become a buffer node when simulated\n          // therefore each input node (now buffer) will receive an additional input port to receive signals from the outside world\n          // likewise, each output node (also now a buffer) will receive an additional output port to broadcast signals to the outside world\n          // these new input and output ports will be used by both the embedded nodes and the integrated circuit element itself\n          ports[newId] = {\n            ...cloneDeep<Port>(ports[portId]),\n            type: item.type === ItemType.InputNode\n              ? PortType.Input\n              : PortType.Output,\n            id: newId,\n            elementId: item.id,\n            orientation\n          }\n\n          item.portIds.push(newId)\n          integratedCircuitItem.portIds.push(newId)\n        })\n\n      item.type = ItemType.Buffer\n    })\n\n  integratedCircuitItem.integratedCircuit = {\n    items,\n    connections,\n    ports,\n    groups,\n    serializedState: JSON.stringify({\n      items: state.items,\n      connections: state.connections,\n      ports: state.ports,\n      groups: state.groups\n    })\n  }\n\n  return integratedCircuitItem\n}\n","import { defineStore } from 'pinia'\nimport { state, DocumentState } from './state'\nimport * as clipboardActions from './actions/clipboard'\nimport * as connectionActions from './actions/connection'\nimport * as editorActions from './actions/editor'\nimport * as freeportActions from './actions/freeport'\nimport * as groupingActions from './actions/grouping'\nimport * as itemActions from './actions/item'\nimport * as panningActions from './actions/panning'\nimport * as portActions from './actions/port'\nimport * as positioningActions from './actions/positioning'\nimport * as rotationActions from './actions/rotation'\nimport * as selectionActions from './actions/selection'\nimport * as simulationActions from './actions/simulation'\nimport * as sizingActions from './actions/sizing'\nimport * as snappingActions from './actions/snapping'\nimport * as undoRedoActions from './actions/undoRedo'\nimport * as zIndexActions from './actions/zIndex'\nimport * as zoomingActions from './actions/zooming'\nimport integratedCircuitFactory from '@/factories/integratedCircuitFactory'\nimport sortByZIndex from '@/utils/sortByZIndex'\nimport idMapper from '@/utils/idMapper'\n\nexport const createDocumentStore = (documentId: string) => defineStore({\n  id: documentId,\n  state,\n  getters: {\n    baseItems (state) {\n      return (Object\n        .values(state.connections) as BaseItem[])\n        .concat(Object.values(state.items) as BaseItem[])\n        .sort(sortByZIndex)\n    },\n\n    zoom (state) {\n      return state.zoomLevel\n    },\n\n    hasSelection (state) {\n      return state.selectedItemIds.length > 0 || state.selectedConnectionIds.length > 0\n    },\n\n    hasSelectedItems (state) {\n      return state.selectedItemIds.length > 0\n    },\n\n    selectedGroupIds (state) {\n      const selectedGroupIds = new Set<string | null>()\n\n      state\n        .selectedItemIds\n        .forEach(id => selectedGroupIds.add(state.items[id]?.groupId))\n\n      return Array.from(selectedGroupIds)\n    },\n\n    canGroup () {\n      return this.selectedGroupIds.length > 1 || [].slice.call(this.selectedGroupIds)[0] === null\n    },\n\n    canUngroup () {\n      return !![].slice.call(this.selectedGroupIds).find(id => !!id)\n    },\n\n    canUndo (state) {\n      return state.undoStack.length > 0\n    },\n\n    canRedo (state) {\n      return state.redoStack.length > 0\n    }\n  },\n  actions: {\n    ...clipboardActions,\n    ...connectionActions,\n    ...editorActions,\n    ...freeportActions,\n    ...groupingActions,\n    ...itemActions,\n    ...panningActions,\n    ...portActions,\n    ...positioningActions,\n    ...rotationActions,\n    ...selectionActions,\n    ...simulationActions,\n    ...snappingActions,\n    ...sizingActions,\n    ...undoRedoActions,\n    ...zIndexActions,\n    ...zoomingActions,\n\n    async saveIntegratedCircuit () {\n      // TODO: this action should live in the root state, not here\n      const originalIcItem = integratedCircuitFactory(this.$state as DocumentState)\n      const idMappedIcItem = idMapper.mapIntegratedCircuitIds(originalIcItem)\n\n      this.insertItemAtPosition({ item: idMappedIcItem, ports: [] })\n      this.setItemBoundingBox(idMappedIcItem.id)\n      this.setItemPortPositions(idMappedIcItem.id)\n      this.setSelectionState({ id: idMappedIcItem.id, value: true })\n    }\n  }\n})\n\nexport type DocumentStore = ReturnType<typeof createDocumentStore>\n\nexport type DocumentStoreInstance = ReturnType<DocumentStore>\n","import { Buffer } from 'buffer'\nimport JSZip from 'jszip'\n\nexport default class FileService {\n  static async open (filePath: string) {\n    const zip = new JSZip()\n\n    const compressedContent = window.api.openFile(filePath)\n    const { files } = await zip.loadAsync(compressedContent)\n    const data = await files.content.async('text')\n\n    return data\n  }\n\n  static async writeBlob (filePath: string, blob: Blob) {\n    const blobby = await blob.arrayBuffer()\n    const buf = Buffer.from(blobby)\n\n    window.api.saveFile(filePath, buf)\n  }\n\n  static async save (filePath: string, content: object) {\n    const zip = new JSZip()\n\n    zip.file('content', JSON.stringify(content))\n\n    const compressedContent = await zip.generateAsync({ type: 'blob' })\n\n    this.writeBlob(filePath, compressedContent)\n  }\n}\n","export default function getFileName (filePath: string) {\n  return filePath.split('\\\\').pop()?.split('/').pop() || ''\n}\n","// @ts-check\nimport { defineStore } from 'pinia'\nimport { v4 as uuid } from 'uuid'\nimport basic from '../containers/fixtures/basic.json'\nimport flipFlop from '../containers/fixtures/flipflop.json'\nimport integratedCircuit from '../containers/fixtures/ic.json'\nimport testIc from '../containers/fixtures/test.json'\n\nimport { createDocumentStore, DocumentStore } from './document'\nimport FileService from '@/services/FileService'\nimport getFileName from '@/utils/getFileName'\n\nexport type RootStore = {\n  documents: {\n    [id: string]: {\n      fileName: string\n      filePath?: string\n      displayName: string\n      store: DocumentStore\n    }\n  }\n  clipboard: string | null\n  activeDocumentId: string | null\n  canExit: boolean\n  isFullscreen: boolean\n}\n\nexport const useRootStore = defineStore({\n  id: 'root',\n  state: (): RootStore => ({\n    documents: {},\n    clipboard: null,\n    activeDocumentId: null,\n    canExit: false,\n    isFullscreen: false\n  }),\n  getters: {\n    hasOpenDocuments (state) {\n      return Object\n        .keys(state.documents)\n        .length > 0\n    },\n    activeDocument (state) {\n      if (state.activeDocumentId) {\n        return state.documents[state.activeDocumentId]\n      }\n\n      return null\n    }\n  },\n  actions: {\n    openIntegratedCircuit (item: Item) {\n      if (item.integratedCircuit) {\n        this.openDocument('', item.integratedCircuit.serializedState, item.id, item.name)\n      }\n    },\n    async saveImage (data: Blob) {\n      if (!this.activeDocument) return\n\n      try {\n        const partialName = this.activeDocument.displayName.replace(/\\.[^/.]+$/, \"\")\n        const fileName = `${partialName}.png`\n        const filePath = window.api.showSaveFileDialog([\n          {\n            name: 'PNG Image',\n            extensions: ['.png']\n          }\n        ], fileName)\n\n        if (!filePath) return\n\n        await FileService.writeBlob(filePath, data)\n      } catch (error) {\n        console.log('ERROR: ', error)\n        window.api.showMessageBox({\n          message: 'An error occurred while trying to save the image.',\n          title: 'Error',\n          type: 'error'\n        })\n      }\n    },\n    newDocument () {\n      const id = uuid()\n      const store = createDocumentStore(id)\n      const document = store()\n\n      document.resetCircuit()\n\n      this.documents[id] = {\n        fileName: 'Untitled Circuit',\n        displayName: 'Untitled Circuit',\n        store\n      }\n      this.activateDocument(id)\n    },\n    async closeAll (): Promise<boolean> {\n      if (this.activeDocumentId) {\n        const closedSuccessfully = await this.closeDocument(this.activeDocumentId)\n\n        // wait for the next window frame to show the next active document\n        await new Promise(resolve => setTimeout(resolve))\n\n        if (closedSuccessfully) {\n          return this.closeAll()\n        }\n\n        return false // a document refused to close\n      }\n\n      return true // all documents successfully closed\n    },\n    printActiveDocument () {\n      if (this.activeDocument) {\n        this.activeDocument.store().isPrinting = true\n      }\n    },\n    async closeDocument (id: string): Promise<boolean> {\n      const document = this.documents[id]\n      const store = document.store()\n      let isSuccessful = true\n\n      this.activateDocument(id)\n\n      if (store.isDirty) {\n        const dialogResult = window.api.showMessageBox({\n          message: `Save changes to ${document.fileName}?`,\n          title: 'Confirm',\n          buttons: ['Yes', 'No', 'Cancel']\n        })\n\n        if (dialogResult === 0) {\n          // user selected 'Yes' (to save the active document)\n          isSuccessful = await this.saveActiveDocument()\n        }\n\n        if (dialogResult === 2) {\n          // user selected 'Cancel' to continue editing their document\n          return false\n        }\n      }\n\n      // TODO: call some sort of teardown/$dispose() function of document\n      delete this.documents[id]\n      this.activeDocumentId = null\n\n      const remainingId = Object.keys(this.documents).pop()\n\n      if (remainingId) {\n        this.activateDocument(remainingId)\n      }\n\n      return isSuccessful\n    },\n    async saveActiveDocument (setFileName: boolean = false): Promise<boolean> {\n      try {\n        if (!this.activeDocument) return true\n        if (!this.activeDocument.filePath || setFileName) {\n          // if no file name is defined yet, ask the user for the location to save it\n          const fileName = this.activeDocument.fileName || `${this.activeDocument.fileName}.alfx`\n          const filePath = window.api.showSaveFileDialog([\n            {\n              name: 'Aristotle Logic Circuit (*.alfx)',\n              extensions: ['alfx']\n            }\n          ], fileName)\n\n          if (!filePath) return true\n          if (filePath) {\n            const fileName = getFileName(filePath)\n\n            this.activeDocument.filePath = filePath\n            this.activeDocument.fileName = fileName\n            this.activeDocument.displayName = fileName\n          }\n        }\n\n        if (!this.activeDocument.filePath) return true\n\n        const store = this.activeDocument.store()\n\n        FileService.save(this.activeDocument.filePath, {\n          items: store.items,\n          connections: store.connections,\n          groups: store.groups,\n          ports: store.ports\n        })\n\n        store.isDirty = false\n\n        return true\n      } catch (error) {\n        window.api.showMessageBox({\n          message: 'An error occurred while trying to save the file.',\n          title: 'Error',\n          type: 'error'\n        })\n\n        return false\n      }\n    },\n    async selectDocument () {\n      const files = window.api.showOpenFileDialog([\n        {\n          name: 'Aristotle Logic Circuit (*.alfx)',\n          extensions: ['alfx']\n        }\n      ])\n\n      for (let i = 0; i < files.length; i++) {\n        await this.openDocumentFromPath(files[i])\n      }\n    },\n    async openDocumentFromPath (filePath: string) {\n      try {\n        // TODO: need to create lock on file while open\n        const content = await FileService.open(filePath)\n\n        if (content) {\n          this.openDocument(filePath, content, uuid())\n        }\n      } catch (error) {\n        console.log('ERR', error)\n        window.api.showMessageBox({\n          message: `Could not open ${filePath}. The file is not a valid Aristotle circuit.`,\n          title: 'Error',\n          type: 'error'\n        })\n      }\n    },\n    openDocument (filePath: string, content: string, id: string, displayName: string = '') {\n      if (this.documents[id]) {\n        return this.activateDocument(id)\n      }\n\n      const store = createDocumentStore(id)\n      const document = store()\n      const fileName = getFileName(filePath)\n\n      document.loadDocument(content)\n\n      this.documents[id] = {\n        fileName,\n        filePath,\n        displayName: displayName || fileName,\n        store\n      }\n      this.activateDocument(id)\n    },\n    switchDocument (direction: number) {\n      const documentIds = Object.keys(this.documents)\n      const currentIndex = documentIds.findIndex(id => this.activeDocumentId === id)\n\n      let nextIndex = currentIndex + direction\n\n      if (documentIds.length === 0) return\n      if (currentIndex === -1 || nextIndex >= documentIds.length) nextIndex = 0\n      else if (nextIndex < 0) nextIndex = documentIds.length - 1\n\n      this.activateDocument(documentIds[nextIndex])\n    },\n    pauseActivity () {\n      this.activeDocument?.store().stop()\n    },\n    resumeActivity () {\n      this.activeDocument?.store().start()\n    },\n    activateDocument (id: string) {\n      this.pauseActivity()\n      this.activeDocumentId = id\n      this.resumeActivity()\n    },\n    openTestDocuments () {\n      // this.openDocument('integrated-circuit.alfx', JSON.stringify({\n      //   connections: {},\n      //   items: {},\n      //   ports: {},\n      //   groups: {}\n      // }))\n      // this.openDocument('test.alfx', JSON.stringify(testIc))\n      // this.openDocument('integrated-circuit.alfx', JSON.stringify(integratedCircuit))\n      // this.pauseActivity()\n      this.openDocument('flip-flop.alfx', JSON.stringify(flipFlop), uuid(), 'flip-flop.alfx')\n    },\n\n    navigateDocumentList (direction: number) {\n      const documentIds = Object.keys(this.documents)\n      const currentIndex = documentIds.findIndex(id => id === this.activeDocumentId)\n      let nextIndex = currentIndex + direction\n\n      if (nextIndex < 0) nextIndex = documentIds.length - 1\n      if (nextIndex >= documentIds.length) nextIndex = 0\n\n      this.activateDocument(documentIds[nextIndex])\n    },\n\n    toggleFullscreen () {\n      this.isFullscreen = !this.isFullscreen\n\n      window.api.setFullscreen(this.isFullscreen)\n    }\n  }\n})\n","import { render } from \"./Document.vue?vue&type=template&id=0d053a2a&ts=true\"\nimport script from \"./Document.vue?vue&type=script&lang=ts\"\nexport * from \"./Document.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Icon.vue?vue&type=template&id=c2deb328&ts=true\"\nimport script from \"./Icon.vue?vue&type=script&lang=ts\"\nexport * from \"./Icon.vue?vue&type=script&lang=ts\"\n\nimport \"./Icon.vue?vue&type=style&index=0&id=c2deb328&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ToolbarButton.vue?vue&type=template&id=7bbf6728&ts=true\"\nimport script from \"./ToolbarButton.vue?vue&type=script&lang=ts\"\nexport * from \"./ToolbarButton.vue?vue&type=script&lang=ts\"\n\nimport \"./ToolbarButton.vue?vue&type=style&index=0&id=7bbf6728&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ToolbarSeparator.vue?vue&type=template&id=3396867d&ts=true\"\nimport script from \"./ToolbarSeparator.vue?vue&type=script&lang=ts\"\nexport * from \"./ToolbarSeparator.vue?vue&type=script&lang=ts\"\n\nimport \"./ToolbarSeparator.vue?vue&type=style&index=0&id=3396867d&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ScrollFade.vue?vue&type=template&id=20b5d024&ts=true\"\nimport script from \"./ScrollFade.vue?vue&type=script&lang=ts\"\nexport * from \"./ScrollFade.vue?vue&type=script&lang=ts\"\n\nimport \"./ScrollFade.vue?vue&type=style&index=0&id=20b5d024&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Toolbar.vue?vue&type=template&id=0c2bba68&ts=true\"\nimport script from \"./Toolbar.vue?vue&type=script&lang=ts\"\nexport * from \"./Toolbar.vue?vue&type=script&lang=ts\"\n\nimport \"./Toolbar.vue?vue&type=style&index=0&id=0c2bba68&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ToolboxItem.vue?vue&type=template&id=fa3e9b42&ts=true\"\nimport script from \"./ToolboxItem.vue?vue&type=script&lang=ts\"\nexport * from \"./ToolboxItem.vue?vue&type=script&lang=ts\"\n\nimport \"./ToolboxItem.vue?vue&type=style&index=0&id=fa3e9b42&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ToolboxLayout.vue?vue&type=template&id=1d9cc0f9&ts=true\"\nimport script from \"./ToolboxLayout.vue?vue&type=script&lang=ts\"\nexport * from \"./ToolboxLayout.vue?vue&type=script&lang=ts\"\n\nimport \"./ToolboxLayout.vue?vue&type=style&index=0&id=1d9cc0f9&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { v4 as uuid } from 'uuid'\nimport ItemSubtype from '@/types/enums/ItemSubtype'\nimport ItemType from '@/types/enums/ItemType'\nimport itemFactory from './itemFactory'\nimport portFactory from './portFactory'\nimport Direction from '@/types/enums/Direction'\nimport PortType from '@/types/enums/PortType'\n\nconst inputFactory: ItemFactory = (type: ItemSubtype, width: number, height: number, properties: PropertySet = {}) => {\n  const elementId = uuid()\n  const ports = [\n    portFactory(elementId, uuid(), Direction.Right, PortType.Output, 'Output Port')\n  ]\n  const item = itemFactory(elementId, ItemType.InputNode, type, width, height, ports)\n\n  item.properties = {\n    ...properties,\n    startValue: {\n      label: 'Start value',\n      value: -1,\n      type: 'number',\n      options: {\n        'True': 1,\n        'Hi-Z': 0,\n        'False': -1\n      }\n    },\n  }\n\n  return { item, ports }\n}\n\nexport default inputFactory\n","import ItemSubtype from '@/types/enums/ItemSubtype'\nimport inputFactory from './inputFactory'\n\nconst clockFactory: ItemFactory = () => inputFactory(ItemSubtype.Clock, 60, 60, {\n  interval: {\n    label: 'Interval',\n    value: 1000,\n    type: 'number',\n    min: 100\n  }\n})\n\nexport default clockFactory\n","import { v4 as uuid } from 'uuid'\nimport ItemSubtype from '@/types/enums/ItemSubtype'\nimport ItemType from '@/types/enums/ItemType'\nimport itemFactory from './itemFactory'\nimport portFactory from './portFactory'\nimport Direction from '@/types/enums/Direction'\nimport PortType from '@/types/enums/PortType'\n\nexport default function lightbulbFactory () {\n  const elementId = uuid()\n  const ports = [\n    portFactory(elementId, uuid(), Direction.Left, PortType.Input, 'Input Port')\n  ]\n  const item = itemFactory(elementId, ItemType.OutputNode, ItemSubtype.Lightbulb, 40, 40, ports)\n\n  return { item, ports }\n}\n","import { v4 as uuid } from 'uuid'\nimport ItemSubtype from '@/types/enums/ItemSubtype'\nimport ItemType from '@/types/enums/ItemType'\nimport itemFactory from './itemFactory'\nimport portFactory from './portFactory'\n\nexport default function logicGateFactory (type: ItemSubtype, width: number, height: number) {\n  const elementId = uuid()\n  const ports = [\n    portFactory(elementId, uuid(), 0, 1, 'Input Port 1'),\n    portFactory(elementId, uuid(), 0, 1, 'Input Port 2'),\n    portFactory(elementId, uuid(), 2, 0, 'Output Port')\n  ]\n  const item = itemFactory(elementId, ItemType.LogicGate, type, width, height, ports)\n\n  item.properties = {\n    inputCount: {\n      label: 'Input count',\n      value: 2,\n      type: 'number',\n      min: 2\n    },\n    showInOscilloscope: {\n      label: 'Show in oscilloscope',\n      value: false,\n      type: 'boolean'\n    }\n  }\n\n  return { item, ports }\n}\n","import clockFactory from './clockFactory'\nimport inputFactory from './inputFactory'\nimport lightbulbFactory from './lightbulbFactory'\nimport logicGateFactory from './logicGateFactory'\nimport ItemType from '@/types/enums/ItemType'\nimport ItemSubtype from '@/types/enums/ItemSubtype'\n\ntype FactoryDictionary = {\n  [type: string]: {\n    [subtype: string]: ItemFactory\n  }\n}\n\nexport default {\n  [ItemType.InputNode]: {\n    [ItemSubtype.Switch]: inputFactory.bind(this, ItemSubtype.Switch, 60, 60),\n    [ItemSubtype.Clock]: clockFactory\n  },\n  [ItemType.OutputNode]: {\n    [ItemSubtype.Lightbulb]: lightbulbFactory\n  },\n  [ItemType.LogicGate]: {\n    [ItemSubtype.And]: logicGateFactory.bind(this, ItemSubtype.And, 140, 50),\n    [ItemSubtype.Nand]: logicGateFactory.bind(this, ItemSubtype.Nand, 140, 50),\n    [ItemSubtype.Xnor]: logicGateFactory.bind(this, ItemSubtype.Xnor, 140, 50),\n    [ItemSubtype.Nor]: logicGateFactory.bind(this, ItemSubtype.Nor, 140, 50),\n    [ItemSubtype.Or]: logicGateFactory.bind(this, ItemSubtype.Or, 140, 50)\n  }\n} as FactoryDictionary\n","import { render } from \"./Toolbox.vue?vue&type=template&id=1b00f894&ts=true\"\nimport script from \"./Toolbox.vue?vue&type=script&lang=ts\"\nexport * from \"./Toolbox.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./TabItem.vue?vue&type=template&id=0cb1a552&ts=true\"\nimport script from \"./TabItem.vue?vue&type=script&lang=ts\"\nexport * from \"./TabItem.vue?vue&type=script&lang=ts\"\n\nimport \"./TabItem.vue?vue&type=style&index=0&id=0cb1a552&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./TabHost.vue?vue&type=template&id=df89a472&ts=true\"\nimport script from \"./TabHost.vue?vue&type=script&lang=ts\"\nexport * from \"./TabHost.vue?vue&type=script&lang=ts\"\n\nimport \"./TabHost.vue?vue&type=style&index=0&id=df89a472&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./OscilloscopeTimeline.vue?vue&type=template&id=fc2278b6&ts=true\"\nimport script from \"./OscilloscopeTimeline.vue?vue&type=script&lang=ts\"\nexport * from \"./OscilloscopeTimeline.vue?vue&type=script&lang=ts\"\n\nimport \"./OscilloscopeTimeline.vue?vue&type=style&index=0&id=fc2278b6&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./OscilloscopeTitleBar.vue?vue&type=template&id=5bfaeb92&ts=true\"\nimport script from \"./OscilloscopeTitleBar.vue?vue&type=script&lang=ts\"\nexport * from \"./OscilloscopeTitleBar.vue?vue&type=script&lang=ts\"\n\nimport \"./OscilloscopeTitleBar.vue?vue&type=style&index=0&id=5bfaeb92&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./OscilloscopeViewer.vue?vue&type=template&id=e3956fc6&ts=true\"\nimport script from \"./OscilloscopeViewer.vue?vue&type=script&lang=ts\"\nexport * from \"./OscilloscopeViewer.vue?vue&type=script&lang=ts\"\n\nimport \"./OscilloscopeViewer.vue?vue&type=style&index=0&id=e3956fc6&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Oscilloscope.vue?vue&type=template&id=5aef69f2&ts=true\"\nimport script from \"./Oscilloscope.vue?vue&type=script&lang=ts\"\nexport * from \"./Oscilloscope.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./StatusBarButton.vue?vue&type=template&id=3ddd451b&ts=true\"\nimport script from \"./StatusBarButton.vue?vue&type=script&lang=ts\"\nexport * from \"./StatusBarButton.vue?vue&type=script&lang=ts\"\n\nimport \"./StatusBarButton.vue?vue&type=style&index=0&id=3ddd451b&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./StatusBarViewer.vue?vue&type=template&id=dc432b1a&ts=true\"\nimport script from \"./StatusBarViewer.vue?vue&type=script&lang=ts\"\nexport * from \"./StatusBarViewer.vue?vue&type=script&lang=ts\"\n\nimport \"./StatusBarViewer.vue?vue&type=style&index=0&id=dc432b1a&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./StatusBarZoom.vue?vue&type=template&id=2cb57bfb&ts=true\"\nimport script from \"./StatusBarZoom.vue?vue&type=script&lang=ts\"\nexport * from \"./StatusBarZoom.vue?vue&type=script&lang=ts\"\n\nimport \"./StatusBarZoom.vue?vue&type=style&index=0&id=2cb57bfb&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./StatusBar.vue?vue&type=template&id=cd242746&ts=true\"\nimport script from \"./StatusBar.vue?vue&type=script&lang=ts\"\nexport * from \"./StatusBar.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { MenuItemConstructorOptions } from 'electron/main'\nimport { useRootStore } from '@/store/root'\n\nexport default function file (): MenuItemConstructorOptions[] {\n  const rootStore = useRootStore()\n  const hasDocument = rootStore.activeDocumentId !== null\n  const documentList = Object.keys(rootStore.documents)\n  const store = rootStore.activeDocument?.store()\n  const items: MenuItemConstructorOptions[] = [\n    {\n      label: '&New Circuit',\n      accelerator: 'CommandOrControl+N',\n      click: rootStore.newDocument\n    },\n    { type: 'separator' },\n    {\n      label: '&Open Circuit',\n      accelerator: 'CommandOrControl+O',\n      click: rootStore.selectDocument\n    },\n    {\n      label: 'Open &Integrated Circuit',\n      accelerator: 'CommandOrControl+Shift+O',\n      click: rootStore.selectDocument\n    },\n    { type: 'separator' },\n    {\n      label: 'Save',\n      enabled: hasDocument,\n      accelerator: 'CommandOrControl+S',\n      click: () => rootStore.saveActiveDocument()\n    },\n    {\n      label: 'Save As...',\n      enabled: hasDocument,\n      accelerator: 'CommandOrControl+Shift+S',\n      click: () => rootStore.saveActiveDocument(true)\n    },\n    {\n      label: 'Save All',\n      enabled: hasDocument,\n      accelerator: 'CommandOrControl+Shift+A',\n      click: () => console.log('root store save all')\n    },\n    { type: 'separator' },\n    {\n      label: 'Print',\n      enabled: hasDocument,\n      accelerator: 'CommandOrControl+P',\n      click: () => store?.print()\n    },\n    { type: 'separator' },\n    {\n      label: 'Export...',\n      enabled: hasDocument,\n      submenu: [\n        {\n          label: 'Integrated Circuit',\n          accelerator: 'CommandOrControl+Shift+E',\n          click: () => console.log('export IC')\n        },\n        {\n          label: 'PNG Image',\n          accelerator: 'CommandOrControl+Shift+I',\n          click: () => store?.createImage()\n        }\n      ]\n    },\n    { type: 'separator' },\n    {\n      label: 'Preferences',\n      submenu: [\n        {\n          label: 'Global Preferences',\n          accelerator: 'CommandOrControl+,',\n          click: () => console.log('global prefs')\n        },\n        {\n          label: 'Document Preferences',\n          accelerator: 'CommandOrControl+Shift+,',\n          click: () => console.log('doc prefs')\n        }\n      ]\n    }\n  ]\n\n  if (Object.keys(rootStore.documents).length > 1) {\n    const submenu: MenuItemConstructorOptions[] = [\n      {\n        label: 'Previous File',\n        accelerator: 'Ctrl+Shift+Tab',\n        click: () => rootStore.switchDocument(-1)\n      },\n      {\n        label: 'Next File',\n        accelerator: 'Ctrl+Tab',\n        click: () => rootStore.switchDocument(1)\n      },\n      { type: 'separator' }\n    ]\n\n    for (let i = 0; i < documentList.length; i++) {\n      submenu.push({\n        type: \"checkbox\",\n        label: rootStore.documents[documentList[i]].displayName,\n        checked: rootStore.activeDocumentId === documentList[i],\n        click: () => rootStore.activateDocument(documentList[i])\n      })\n    }\n\n    items.push({ type: 'separator' })\n    items.push({\n      label: 'Switch to...',\n      submenu\n    })\n  }\n\n  items.push({ type: 'separator' })\n  items.push({\n    label: 'Close Document',\n    accelerator: 'CmdOrCtrl+W',\n    enabled: hasDocument,\n    click: () => rootStore.closeDocument(rootStore.activeDocumentId as string)\n  })\n\n  items.push({ type: 'separator' })\n  items.push({\n    label: 'Exit',\n    accelerator: 'CmdOrCtrl+Q',\n    click: () => window.close()\n  })\n\n  return items\n}\n","import { MenuItemConstructorOptions } from 'electron/main'\nimport { DocumentStore } from '@/store/document'\nimport grid from './grid'\n\nexport default function edit (useDocumentStore: DocumentStore): MenuItemConstructorOptions[] {\n  const store = useDocumentStore()\n  const zoomSubmenu: MenuItemConstructorOptions[] = []\n  let hasFixedZoom = false\n\n  for (let i = 1; i <= 8; i++) {\n    const zoom = (i * 25) / 100\n    const checked = store.zoomLevel === zoom\n\n    hasFixedZoom = hasFixedZoom || checked\n\n    zoomSubmenu.push({\n      type: 'checkbox',\n      checked,\n      label: `${zoom * 100}%`,\n      accelerator: zoom === 1 ? 'CommandOrControl+0' : undefined,\n      click: () => store.setZoom({ zoom })\n    })\n  }\n\n  if (!hasFixedZoom) {\n    zoomSubmenu.unshift({\n      type: 'checkbox',\n      checked: true,\n      label: 'Custom'\n    })\n  }\n\n  const menu: MenuItemConstructorOptions[] = [\n    {\n      label: '&Zoom In',\n      accelerator: 'CommandOrControl+=',\n      enabled: store.zoomLevel < 2, // TODO: const\n      click: () => store.incrementZoom(1)\n    },\n    {\n      label: '&Zoom Out',\n      accelerator: 'CommandOrControl+-',\n      enabled: store.zoomLevel > 0.1, // TODO: const\n      click: () => store.incrementZoom(-1)\n    },\n    {\n      label: '&Zoom...',\n      submenu: zoomSubmenu\n    },\n    { type: 'separator' },\n    {\n      label: '&Pan to Center',\n      accelerator: 'CommandOrControl+;',\n      click: store.panToCenter\n    },\n    { type: 'separator' }\n  ]\n\n  return menu.concat(grid(useDocumentStore))\n}\n","import { MenuItemConstructorOptions } from 'electron/main'\nimport { useRootStore } from '@/store/root'\nimport edit from './submenus/edit'\nimport file from './submenus/file'\nimport view from './submenus/view'\n\nexport default function createApplicationMenu () {\n  const store = useRootStore()\n  const menus: MenuItemConstructorOptions[] = [\n    {\n      label: 'File',\n      submenu: file()\n    }\n  ]\n\n  if (store.activeDocument) {\n    menus.push({\n      label: 'Edit',\n      submenu: edit(store.activeDocument.store)\n    })\n\n    menus.push({\n      label: 'View',\n      submenu: view(store.activeDocument.store).concat([\n        { type: 'separator' },\n        {\n          type: 'checkbox',\n          click: store.toggleFullscreen,\n          checked: store.isFullscreen,\n          accelerator: 'F11',\n          label: 'Fullscreen'\n        }\n      ])\n    })\n  }\n\n  return menus\n}\n","import { render } from \"./MainView.vue?vue&type=template&id=4f0058fe&ts=true\"\nimport script from \"./MainView.vue?vue&type=script&lang=ts\"\nexport * from \"./MainView.vue?vue&type=script&lang=ts\"\n\nimport \"./MainView.vue?vue&type=style&index=0&id=4f0058fe&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","const isMobile = true\n\nexport default false\n","import { render } from \"./App.vue?vue&type=template&id=2709d8a0&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=2709d8a0&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/aristotle/aristotle/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createPinia } from 'pinia'\nimport { createApp } from 'vue'\nimport App from '@/App.vue'\nimport '@/styles/main.scss'\n\nif (!window.api) {\n  // stub the ipc api for non-electron environments\n  // TODO: once the app is fully electron, move this to jest setup file\n  window.api = {\n    showContextMenu () {},\n    setApplicationMenu () {},\n    showOpenFileDialog () { return [] },\n    showSaveFileDialog () { return '' },\n    showMessageBox () { return 0 },\n    beep () {},\n    quit () {},\n    copy () {},\n    paste () { return '' },\n    onBeforeClose () {},\n    onOpenFile () {},\n    openFile () { return '' },\n    saveFile () {},\n    setFullscreen () {}\n  }\n}\n\ncreateApp(App)\n  .use(createPinia())\n  .mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t826: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkaristotle\"] = self[\"webpackChunkaristotle\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(2358); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_hoisted_1","key","_hoisted_2","render","_ctx","_cache","$props","$setup","$data","$options","_component_toolbar","_resolveComponent","_component_toolbox","_component_tab_item","_component_document","_component_tab_host","_component_oscilloscope","_component_status_bar","_component_main_view","_openBlock","_createElementBlock","_Fragment","_createElementVNode","class","_normalizeClass","isDropping","activeDocumentId","activeDocument","_createBlock","top","_withCtx","isMobile","_createCommentVNode","store","_createVNode","middle","_createSlots","default","onSwitch","switchDocument","onOpenIntegratedCircuit","openIntegratedCircuit","_","undefined","name","fn","_renderList","documents","document","id","label","displayName","active","dirty","isDirty","onActivate","$event","activateDocument","toString","onClose","closeDocument","bottom","isFullscreen","onFullscreen","toggleFullscreen","_toDisplayString","_component_item","_component_connection","_component_group","_component_editor","ref","zoom","zoomLevel","gridSize","tabindex","offset","x","canvas","left","y","width","right","height","onPan","panTo","onDeselect","deselectAll","onSelection","createSelection","onZoom","setZoom","onContextmenu","onContextMenu","onResize","setViewerSize","onFocus","recycleSelection","baseItems","baseItem","storeDefinition","isSelected","flash","isDebugging","isCircuitEvaluated","zIndex","$emit","connectionPreviewId","groups","group","boundingBox","_component_wire","_component_draggable","style","_normalizeStyle","position","onDragStart","onDrag","onDragEnd","onSelect","k","selectItem","deselectItem","source","target","geometry","isPreview","_component_resizable","onMousedown","onMouseDown","onMouseup","onMouseUp","onTouchstart","onTouchStart","onTouchmove","onTouchMove","onTouchend","onTouchEnd","onTouchcancel","dragEnd","_renderSlot","$slots","defineComponent","emits","setup","emit","resizable","onSizeChanged","getBoundingClientRect","observer","ResizeObserver","onMounted","value","observe","__exports__","components","Resizable","props","type","Object","Boolean","requiresSelectionToMove","computed","draggable","window","addEventListener","drag","onBeforeUnmount","removeEventListener","watchEffect","$el","focus","touchTimeout","isDragging","hasMoved","hasEmittedDragStart","clientX","clientY","dragStart","ctrlKey","setTimeout","clearTimeout","stopPropagation","preventDefault","touches","_hoisted_3","_hoisted_4","_hoisted_5","fill","transform","Math","abs","minX","minY","d","path","isAnimated","required","String","SnapMode","roundToNth","n","round","isInNeighborhood","a","b","radius","hypot","getGridSnapPosition","distance","getRadialSnapOffset","boundingBoxes","i","length","getOuterSnapOffset","ts","bs","ls","rs","getSnapOffset","snapMode","hasLinearIntersection","a1","a2","b1","b2","ccw","c","isLineIntersectingRectangle","b3","b4","hasIntersection","scaleBoundingBox","box","scale","isOneOrTwoDimensional","getLinearBoundaries","point","Infinity","getPointBoundary","getBoundingBox","rotation","midX","midY","getGroupBoundingBox","reduce","rect","min","max","getBoundingBoxMidpoint","getCenteredScreenPoint","parentBox","childBox","factor","parentMidpoint","childWidth","childHeight","getExtremePoint","points","map","Direction","rotate","additional","WIRE_PADDING","renderLayout","start","end","getEndpoints","computeStraightLine","sourceDirection","getPortDirection","targetDirection","computeBezier","inflectDirection","direction","port","orientation","isFreeport","floor","x1","y1","x4","y4","dx","dy","x2","toFixed","y2","x3","y3","join","toNumArr","parseInt","maxX","maxY","Draggable","Wire","Number","Function","connection","connections","root","ports","topLeft","boundaries","freeportId","groupId","opacity","uuid","createFreeport","itemId","inputPortId","outputPortId","connectionChainId","sourceId","targetId","setSnapBoundaries","dragItem","destroyConnection","_component_properties","_component_port_item","_component_circuit_component","item","outline","pointerEvents","onKeydown","_withKeys","onEscapeKey","commitCachedState","isPropertiesEnabled","properties","onUpdate","setProperties","setActivePortId","subtype","onChange","setPortValue","o","filter","p","ItemType","Freeport","connectedPortIds","hue","isMonitored","onKeypress","onBlur","onPortBlur","_resolveDynamicComponent","_mergeProps","index","model","_withModifiers","args","onInput","Array","change","data","inputCount","viewBox","cx","cy","r","isNegated","isXor","_component_or","Or","_component_and","And","Nor","Nand","Xnor","Xor","InputNode","IntegratedCircuit","LogicGate","OutputNode","role","_createTextVNode","_hoisted_6","_hoisted_7","_hoisted_8","isOpen","onKeyDown","onClick","propertyName","for","options","_withDirectives","_vModelSelect","_vModelCheckbox","_vModelDynamic","watch","handler","cloneDeep","deep","immediate","methods","_component_port_handle","_component_port_pivot","cycleConnectionPreviews","commitPreviewedConnection","activePortId","connectablePortIds","includes","onTouchhold","togglePortMonitoring","onDblclick","backgroundColor","PortType","PortHandle","PortPivot","newFreeport","draggedPortId","isAdded","unsetConnectionPreview","cachedState","setConnectablePortIds","portId","connectFreeport","ItemSubtype","CircuitComponent","PortItem","Properties","items","itemRef","portIds","selectedItemIds","cacheState","activeElement","blur","setItemSize","_component_selector","onMousewheel","onMouseWheel","onSelectionStart","onSelectionEnd","mousedown","selection","mounted","mousemove","mouseup","destroy","getPosition","Selector","panStartPosition","previousPosition","originalMousePosition","speed","angle","animationInterval","lastMouseMoveTime","isPanning","firstPinchDistance","originalScale","backgroundSize","startPanning","targetTouches","getTouchDistance","onMouseMove","pan","changedTouches","getTouchCenter","deltaX","deltaY","centerX","centerY","clearInterval","atan2","Date","now","endPanning","percent","lastDate","dampening","easeOutPanning","cos","sin","setInterval","hasPannedSubstantially","button","shiftKey","wheel","boundary","edit","useDocumentStore","submenus","menu","enabled","canUndo","accelerator","click","undo","hasSelection","deleteSelection","push","submenu","setZIndex","incrementZIndex","canGroup","canUngroup","concat","checked","grid","editor","createPrintArea","padding","className","printArea","cloneNode","children","child","replace","background","classList","add","createPrintFrame","image","pageSize","iframe","createElement","body","appendChild","printFrame","contentWindow","styleTag","createTextNode","s","head","append","async","createImage","dataUrl","domToImage","remove","printWindow","win","Promise","resolve","print","printImage","printing","minSize","maxSize","Image","src","isLandscape","reverse","Connection","constructor","node","this","LogicValue","TRUE","FALSE","UNKNOWN","CircuitNode","inputIds","newValue","eventType","events","forEach","event","callback","compare","values","inputValues","outputs","update","eval","queue","isValueChanged","updateOutputs","invokeEvent","forceContinue","propagate","Circuit","inputNodes","enqueue","nodes","inputIndex","findIndex","splice","removeNodeOutputs","next","sourceNode","targetNode","removeConnection","added","indexOf","removed","removedIndex","reset","localQueue","shift","dequeue","isComplete","nextValue","getProjectedValue","valueCount","Buffer","keys","pop","BinaryWaveService","signal","segment","lastY","addSegment","updateWidth","segments","initialize","elapsed","drawPulseConstant","previous","pos","widthToKeep","widthToTruncate","unshift","slice","ClockService","interval","TinyEmitter","emitter","on","lastUpdate","OscillationService","isPaused","remainingPeriodTime","lastUpdateTime","refreshRate","tick","waves","wave","displays","getPoints","screenWidth","screen","widthOfOneSecond","maxHistorySeconds","timeMsElapsed","timeMsOffset","truncateSegments","computeWaveGeometry","MAX_IDLE_TIME","hasUpdated","stop","delta","broadcast","requestAnimationFrame","hasOwnProperty","clear","getLogicGateNode","getCircuitNode","SimulationService","addNode","addConnection","valueMap","oscillogram","oscillator","iteration","circuit","shouldContinue","Error","step","isDebug","pause","computeNextState","advance","nextState","unpause","nextValues","nextValueMap","updatePortValue","JSON","parse","currentState","stringify","canContinue","setValue","drawPulseChange","anyValueChanged","enqueuePortValueChange","icItem","integratedCircuit","addIntegratedCircuit","outputIds","circuitNodeMapper","addPort","addClock","monitorPort","getIntegratedCircuitPortIds","ic","removeNode","removePort","clocks","setOutputValue","unmonitorPort","addElements","state","undoStack","redoStack","simulation","taxonomyCounts","oscilloscopeHeight","isOscilloscopeOpen","hasLoaded","isPrinting","isCreatingImage","isToolboxOpen","viewport","DOMRect","snapBoundaries","selectedConnectionIds","selectedPortIndex","activeFreeportId","mapStandardCircuitIds","idMap","mapGroups","oldId","newId","mapGroupIds","mapConnections","mapConnectionChainIds","mapItems","serializedState","mapItemIds","elementId","mapPorts","mapIntegratedCircuitIds","cut","copy","clipboardData","pasteCount","api","paste","parsed","mapped","idMapper","commitState","addItem","setSelectionState","connect","setGroupBoundingBox","error","console","log","setConnectionPreview","disconnect","previewPortId","beep","createConnection","find","sourceIndex","targetIndex","loadDocument","applyState","resetCircuit","clearStatelessInfo","toggleToolbox","itemFactory","portFactory","addFreeportItem","removeFreeport","originalSourceId","originalTargetId","removeElement","createCircuitConnection","setItemBoundingBox","newPort","destroyGroup","itemIds","connectionIds","ungroup","fromDocumentToEditorCoordinates","z","generateItemName","taxonomyCount","portList","taxonomy","resetItemValue","insertItemAtPosition","documentPosition","setItemPortPositions","property","startValue","setInputCount","count","oldCount","virtualElementId","panToCenter","midpoint","getConnectionChain","portMap","freeportIds","sourcePort","targetPort","Set","from","portIndex","random","setPortValues","getGroupedItemRotatedPosition","groupBoundingBox","w","h","mx","my","ax","ay","L","currentAngleRad","newAngle","PI","newAx","newAy","getRotatedPortPosition","spacing","centerAll","setItemPosition","portGroups","get","Map","setPortGroupPositions","setSelectionPosition","moveSelectionPosition","referenceItem","groupIds","selectedItems","newRotation","keepSelection","selectAll","updateSelectionList","selectItemConnections","element","backToFirstItem","nonFreeportItems","nonFreeportItemIds","f","buildCircuit","onSimulationUpdate","startDebugging","stepThroughCircuit","toggleDebugger","stopDebugging","toggleOscilloscope","closeOscilloscope","openOscilloscope","lastHeight","clearOscilloscope","MIN_SCALE","newX","newY","e","undoState","redo","redoState","savedState","parsedState","getExcludedMembers","aIds","bIds","removedItems","removedConnections","addedItems","addedConnections","sortByZIndex","sendBackward","bringForward","sendToBack","bringToFront","sort","frozenIds","currentIndex","nextIndex","MAX_SCALE","SCALE_STEP","incrementZoom","zoomedPoint","scaledPoint","viewportPoint","integratedCircuitFactory","integratedCircuitItem","portType","createDocumentStore","documentId","defineStore","getters","hasSelectedItems","selectedGroupIds","call","canRedo","actions","clipboardActions","connectionActions","editorActions","freeportActions","groupingActions","itemActions","panningActions","portActions","positioningActions","rotationActions","selectionActions","simulationActions","snappingActions","sizingActions","undoRedoActions","zIndexActions","zoomingActions","originalIcItem","$state","idMappedIcItem","FileService","filePath","zip","JSZip","compressedContent","openFile","files","loadAsync","content","blob","blobby","arrayBuffer","buf","saveFile","file","generateAsync","writeBlob","getFileName","split","useRootStore","clipboard","canExit","hasOpenDocuments","openDocument","partialName","fileName","showSaveFileDialog","extensions","showMessageBox","message","title","newDocument","closedSuccessfully","closeAll","printActiveDocument","isSuccessful","dialogResult","buttons","saveActiveDocument","remainingId","setFileName","save","showOpenFileDialog","openDocumentFromPath","open","documentIds","pauseActivity","resumeActivity","openTestDocuments","flipFlop","navigateDocumentList","setFullscreen","Group","Editor","Item","rootStore","acceleration","initiatePrint","editorElement","querySelector","exportImage","saveImage","onClipboard","action","HTMLInputElement","moveItemsByArrowKey","onKeyUp","showContextMenu","editorContextMenu","clearKeys","_component_toolbar_button","_component_toolbar_separator","_component_scroll_fade","icon","faScrewdriverWrench","text","faFolderOpen","faFile","faSave","disabled","faReply","faShare","faRotateForward","faObjectGroup","faObjectUngroup","faScissors","faCopy","faPaste","faBan","saveIntegratedCircuit","faMicrochip","faBug","faArrowsRotate","faForwardStep","faWaveSquare","_component_icon","isToolbox","faUser","xmlns","svgPath","Icon","hideScrollbar","gradientStyle","onScroll","scroll","getGradientStyle","scrollWidth","scrollLeft","clientWidth","modifiers","ToolbarButton","ToolbarSeparator","ScrollFade","faRotateBackward","_component_toolbox_item","_component_toolbox_layout","factories","factorySubtypes","factory","onDrop","drop","selectable","rects","preview","draggedElement","inner","outer","ratio","contains","categories","cat","selected","select","slots","toolbox","scrollHeight","categoryName","inputFactory","clockFactory","lightbulbFactory","logicGateFactory","showInOscilloscope","bind","ToolboxItem","ToolboxLayout","_component_oscilloscope_title_bar","_component_oscilloscope_timeline","_component_oscilloscope_viewer","modelValue","onCollapse","clearable","hasWaves","onClear","v","color","onWheel","totalWidth","preserveAspectRatio","stroke","timeline","$refs","list","scrollToNextInterval","onTimelineScroll","beforeUnmount","scrollTop","faClose","collapseHeight","viewer","originalY","currentY","parentElement","onUnmounted","OscilloscopeTimeline","OscilloscopeTitleBar","OscilloscopeViewer","_component_status_bar_button","_component_status_bar_zoom","_component_status_bar_viewer","faMinus","faPlus","zoomPercent","faCompress","faExpand","parseFloat","StatusBarButton","StatusBarViewer","StatusBarZoom","hasDocument","documentList","selectDocument","close","zoomSubmenu","hasFixedZoom","createApplicationMenu","menus","view","Document","Toolbar","TabItem","TabHost","Toolbox","Oscilloscope","StatusBar","MainView","storeToRefs","onDragOver","dataTransfer","dropEffect","onDragLeave","toUpperCase","location","reload","setApplicationMenu","onBeforeClose","onOpenFile","horizontal","lastPosition","toolboxWidth","quit","createApp","App","use","createPinia","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","loaded","__webpack_modules__","m","deferred","O","result","chunkIds","priority","notFulfilled","fulfilled","j","every","getter","__esModule","definition","defineProperty","enumerable","g","globalThis","obj","prop","prototype","Symbol","toStringTag","nmd","paths","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}