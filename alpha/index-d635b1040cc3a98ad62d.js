(function(e){function t(t){for(var o,c,s=t[0],a=t[1],u=t[2],d=0,p=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&p.push(i[c][0]),i[c]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);l&&l(t);while(p.length)p.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,s=1;s<n.length;s++){var a=n[s];0!==i[a]&&(o=!1)}o&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},i={app:0},r=[];function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/alpha/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],a=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=a;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"01d4":function(e,t,n){},"0440":function(e,t,n){},"08cf":function(e,t,n){},"09bf":function(e,t,n){"use strict";n("23b1")},"0bdc":function(e,t,n){"use strict";n("fcbe")},"11f9":function(e,t,n){},"13db":function(e,t,n){"use strict";n("6ae2")},1520:function(e,t,n){"use strict";n("60e8")},"21c0":function(e,t,n){"use strict";n("c444")},"23b1":function(e,t,n){},"296a":function(e,t,n){},"2a6d":function(e,t,n){"use strict";n("4079")},"2ff2":function(e){e.exports=JSON.parse('{"groups":{},"connections":{"switch1_nor1_conn":{"id":"switch1_nor1_conn","connectionChainId":"switch1_nor1_conn","source":"switchOutputPort1","target":"nor1InputPort1","isSelected":false,"groupId":null,"zIndex":7},"switch2_nor2_conn":{"id":"switch2_nor2_conn","connectionChainId":"switch2_nor2_conn","source":"switchOutputPort2","target":"nor2InputPort1","isSelected":false,"groupId":null,"zIndex":8},"nor1_nor2_conn":{"id":"nor1_nor2_conn","connectionChainId":"nor1_nor2_conn","source":"nor1OutputPort1","target":"nor2InputPort2","isSelected":false,"groupId":null,"zIndex":9},"nor2_nor1_conn":{"id":"nor2_nor1_conn","connectionChainId":"nor2_nor1_conn","source":"nor2OutputPort1","target":"nor1InputPort2","isSelected":false,"groupId":null,"zIndex":10},"nor1_lightbulb1_conn":{"id":"nor1_lightbulb1_conn","connectionChainId":"nor1_lightbulb1_conn","source":"nor1OutputPort1","target":"lightbulbInputPort1","isSelected":false,"groupId":null,"zIndex":11},"nor2_lightbulb2_conn":{"id":"nor2_lightbulb2_conn","connectionChainId":"nor2_lightbulb2_conn","source":"nor2OutputPort1","target":"lightbulbInputPort2","isSelected":false,"groupId":null,"zIndex":12}},"ports":{"nor1InputPort1":{"id":"nor1InputPort1","elementId":"nor1","name":"Input Port 1","connectedPortIds":[],"position":{"x":0,"y":0},"type":1,"rotation":0,"orientation":0,"value":0,"isFreeport":false},"nor1InputPort2":{"id":"nor1InputPort2","elementId":"nor1","name":"Input Port 2","connectedPortIds":[],"position":{"x":0,"y":0},"type":1,"rotation":0,"orientation":0,"value":0,"isFreeport":false},"nor1OutputPort1":{"id":"nor1OutputPort1","elementId":"nor1","name":"Output Port","connectedPortIds":[],"position":{"x":0,"y":0},"type":0,"rotation":0,"orientation":2,"value":0,"isFreeport":false},"nor2InputPort1":{"id":"nor2InputPort1","elementId":"nor2","name":"Input Port 1","connectedPortIds":[],"position":{"x":0,"y":0},"type":1,"rotation":0,"orientation":0,"value":0,"isFreeport":false},"nor2InputPort2":{"id":"nor2InputPort2","elementId":"nor2","name":"Input Port 2","connectedPortIds":[],"position":{"x":0,"y":0},"type":1,"rotation":0,"orientation":0,"value":0,"isFreeport":false},"nor2OutputPort1":{"id":"nor2OutputPort1","elementId":"nor2","name":"Output Port","connectedPortIds":[],"position":{"x":0,"y":0},"type":0,"rotation":0,"orientation":2,"value":0,"isFreeport":false},"switchOutputPort1":{"id":"switchOutputPort1","elementId":"switch1","name":"Output Port","connectedPortIds":[],"position":{"x":0,"y":0},"type":0,"rotation":0,"orientation":2,"value":0,"isFreeport":false},"switchOutputPort2":{"id":"switchOutputPort2","elementId":"switch2","name":"Output Port","connectedPortIds":[],"position":{"x":0,"y":0},"type":0,"rotation":0,"orientation":2,"value":0,"isFreeport":false},"lightbulbInputPort1":{"id":"lightbulbInputPort1","elementId":"lightbulb1","name":"Input Port","connectedPortIds":[],"position":{"x":0,"y":0},"type":1,"rotation":0,"orientation":0,"value":0,"isFreeport":false},"lightbulbInputPort2":{"id":"lightbulbInputPort2","elementId":"lightbulb2","name":"Input Port","connectedPortIds":[],"position":{"x":0,"y":0},"type":1,"rotation":0,"orientation":0,"value":0,"isFreeport":false}},"items":{"nor1":{"id":"nor1","type":"LogicGate","subtype":"Nor","portIds":["nor1InputPort1","nor1InputPort2","nor1OutputPort1"],"position":{"x":300,"y":300},"boundingBox":{"left":0,"top":0,"right":0,"bottom":0},"rotation":0,"isSelected":false,"properties":{"inputCount":{"label":"Input count","value":2,"type":"number","min":2},"showInOscilloscope":{"label":"Show in oscilloscope","value":true,"type":"boolean"}},"groupId":null,"zIndex":1,"width":100,"height":150},"nor2":{"id":"nor2","type":"LogicGate","subtype":"Nor","portIds":["nor2InputPort2","nor2InputPort1","nor2OutputPort1"],"position":{"x":300,"y":500},"boundingBox":{"left":0,"top":0,"right":0,"bottom":0},"rotation":0,"isSelected":false,"properties":{"inputCount":{"label":"Input count","value":2,"type":"number","min":2},"showInOscilloscope":{"label":"Show in oscilloscope","value":true,"type":"boolean"}},"groupId":null,"zIndex":2,"width":120,"height":51},"switch1":{"id":"switch1","type":"InputNode","subtype":"Clock","portIds":["switchOutputPort1"],"position":{"x":100,"y":300},"boundingBox":{"left":0,"top":0,"right":0,"bottom":0},"rotation":0,"isSelected":false,"properties":{"name":{"label":"Name","value":"","type":"text"},"startValue":{"label":"Start value","value":-1,"type":"number","options":{"True":1,"Hi-Z":0,"False":-1}},"showInOscilloscope":{"label":"Show in oscilloscope","value":true,"type":"boolean"}},"groupId":null,"zIndex":3,"width":40,"height":40},"switch2":{"id":"switch2","type":"InputNode","subtype":"Switch","portIds":["switchOutputPort2"],"position":{"x":100,"y":500},"boundingBox":{"left":0,"top":0,"right":0,"bottom":0},"rotation":0,"isSelected":false,"properties":{"name":{"label":"Name","value":"","type":"text"},"startValue":{"label":"Start value","value":1,"type":"number","options":{"True":1,"Hi-Z":0,"False":-1}},"showInOscilloscope":{"label":"Show in oscilloscope","value":true,"type":"boolean"}},"groupId":null,"zIndex":4,"width":40,"height":40},"lightbulb1":{"id":"lightbulb1","type":"OutputNode","subtype":"Lightbulb","portIds":["lightbulbInputPort1"],"position":{"x":700,"y":300},"boundingBox":{"left":0,"top":0,"right":0,"bottom":0},"rotation":0,"isSelected":false,"properties":{"name":{"label":"Name","value":"","type":"text"},"showInOscilloscope":{"label":"Show in oscilloscope","value":true,"type":"boolean"}},"groupId":null,"zIndex":5,"width":40,"height":40},"lightbulb2":{"id":"lightbulb2","type":"OutputNode","subtype":"Lightbulb","portIds":["lightbulbInputPort2"],"position":{"x":700,"y":500},"boundingBox":{"left":0,"top":0,"right":0,"bottom":0},"rotation":0,"isSelected":false,"properties":{"name":{"label":"Name","value":"","type":"text"},"showInOscilloscope":{"label":"Show in oscilloscope","value":true,"type":"boolean"}},"groupId":null,"zIndex":6,"width":40,"height":40}}}')},"33f2":function(e,t,n){"use strict";n("01d4")},3752:function(e,t,n){"use strict";n("66e4")},4079:function(e,t,n){},"43e4":function(e,t,n){"use strict";n("7ad5")},"4ce7":function(e,t,n){"use strict";n("efb6")},"52da":function(e,t,n){},"54f0":function(e,t,n){},"60c5":function(e,t,n){"use strict";n("c4b6")},"60e8":function(e,t,n){},"63e8":function(e,t,n){"use strict";n("c2d1")},"66e4":function(e,t,n){},"6aa5":function(e,t,n){"use strict";n("91a4")},"6ae2":function(e,t,n){},"6eb2":function(e,t,n){},"6f3d":function(e,t,n){"use strict";n("6eb2")},"71e9":function(e,t,n){},"78ec":function(e,t,n){"use strict";n("52da")},"7ad5":function(e,t,n){},"83e9":function(e,t,n){"use strict";n("9a23")},"8f6c":function(e,t,n){"use strict";n("296a")},9001:function(e,t,n){"use strict";n("ab0b")},"91a4":function(e,t,n){},"92b5":function(e,t,n){"use strict";n("0440")},"9a23":function(e,t,n){},"9b9f":function(e,t,n){},ab0b:function(e,t,n){},acf4:function(e,t,n){"use strict";n("d00e")},af3c:function(e,t,n){},bdf0:function(e,t,n){"use strict";n("08cf")},c043:function(e,t,n){"use strict";n("71e9")},c2d1:function(e,t,n){},c444:function(e,t,n){},c4b6:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("9531"),n("26d3"),n("2007"),n("41ab");var o=n("e187"),i=n("4430"),r=(n("ef1f"),n("0d9f"),{key:0,class:"app"}),c={class:"app__toolbar"},s={class:"app__bottom",ref:"bottom"},a={key:1};function u(e,t,n,o,u,l){var d=Object(i["resolveComponent"])("toolbar"),p=Object(i["resolveComponent"])("tab-item"),f=Object(i["resolveComponent"])("document"),h=Object(i["resolveComponent"])("tab-host"),m=Object(i["resolveComponent"])("oscilloscope"),b=Object(i["resolveComponent"])("resizable-panes");return e.hasOpenDocuments?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",r,[Object(i["createElementVNode"])("div",c,[e.activeDocumentId&&e.activeDocument?(Object(i["openBlock"])(),Object(i["createBlock"])(d,{key:e.activeDocumentId,store:e.activeDocument.store},null,8,["store"])):Object(i["createCommentVNode"])("",!0)]),Object(i["createElementVNode"])("div",s,[Object(i["createVNode"])(b,{modelValue:e.toolboxWidth,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.toolboxWidth=t})},{first:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(" toolbox "+Object(i["toDisplayString"])(e.toolboxWidth)+"% wide ",1)]})),second:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(b,{modelValue:e.documentHeight,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.documentHeight=t}),"is-vertical":!0},{first:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(h,null,{tabs:Object(i["withCtx"])((function(){return[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.documents,(function(t,n){return Object(i["openBlock"])(),Object(i["createBlock"])(p,{key:n,label:t.displayName,active:e.activeDocumentId===n,dirty:t.store().isDirty,onActivate:function(t){return e.activateDocument(n.toString())},onClose:function(t){return e.closeDocument(n.toString())}},null,8,["label","active","dirty","onActivate","onClose"])})),128))]})),default:Object(i["withCtx"])((function(){return[e.activeDocumentId&&e.activeDocument?(Object(i["openBlock"])(),Object(i["createBlock"])(f,{key:e.activeDocumentId,store:e.activeDocument.store,onSwitch:e.switchDocument,onOpenIntegratedCircuit:e.openIntegratedCircuit},null,8,["store","onSwitch","onOpenIntegratedCircuit"])):Object(i["createCommentVNode"])("",!0)]})),_:1})]})),second:Object(i["withCtx"])((function(){return[e.activeDocumentId&&e.activeDocument?(Object(i["openBlock"])(),Object(i["createBlock"])(m,{key:e.activeDocumentId,store:e.activeDocument.store},null,8,["store"])):Object(i["createCommentVNode"])("",!0)]})),_:1},8,["modelValue"])]})),_:1},8,["modelValue"])],512)])):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",a," no documents open "))}n("868d");function l(e,t,n,o,r,c){var s=Object(i["resolveComponent"])("item"),a=Object(i["resolveComponent"])("connection"),u=Object(i["resolveComponent"])("group"),l=Object(i["resolveComponent"])("editor");return Object(i["openBlock"])(),Object(i["createBlock"])(l,{ref:"editor",zoom:e.store.zoomLevel,"grid-size":e.gridSize,tabindex:0,onDeselect:e.store.deselectAll,onSelection:e.store.createSelection,onZoom:e.store.setZoom,onContextmenu:e.onContextMenu,onMousedown:e.store.deselectAll},{default:Object(i["withCtx"])((function(){return[Object(i["createElementVNode"])("div",{tabindex:0,onFocus:t[0]||(t[0]=function(t){return e.store.recycleSelection(!1)})},null,32),(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.store.baseItems,(function(t,n){return Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],null,[t.type?(Object(i["openBlock"])(),Object(i["createBlock"])(s,{store:e.storeDefinition,id:t.id,key:t.id,"port-ids":t.portIds,type:t.type,subtype:t.subtype,name:t.name,position:t.position,rotation:t.rotation,"group-id":t.groupId,"bounding-box":t.boundingBox,properties:t.properties,"is-selected":t.isSelected,"z-index":t.zIndex+1e3,onSelect:function(n){return e.selectItem(t.id)},onDeselect:function(n){return e.deselectItem(t.id)},onContextmenu:e.onContextMenu,onOpenIntegratedCircuit:function(n){return e.$emit("openIntegratedCircuit",t)}},null,8,["store","id","port-ids","type","subtype","name","position","rotation","group-id","bounding-box","properties","is-selected","z-index","onSelect","onDeselect","onContextmenu","onOpenIntegratedCircuit"])):(Object(i["openBlock"])(),Object(i["createBlock"])(a,{store:e.storeDefinition,id:t.id,key:n,"source-id":t.source,"target-id":t.target,"group-id":t.groupId,"connection-chain-id":t.connectionChainId,"is-selected":t.isSelected,"is-preview":e.store.connectionPreviewId===t.id,"z-index":t.zIndex,onSelect:function(n){return e.selectItem(t.id)},onDeselect:function(n){return e.deselectItem(t.id)},onContextmenu:e.onContextMenu},null,8,["store","id","source-id","target-id","group-id","connection-chain-id","is-selected","is-preview","z-index","onSelect","onDeselect","onContextmenu"]))],64)})),256)),Object(i["createElementVNode"])("div",{tabindex:0,onFocus:t[1]||(t[1]=function(t){return e.store.recycleSelection(!0)})},null,32),(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.store.groups,(function(t){return Object(i["openBlock"])(),Object(i["createBlock"])(u,{key:t.id,id:t.id,"bounding-box":t.boundingBox,"is-selected":t.isSelected,"z-index":e.store.zIndex,zoom:e.store.zoom},null,8,["id","bounding-box","is-selected","z-index","zoom"])})),128))]})),_:1},8,["zoom","grid-size","onDeselect","onSelection","onZoom","onContextmenu","onMousedown"])}var d=n("0b38"),p=n("ce37");function f(e,t,n,o,r,c){var s=Object(i["resolveComponent"])("selector");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{onContextmenu:t[0]||(t[0]=function(t){return e.contextMenu(t)}),onMousewheel:t[1]||(t[1]=function(){return e.mousewheel&&e.mousewheel.apply(e,arguments)}),onMousedown:t[2]||(t[2]=Object(i["withModifiers"])((function(){return e.startPanning&&e.startPanning.apply(e,arguments)}),["right"])),class:"editor"},[Object(i["createElementVNode"])("div",{style:Object(i["normalizeStyle"])(e.style),ref:"editor",class:"editor__grid"},[Object(i["createVNode"])(s,{zoom:e.zoom,onSelectionStart:e.selectionStart,onSelectionEnd:e.selectionEnd},null,8,["zoom","onSelectionStart","onSelectionEnd"]),Object(i["renderSlot"])(e.$slots,"default")],4)],32)}n("e94e"),n("d86f");function h(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{onMousedown:t[0]||(t[0]=Object(i["withModifiers"])((function(){return e.mousedown&&e.mousedown.apply(e,arguments)}),["left","self"])),class:"selector"},[e.selection?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:0,style:Object(i["normalizeStyle"])(e.style),ref:"selection",class:"selector__selection"},null,4)):Object(i["createCommentVNode"])("",!0)],32)}var m=Object(i["defineComponent"])({name:"Selector",props:{zoom:{type:Number,default:1}},data:function(){return{selection:!1,start:{x:0,y:0},end:{x:0,y:0}}},computed:{style:function(){var e=Math.min(this.start.x,this.end.x),t=Math.min(this.start.y,this.end.y),n=Math.abs(this.start.x-this.end.x),o=Math.abs(this.start.y-this.end.y);return{left:"".concat(e,"px"),top:"".concat(t,"px"),width:"".concat(n,"px"),height:"".concat(o,"px")}}},mounted:function(){window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)},destroy:function(){window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)},methods:{getPosition:function(e){var t=this.$el.getBoundingClientRect(),n=t.top,o=t.left,i=(e.x-o)/this.zoom,r=(e.y-n)/this.zoom;return{x:i,y:r}},mousedown:function(e){var t=this.getPosition(e);this.selection=!0,this.start=t,this.end=t,this.$emit("selectionStart",e)},mousemove:function(e){this.selection&&(this.end=this.getPosition(e))},mouseup:function(){this.selection&&(this.createSelection(),this.selection=!1,this.start.x=0,this.start.y=0,this.end.x=0,this.end.y=0)},createSelection:function(){var e=Math.min(this.start.x,this.end.x),t=Math.min(this.start.y,this.end.y),n=Math.abs(this.start.x-this.end.x),o=Math.abs(this.start.y-this.end.y);this.$emit("selectionEnd",{left:e,top:t,bottom:o+t,right:e+n})}}}),b=(n("c043"),n("ee5a")),v=n.n(b);const g=v()(m,[["render",h]]);var O=g,y=Object(i["defineComponent"])({name:"Editor",components:{Selector:O},props:{zoom:{type:Number,default:1},gridSize:{type:Number,default:0}},computed:{style:function(){return{backgroundSize:"".concat(this.gridSize,"px ").concat(this.gridSize,"px"),transform:"scale(".concat(this.zoom,")"),left:"".concat(this.offset.x,"px"),top:"".concat(this.offset.y,"px")}}},data:function(){return{offset:{x:0,y:0},panStartPosition:{x:0,y:0},panning:!1,preventContextMenu:!1}},mounted:function(){window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)},destroy:function(){window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)},methods:{contextMenu:function(e){this.preventContextMenu&&(this.preventContextMenu=!1,e.preventDefault(),e.stopPropagation())},startPanning:function(e){this.panning=!0,this.panStartPosition={x:e.x-this.offset.x,y:e.y-this.offset.y}},mousemove:function(e){this.panning&&(this.offset={x:Math.min(e.x-this.panStartPosition.x,0),y:Math.min(e.y-this.panStartPosition.y,0)})},mouseup:function(e){2!==e.button||this.panStartPosition.x===e.x&&this.panStartPosition.y===e.y||(this.preventContextMenu=!0),this.panning=!1,this.panStartPosition={x:0,y:0}},mousewheel:function(e){if(e.shiftKey){var t=this.zoom+e.deltaY/1e3,n=this.fromDocumentToEditorCoordinates({x:e.x,y:e.y}),o={x:n.x*t,y:n.y*t};this.offset={x:Math.min(n.x-o.x,0),y:Math.min(n.y-o.y,0)},this.$emit("zoom",t)}},selectionStart:function(e){e.shiftKey||this.$emit("deselect")},selectionEnd:function(e){this.$emit("selection",e)},fromDocumentToEditorCoordinates:function(e){var t=this.$refs.editor,n=t.getBoundingClientRect(),o=n.x,i=n.y;return{x:(e.x-o)/this.zoom,y:(e.y-i)/this.zoom}}}});n("1520");const j=v()(y,[["render",f]]);var I=j;function x(e,t,n,o,r,c){var s=Object(i["resolveComponent"])("draggable");return Object(i["openBlock"])(),Object(i["createBlock"])(s,{tabindex:-1,position:{x:e.boundingBox.left,y:e.boundingBox.top},style:Object(i["normalizeStyle"])({width:"".concat(e.boundingBox.right-e.boundingBox.left,"px"),height:"".concat(e.boundingBox.bottom-e.boundingBox.top,"px"),zIndex:e.zIndex}),zoom:e.zoom,"bounding-box":e.boundingBox},{default:Object(i["withCtx"])((function(){return[Object(i["createElementVNode"])("div",{class:Object(i["normalizeClass"])([{"group--is-selected":e.isSelected},"group"])},null,2)]})),_:1},8,["position","style","zoom","bounding-box"])}function w(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{style:Object(i["normalizeStyle"])(e.style),onMousedown:t[0]||(t[0]=function(){return e.mousedown&&e.mousedown.apply(e,arguments)})},[Object(i["renderSlot"])(e.$slots,"default")],36)}n("fa8c");var C=Object(i["defineComponent"])({name:"Draggable",props:{position:{type:Object,default:function(){return{x:0,y:0}}},zoom:{type:Number,default:1},snapMode:{type:String,default:"outer"},snapBoundaries:{type:Array,default:function(){return[]}},boundingBox:{type:Object,default:function(){return{left:0,top:0,right:0,bottom:0}}},isDraggable:{type:Boolean,default:!0},forceDragging:{type:Boolean,default:!1},lockVisual:{type:Boolean,default:!1}},data:function(){return{mousePosition:{x:0,y:0},apparentPosition:{x:0,y:0},truePosition:{x:0,y:0},realPositionFromStore:{x:0,y:0},box:{left:0,top:0,right:0,bottom:0},isDragging:!1,isRadialSnap:!1}},watch:{position:{handler:function(e){this.realPositionFromStore=e,this.isDragging||(this.truePosition=e)},immediate:!0},boundingBox:{handler:function(){this.isDragging||(this.apparentPosition=this.truePosition)}},forceDragging:{handler:function(e){if(e){var t=this.$el.getBoundingClientRect(),n=t.top,o=t.left;this.initDragging(o,n)}}}},computed:{style:function(){return this.lockVisual?{}:{position:"absolute",pointerEvents:"none",left:"".concat(this.apparentPosition.x||this.truePosition.x,"px"),top:"".concat(this.apparentPosition.y||this.truePosition.y,"px")}}},mounted:function(){document.addEventListener("mousemove",this.mousemove),document.addEventListener("mouseup",this.mouseup)},beforeUnmount:function(){document.removeEventListener("mousemove",this.mousemove),document.removeEventListener("mouseup",this.mouseup)},methods:{initDragging:function(e,t){this.isDraggable&&(this.mousePosition={x:e,y:t},this.box={left:this.boundingBox.left,top:this.boundingBox.top,right:this.boundingBox.right,bottom:this.boundingBox.bottom},this.apparentPosition={x:this.truePosition.x,y:this.truePosition.y},this.isDragging=!0,this.$emit("dragStart"))},getScaledDelta:function(e){return{x:(e.x-this.mousePosition.x)/this.zoom,y:(e.y-this.mousePosition.y)/this.zoom}},mousedown:function(e){e.preventDefault(),e.stopPropagation(),this.initDragging(e.clientX,e.clientY)},mousemove:function(e){var t=this;if(this.isDragging&&this.isDraggable){var n=this.getScaledDelta(e),o=15;this.box={left:this.box.left+n.x,top:this.box.top+n.y,right:this.box.right+n.x,bottom:this.box.bottom+n.y};var i=this.box,r=this.snapBoundaries,c={x:0,y:0},s=null;r.forEach((function(e){if("radius"===t.snapMode){var n=Math.sqrt(Math.pow(e.left-i.left,2)+Math.pow(e.top-i.top,2))<=o;if(n)return c.x=e.left-i.left,c.y=e.top-i.top,void(s={x:e.left,y:e.top})}var r=Math.abs(e.top-i.bottom)<=o,a=Math.abs(e.bottom-i.top)<=o,u=Math.abs(e.left-i.right)<=o,l=Math.abs(e.right-i.left)<=o;(i.left<=e.right&&i.left>=e.left||i.right>=e.left&&i.right<=e.right||i.left<=e.left&&i.right>=e.right)&&(r&&(c.y=e.top-i.bottom),a&&(c.y=e.bottom-i.top)),(i.top<=e.bottom&&i.top>=e.top||i.bottom>=e.top&&i.bottom<=e.bottom||i.top<=e.top&&i.bottom>=e.bottom)&&(u&&(c.x=e.left-i.right),l&&(c.x=e.right-i.left))})),this.mousePosition={x:e.clientX,y:e.clientY},this.apparentPosition={x:this.truePosition.x+n.x+c.x,y:this.truePosition.y+n.y+c.y},this.truePosition={x:this.truePosition.x+n.x,y:this.truePosition.y+n.y},s?this.$emit("drag",s):this.$emit("drag",{x:this.apparentPosition.x,y:this.apparentPosition.y})}},mouseup:function(e){this.isDraggable&&(this.isDragging=!1,this.truePosition=this.realPositionFromStore,this.$emit("dragEnd",{delta:this.getScaledDelta(e)}))}}});const k=v()(C,[["render",w]]);var S=k,B=Object(i["defineComponent"])({name:"Group",components:{Draggable:S},props:{boundingBox:{type:Object,required:!0},id:{type:String,required:!0},isSelected:{type:Boolean,default:!1},zIndex:{type:Number,default:0},zoom:{type:Number,default:1}}});n("60c5");const P=v()(B,[["render",x]]);var E=P;function N(e,t,n,o,r,c){var s=Object(i["resolveComponent"])("wire");return Object(i["openBlock"])(),Object(i["createBlock"])(s,{style:Object(i["normalizeStyle"])({zIndex:e.zIndex}),source:e.source,target:e.target,"top-left":e.topLeft,"bottom-right":e.bottomRight,"is-selected":e.isSelected,"aria-selected":e.isSelected,"is-preview":e.isPreview,label:"TODO",tabindex:0,onMousedown:e.onMouseDown,onFocus:e.onFocus,ref:"root","data-test":"wire"},null,8,["style","source","target","top-left","bottom-right","is-selected","aria-selected","is-preview","onMousedown","onFocus"])}var D=n("ec26"),_=["width","height"],V=["transform","d"],M=["transform","d"],z=["transform","d"],T=["transform","d"];function F(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",{class:Object(i["normalizeClass"])(["wire",{"wire--selected":e.isSelected,"wire--preview":e.isPreview}]),width:e.wire.width,height:e.wire.height,style:Object(i["normalizeStyle"])({top:"".concat(e.topLeft.y+e.wire.minY,"px"),left:"".concat(e.topLeft.x+e.wire.minX,"px")})},[Object(i["createElementVNode"])("title",null,Object(i["toDisplayString"])(e.label),1),Object(i["createElementVNode"])("path",{class:"wire__outline",fill:"none",transform:"translate(".concat(Math.abs(e.wire.minX),", ").concat(Math.abs(e.wire.minY),")"),d:e.wire.path},null,8,V),Object(i["createElementVNode"])("path",{class:Object(i["normalizeClass"])(["wire__display",{"wire__display--on":1===e.source.value,"wire__display--off":-1===e.source.value}]),fill:"none",transform:"translate(".concat(Math.abs(e.wire.minX),", ").concat(Math.abs(e.wire.minY),")"),d:e.wire.path},null,10,M),e.isAnimated?(Object(i["openBlock"])(),Object(i["createElementBlock"])("path",{key:0,class:"wire__animation",fill:"none",transform:"translate(".concat(Math.abs(e.wire.minX),", ").concat(Math.abs(e.wire.minY),")"),d:e.wire.path},null,8,z)):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("path",{class:"wire__clickable",fill:"none",transform:"translate(".concat(Math.abs(e.wire.minX),", ").concat(Math.abs(e.wire.minY),")"),d:e.wire.path},null,8,T)],14,_)}var L=n("7c6c");n("11fd"),n("ef14"),n("cfce");function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(e+t%4+4)%4}var R=15;function q(e,t){var n=e.position,o=t.position,i=K(n,o),r=i.start,c=i.end;if(r.x===c.x||r.y===c.y||c.x<=1&&r.x<=1||c.y<=1&&r.y<=1)return U(r,c);var s=G(e,n,o),a=G(t,n,o);return W(s,a,r,c)}function U(e,t){return{path:"M ".concat(e.x,",").concat(e.y," L ").concat(t.x,",").concat(t.y),width:Math.abs(e.x-t.x)+R,height:Math.abs(e.y-t.y)+R,minX:-R/2,minY:-R/2}}function $(e,t,n){switch(e){case 0:return t.y>n.y?2:0;case 1:return t.x<n.x?3:1;case 2:return t.y>n.y?0:2;case 3:return t.x<n.x?1:3;default:return $(A(e),t,n)}}function G(e,t,n){var o=A(e.orientation+e.rotation-1);return e.isFreeport&&(o=$(o,t,n),e.rotation%4!==1&&e.rotation%4!==2||(o=A(o-2))),o}function K(e,t){return e.x<=t.x?e.y<=t.y?{start:{x:0,y:0},end:{x:Math.floor(t.x-e.x),y:Math.floor(t.y-e.y)}}:{start:{x:0,y:Math.floor(e.y-t.y)},end:{x:Math.floor(t.x-e.x),y:0}}:e.y<=t.y?{start:{x:Math.floor(e.x-t.x),y:0},end:{x:0,y:Math.floor(t.y-e.y)}}:{start:{x:Math.floor(e.x-t.x),y:Math.floor(e.y-t.y)},end:{x:0,y:0}}}function W(e,t,n,o){var i=n.x,r=n.y,c=o.x,s=o.y,a=Math.max(Math.abs(i-c)/2,10),u=Math.max(Math.abs(r-s)/2,10),l=[i,i+a,i,i-a][e].toFixed(3),d=[r-u,r,r+u,r][e].toFixed(3),p=[c,c+a,c,c-a][t].toFixed(3),f=[s-u,s,s+u,s][t].toFixed(3),h=["M",i.toFixed(3),r.toFixed(3),"C",l,d,p,f,c.toFixed(3),s.toFixed(3)].join(" "),m=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((function(e){return parseInt(e,10)}))},b=Math.min.apply(Math,Object(L["a"])(m(i,l,p,c)))-R/2,v=Math.max.apply(Math,Object(L["a"])(m(i,l,p,c)))+R/2,g=Math.min.apply(Math,Object(L["a"])(m(r,d,f,s)))-R/2,O=Math.max.apply(Math,Object(L["a"])(m(r,d,f,s)))+R/2,y=v-b+R,j=O-g+R;return{width:y,height:j,path:h,minX:b,minY:g}}var X=Object(i["defineComponent"])({name:"Wire",props:{isAnimated:{type:Boolean,default:!1},source:{type:Object,required:!0},target:{type:Object,required:!0},topLeft:{type:Object,required:!0},bottomRight:{type:Object,required:!0},label:{type:String,default:""},isPreview:{type:Boolean,default:!1},isSelected:{type:Boolean,default:!1}},computed:{wire:function(){return q(this.source,this.target)}}});n("0bdc");const Z=v()(X,[["render",F]]);var Y=Z,H=Object(i["defineComponent"])({name:"Connection",components:{Wire:Y},props:{sourceId:{type:String,required:!0},targetId:{type:String,required:!0},groupId:{type:String,default:null},connectionChainId:{type:String,default:null},isSelected:{type:Boolean,default:!1},isPreview:{type:Boolean,default:!1},id:{type:String,required:!0},zIndex:{type:Number,default:0},store:{type:Function,required:!0}},watch:{isSelected:function(e){e&&this.$el.focus()}},setup:function(e,t){var n=t.emit,o=e.store(),r=Object(i["ref"])(),c=Object(i["computed"])((function(){return o.ports[e.sourceId]})),s=Object(i["computed"])((function(){return o.ports[e.targetId]})),a=Object(i["computed"])((function(){var e=c.value.position,t=s.value.position,n=Math.min(e.x,t.x),o=Math.min(e.y,t.y);return{x:n,y:o}})),u=Object(i["computed"])((function(){var e=c.value.position,t=s.value.position,n=Math.max(e.x,t.x),o=Math.max(e.y,t.y);return{x:n,y:o}}));Object(i["onMounted"])((function(){window.addEventListener("mousemove",m),window.addEventListener("mouseup",b)})),Object(i["onBeforeUnmount"])((function(){window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",b)}));var l={itemId:"",inputPortId:"",outputPortId:"",connectionChainId:e.id,value:0,sourceId:"",targetId:"",position:{}},d={x:0,y:0},p=!1,f=!1;function h(t){null===e.groupId&&(p=!1,f=!0,d={x:t.clientX,y:t.clientY},n("select"))}function m(t){var n;if((d.x!==t.clientX||d.y!==t.clientY)&&f&&(d={x:t.clientX,y:t.clientY},!p&&null!==(n=r.value)&&void 0!==n&&n.$el)){var i=r.value.$el.getBoundingClientRect(),u=i.top,h=i.left,m={x:t.clientX-h,y:t.clientY-u},b={x:a.value.x+m.x,y:a.value.y+m.y};l={itemId:Object(D["a"])(),inputPortId:Object(D["a"])(),outputPortId:Object(D["a"])(),connectionChainId:e.connectionChainId,value:c.value.value,sourceId:c.value.id,targetId:s.value.id,position:b},o.createFreeport(l),o.setSnapBoundaries(l.itemId),p=!0}}function b(){f&&(f=!1,n("select"))}function v(){e.isSelected||n("select")}return{root:r,topLeft:a,bottomRight:u,onMouseDown:h,onFocus:v,source:c,target:s}}});const J=v()(H,[["render",N]]);var Q=J;function ee(e,t,n,o,r,c){var s=Object(i["resolveComponent"])("properties"),a=Object(i["resolveComponent"])("freeport"),u=Object(i["resolveComponent"])("integrated-circuit"),l=Object(i["resolveComponent"])("input-switch"),d=Object(i["resolveComponent"])("lightbulb"),p=Object(i["resolveComponent"])("logic-gate"),f=Object(i["resolveComponent"])("port-item"),h=Object(i["resolveComponent"])("port-set"),m=Object(i["resolveComponent"])("selectable"),b=Object(i["resolveComponent"])("draggable");return Object(i["openBlock"])(),Object(i["createBlock"])(b,{position:e.position,zoom:e.store.zoomLevel,style:Object(i["normalizeStyle"])({transform:"rotate(".concat(90*e.rotation,"deg)"),outline:"none",zIndex:e.zIndex}),"snap-mode":e.type===e.ItemType.Freeport?"radius":"outer","snap-boundaries":e.store.snapBoundaries,"bounding-box":e.boundingBox,"force-dragging":e.forceDragging,"aria-label":e.name,title:e.name,tabindex:0,onDragStart:e.onDragStart,onDrag:e.onDrag,onDragEnd:e.onDragEnd,onFocus:e.onFocus,onBlur:e.onBlur,onKeydown:Object(i["withKeys"])(e.onEscapeKey,["esc"]),onMousedown:Object(i["withModifiers"])(e.focus,["stop"]),ref:"selectable","data-test":"selectable"},{default:Object(i["withCtx"])((function(){return[e.isPropertiesEnabled?(Object(i["openBlock"])(),Object(i["createBlock"])(s,{key:0,tabindex:0,properties:e.properties,id:e.id,onUpdate:e.store.setProperties,onFocus:e.onPropertiesFocus,onBlur:e.onBlur,"aria-label":"Properties dialog","data-test":"properties"},null,8,["properties","id","onUpdate","onFocus","onBlur"])):Object(i["createCommentVNode"])("",!0),Object(i["createVNode"])(m,{"is-selected":e.isSelected},{default:Object(i["withCtx"])((function(){var n,o,r;return[e.type===e.ItemType.Freeport?(Object(i["openBlock"])(),Object(i["createBlock"])(a,{key:0})):e.type===e.ItemType.IntegratedCircuit?(Object(i["openBlock"])(),Object(i["createBlock"])(u,{key:1,"port-list":e.portList,onDblclick:t[0]||(t[0]=function(t){return e.$emit("openIntegratedCircuit",e.baseItem)})},null,8,["port-list"])):e.type===e.ItemType.InputNode?(Object(i["openBlock"])(),Object(i["createBlock"])(l,{key:2,value:null===(n=e.ports[0])||void 0===n?void 0:n.value,onToggle:t[1]||(t[1]=function(t){return e.store.setPortValue({id:e.ports[0].id,value:t})})},null,8,["value"])):e.type===e.ItemType.OutputNode?(Object(i["openBlock"])(),Object(i["createBlock"])(d,{key:3,value:null===(o=e.ports[0])||void 0===o?void 0:o.value,type:e.subtype},null,8,["value","type"])):(Object(i["openBlock"])(),Object(i["createBlock"])(p,{key:4,"input-count":null===(r=e.properties.inputCount)||void 0===r?void 0:r.value,type:e.subtype},null,8,["input-count","type"])),Object(i["createVNode"])(h,null,Object(i["createSlots"])({_:2},[Object(i["renderList"])(e.portList,(function(t,n){return{name:n,fn:Object(i["withCtx"])((function(){return[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(t,(function(t){return Object(i["openBlock"])(),Object(i["createBlock"])(f,{tabindex:0,store:e.rawStore,id:t.id,ref_for:!0,ref:t.id,key:t.id,type:t.type,"is-freeport":t.isFreeport,position:t.position,orientation:t.orientation+e.rotation,"connected-port-ids":t.connectedPortIds,rotation:e.rotation,onKeypress:Object(i["withKeys"])(e.onEscapeKey,["esc"]),onFocus:function(n){return e.onPortFocus(t.id)},onBlur:function(n){return e.onPortBlur(t.id,n)},onDeselect:e.focus,"data-test":"port-item"},null,8,["store","id","type","is-freeport","position","orientation","connected-port-ids","rotation","onKeypress","onFocus","onBlur","onDeselect"])})),128))]}))}}))]),1024)]})),_:1},8,["is-selected"])]})),_:1},8,["position","zoom","style","snap-mode","snap-boundaries","bounding-box","force-dragging","aria-label","title","onDragStart","onDrag","onDragEnd","onFocus","onBlur","onKeydown","onMousedown"])}var te=n("cf28"),ne=(n("f8a5"),n("2da1")),oe=Object(i["createElementVNode"])("div",{class:"logic-gate__wire"},null,-1),ie={key:0,class:"logic-gate__wires--multiwire"},re=Object(i["createElementVNode"])("div",{class:"logic-gate__wires-divider"},[Object(i["createElementVNode"])("div",{class:"logic-gate__wire"})],-1);function ce(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{style:Object(i["normalizeStyle"])({height:"".concat(25*e.inputCount,"px")}),class:"logic-gate"},[Object(i["createElementVNode"])("div",{style:Object(i["normalizeStyle"])({width:(e.inputCount>2?30:100)+"%"}),class:"logic-gate__wires"},[Object(i["createElementVNode"])("div",{class:Object(i["normalizeClass"])([{"gate__wires-divider--multiwire":e.inputCount>2},"logic-gate__wires-divider"])},[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.inputCount-1,(function(e){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:e,class:"logic-gate__wire"})})),128)),oe],2),e.inputCount>2?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",ie)):Object(i["createCommentVNode"])("",!0),re],4),(Object(i["openBlock"])(),Object(i["createBlock"])(Object(i["resolveDynamicComponent"])(e.component),{class:"logic-gate__component"}))],4)}var se={class:"and",width:"100",height:"50",viewBox:"0 -1 100 50"},ae=Object(i["createElementVNode"])("path",{transform:"translate(20, 0)",class:"and__element",d:"M 0 0 V 48 H 24 C 36 48 48 36 48 24 C 48 12 36 0 24 0 Z"},null,-1),ue={key:0,cx:"73",cy:"24",r:"5",class:"and__negation"};function le(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",se,[ae,e.isNegated?(Object(i["openBlock"])(),Object(i["createElementBlock"])("circle",ue)):Object(i["createCommentVNode"])("",!0)])}var de=Object(i["defineComponent"])({name:"And",props:{isNegated:{type:Boolean,default:!0}}});n("43e4");const pe=v()(de,[["render",le]]);var fe=pe,he={width:"100",height:"50",viewBox:"0 -1 100 50",class:"or"},me=Object(i["createElementVNode"])("path",{transform:"translate(10, 0)",fill:"#fff",d:"M 0 0 C 12 12 12 36 0 48 H 0 H 24 C 48 48 60 36 72 24 C 60 12 48 0 24 0 Z",class:"or__element"},null,-1),be={key:0,fill:"none",d:"M 0 0 C 12 12 12 36 0 48",class:"or__tail"},ve={key:1,cx:"88",cy:"24",r:"5",class:"or__negation"};function ge(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",he,[me,e.isXor?(Object(i["openBlock"])(),Object(i["createElementBlock"])("path",be)):Object(i["createCommentVNode"])("",!0),e.isNegated?(Object(i["openBlock"])(),Object(i["createElementBlock"])("circle",ve)):Object(i["createCommentVNode"])("",!0)])}var Oe=Object(i["defineComponent"])({name:"Or",props:{isNegated:{type:Boolean,default:!1},isXor:{type:Boolean,default:!1}}});n("13db");const ye=v()(Oe,[["render",ge]]);var je=ye;function Ie(e,t,n,o,r,c){var s=Object(i["resolveComponent"])("and");return Object(i["openBlock"])(),Object(i["createBlock"])(s,{"is-negated":!0})}var xe=Object(i["defineComponent"])({name:"Nand",components:{And:fe}});const we=v()(xe,[["render",Ie]]);var Ce=we;function ke(e,t,n,o,r,c){var s=Object(i["resolveComponent"])("or");return Object(i["openBlock"])(),Object(i["createBlock"])(s,{"is-negated":!0,"is-xor":!0})}var Se=Object(i["defineComponent"])({name:"Xnor",components:{Or:je}});const Be=v()(Se,[["render",ke]]);var Pe=Be;function Ee(e,t,n,o,r,c){var s=Object(i["resolveComponent"])("or");return Object(i["openBlock"])(),Object(i["createBlock"])(s,{"is-xor":!0})}var Ne=Object(i["defineComponent"])({name:"Xor",components:{Or:je}});const De=v()(Ne,[["render",Ee]]);var _e,Ve=De;(function(e){e["None"]="None",e["Switch"]="Switch",e["PushButton"]="PushButton",e["Clock"]="Clock",e["Lightbulb"]="Lightbulb",e["Buffer"]="Buffer",e["Not"]="Not",e["Tristate"]="Tristate",e["And"]="And",e["Or"]="Or",e["Nand"]="Nand",e["Nor"]="Nor",e["Xnor"]="Xnor",e["Xor"]="Xor"})(_e||(_e={}));var Me=_e,ze=Object(i["defineComponent"])({name:"LogicGate",props:{inputCount:{type:Number,default:2},type:{subtype:String,required:!0}},computed:{component:function(){switch(this.type){case Me.And:return fe;case Me.Nand:return Ce;case Me.Xnor:return Pe;case Me.Xor:return Ve;default:return je}}}});n("d4c5");const Te=v()(ze,[["render",ce]]);var Fe=Te,Le={class:"input-switch"},Ae={key:0},Re={key:1},qe={key:2};function Ue(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Le,[Object(i["createElementVNode"])("button",{type:"button",class:Object(i["normalizeClass"])(["input-switch__flipper",{"input-switch__flipper--on":1===e.model,"input-switch__flipper--off":-1===e.model,"input-switch__flipper--high-z":0===e.model}]),tabindex:0,onMousedown:t[0]||(t[0]=Object(i["withModifiers"])((function(){return e.click&&e.click.apply(e,arguments)}),["stop"]))},[1===e.model?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",Ae,"ON")):-1===e.model?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",Re,"OFF")):(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",qe,"?"))],34)])}var $e=Object(i["defineComponent"])({name:"InputSwitch",props:{value:{type:Number,default:0}},data:function(){return{model:0}},watch:{value:{handler:function(e){this.model=e},immediate:!0}},methods:{click:function(e){return e.preventDefault(),e.stopPropagation(),this.model=1===this.model?-1:1,this.$emit("toggle",this.model),!1}}});n("4ce7");const Ge=v()($e,[["render",Ue]]);var Ke=Ge,We={class:"integrated-circuit"},Xe={class:"integrated-circuit__wires"},Ze={class:"integrated-circuit__wires-divider"},Ye={class:"integrated-circuit__wires-divider"},He=Object(i["createElementVNode"])("div",{class:"integrated-circuit__box"},[Object(i["createElementVNode"])("div",{class:"integrated-circuit__box-inner"}," R-S Flip-Flop ")],-1);function Je(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",We,[Object(i["createElementVNode"])("div",Xe,[Object(i["createElementVNode"])("div",Ze,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.portList.left,(function(e){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:e.id,class:"integrated-circuit__wire"})})),128))]),Object(i["createElementVNode"])("div",Ye,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.portList.right,(function(e){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:e.id,class:"integrated-circuit__wire"})})),128))])]),He])}var Qe=Object(i["defineComponent"])({name:"IntegratedCircuit",props:{portList:{type:Object,required:!0}}});n("3752");const et=v()(Qe,[["render",Je]]);var tt=et;function nt(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:Object(i["normalizeClass"])(["lightbulb",{"lightbulb--on":1===e.value,"lightbulb--high-z":0===e.value}])},null,2)}var ot=Object(i["defineComponent"])({name:"Lightbulb",props:{value:{type:Number,default:0}}});n("ff98");const it=v()(ot,[["render",nt]]);var rt=it,ct={class:"freeport"};function st(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",ct)}var at=Object(i["defineComponent"])({name:"Freeport"});n("78ec");const ut=v()(at,[["render",st]]);var lt=ut;function dt(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:Object(i["normalizeClass"])(["port-handle",{"port-handle--active":e.active,"port-handle--output":0===e.type,"port-handle--input":1===e.type}]),onMousedown:t[0]||(t[0]=function(){return e.mousedown&&e.mousedown.apply(e,arguments)}),onMouseup:t[1]||(t[1]=function(){return e.mouseup&&e.mouseup.apply(e,arguments)})},null,34)}var pt=Object(i["defineComponent"])({name:"PortHandle",props:{active:{type:Boolean,default:!1},type:{type:Number,default:0}},methods:{mousedown:function(e){this.$emit("mousedown",e)},mouseup:function(e){this.$emit("mouseup",e)}}});n("6aa5");const ft=v()(pt,[["render",dt]]);var ht=ft,mt={class:"port-set"},bt={class:"port-set__container port-set__container--left"},vt={class:"port-set__container port-set__container--top"},gt={class:"port-set__container port-set__container--right"},Ot={class:"port-set__container port-set__container--bottom"};function yt(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",mt,[Object(i["createElementVNode"])("div",bt,[Object(i["renderSlot"])(e.$slots,"left")]),Object(i["createElementVNode"])("div",vt,[Object(i["renderSlot"])(e.$slots,"top")]),Object(i["createElementVNode"])("div",gt,[Object(i["renderSlot"])(e.$slots,"right")]),Object(i["createElementVNode"])("div",Ot,[Object(i["renderSlot"])(e.$slots,"bottom")])])}var jt=Object(i["defineComponent"])({name:"PortSet"});n("acf4");const It=v()(jt,[["render",yt]]);var xt=It,wt=["aria-hidden"],Ct={class:"properties__heading",role:"title"},kt=Object(i["createTextVNode"])(" Properties "),St=["for"],Bt=["onUpdate:modelValue","id"],Pt=["value"],Et=["onUpdate:modelValue","id"],Nt=["onUpdate:modelValue","min","max","type","id"];function Dt(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{onKeydown:[t[1]||(t[1]=Object(i["withKeys"])((function(t){return e.isOpen=!0}),["space"])),t[2]||(t[2]=Object(i["withKeys"])((function(){return e.onKeyDown&&e.onKeyDown.apply(e,arguments)}),["esc"]))],onClick:t[3]||(t[3]=function(t){return e.isOpen=!0}),onContextmenu:t[4]||(t[4]=function(){return e.stopPropagation&&e.stopPropagation.apply(e,arguments)}),onMousedown:t[5]||(t[5]=function(){return e.stopPropagation&&e.stopPropagation.apply(e,arguments)}),onMouseup:t[6]||(t[6]=function(){return e.stopPropagation&&e.stopPropagation.apply(e,arguments)}),class:"properties"},[e.isOpen?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:0,class:"properties__dialog","aria-hidden":!e.isOpen},[Object(i["createElementVNode"])("div",Ct,[kt,Object(i["createElementVNode"])("span",{onClick:t[0]||(t[0]=function(t){return e.isOpen=!1}),class:"properties__close"}," × ")]),(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.model,(function(t,n){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:n,class:"properties__entry"},[Object(i["createElementVNode"])("label",{for:"".concat(e.id,"_").concat(n)},Object(i["toDisplayString"])(t.label),9,St),t.options?Object(i["withDirectives"])((Object(i["openBlock"])(),Object(i["createElementBlock"])("select",{key:0,"onUpdate:modelValue":function(e){return t.value=e},id:"".concat(e.id,"_").concat(n),class:"properties__input"},[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(t.options,(function(e,t){return Object(i["openBlock"])(),Object(i["createElementBlock"])("option",{key:t,value:e},Object(i["toDisplayString"])(t),9,Pt)})),128))],8,Bt)),[[i["vModelSelect"],t.value]]):"boolean"===t.type?Object(i["withDirectives"])((Object(i["openBlock"])(),Object(i["createElementBlock"])("input",{key:1,"onUpdate:modelValue":function(e){return t.value=e},id:"".concat(e.id,"_").concat(n),type:"checkbox",class:"properties__input"},null,8,Et)),[[i["vModelCheckbox"],t.value]]):Object(i["withDirectives"])((Object(i["openBlock"])(),Object(i["createElementBlock"])("input",{key:2,"onUpdate:modelValue":function(e){return t.value=e},min:t.min,max:t.max,type:t.type,id:"".concat(e.id,"_").concat(n),class:"properties__input"},null,8,Nt)),[[i["vModelDynamic"],t.value]])])})),128))],8,wt)):Object(i["createCommentVNode"])("",!0)],32)}var _t=n("9ec3"),Vt=Object(i["defineComponent"])({name:"Properties",props:{properties:{type:Object,default:function(){return{}}},id:{type:String,default:""}},emits:["update"],data:function(){return{model:{},isOpen:!1}},watch:{properties:{handler:function(e){this.model=Object(_t["cloneDeep"])(e)},deep:!0,immediate:!0},model:{handler:function(e){this.$emit("update",{id:this.id,properties:e})},deep:!0}},methods:{onKeyDown:function(e){this.isOpen=!1,e.preventDefault(),this.$el.focus()},stopPropagation:function(e){e.stopPropagation()}}});n("83e9");const Mt=v()(Vt,[["render",Dt]]);var zt=Mt;function Tt(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:Object(i["normalizeClass"])(["selectable",{"selectable--selected":e.isSelected}])},[Object(i["renderSlot"])(e.$slots,"default")],2)}var Ft=Object(i["defineComponent"])({name:"Selectable",props:{isSelected:{type:Boolean,default:!1}}});n("63e8");const Lt=v()(Ft,[["render",Tt]]);var At=Lt;n("8d0d"),n("c78b");function Rt(e,t,n,o,r,c){var s=Object(i["resolveComponent"])("port-handle"),a=Object(i["resolveComponent"])("draggable"),u=Object(i["resolveComponent"])("port-pivot");return Object(i["openBlock"])(),Object(i["createBlock"])(u,{rotation:e.rotation,onBlur:e.onBlur,onKeydown:[Object(i["withKeys"])(e.onEscapeKey,["esc"]),t[0]||(t[0]=Object(i["withKeys"])((function(t){return e.store.cycleConnectionPreviews(e.id)}),["space"])),Object(i["withKeys"])(e.store.commitPreviewedConnection,["enter"])],onContextmenu:t[1]||(t[1]=function(t){return e.store.setActivePortId(e.id)})},{default:Object(i["withCtx"])((function(){return[e.isFreeport?(Object(i["openBlock"])(),Object(i["createBlock"])(s,{key:1,type:e.type,active:e.store.activePortId===e.id||e.store.connectablePortIds.includes(e.id)},null,8,["type","active"])):(Object(i["openBlock"])(),Object(i["createBlock"])(a,{key:0,"snap-boundaries":e.store.snapBoundaries,zoom:e.store.zoomLevel,"bounding-box":{left:e.position.x,top:e.position.y,right:e.position.x,bottom:e.position.y},"lock-visual":!0,"snap-mode":"radius",onDragStart:e.dragStart,onDragEnd:e.dragEnd},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(s,{type:e.type,active:e.store.activePortId===e.id||e.store.connectablePortIds.includes(e.id)},null,8,["type","active"])]})),_:1},8,["snap-boundaries","zoom","bounding-box","onDragStart","onDragEnd"]))]})),_:1},8,["rotation","onBlur","onKeydown"])}function qt(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:"port-pivot",style:Object(i["normalizeStyle"])({transform:"rotate(-".concat(90*e.rotation,"deg)")}),onKeydown:t[0]||(t[0]=Object(i["withKeys"])((function(t){return e.$emit("connect")}),["space"]))},[Object(i["renderSlot"])(e.$slots,"default")],36)}var Ut=Object(i["defineComponent"])({name:"PortPivot",props:{rotation:{type:Number,default:0}}});n("bdf0");const $t=v()(Ut,[["render",qt]]);var Gt,Kt=$t;(function(e){e[e["Output"]=0]="Output",e[e["Input"]=1]="Input"})(Gt||(Gt={}));var Wt=Gt,Xt=Object(i["defineComponent"])({name:"PortItem",components:{Draggable:S,PortHandle:ht,PortPivot:Kt},props:{id:{type:String,default:""},rotation:{type:Number,default:0},position:{type:Object,default:function(){return{x:0,y:0}}},isFreeport:{type:Boolean,default:!1},type:{type:Number,default:0},orientation:{type:Number,default:0},connectedPortIds:{type:Object,default:[]},store:{type:Function,required:!0}},setup:function(e,t){var n=t.emit,o=e.store(),i={},r=!1;function c(e){e.preventDefault(),e.stopPropagation(),n("deselect",e)}function s(){o.unsetConnectionPreview(),o.cachedState=null}function a(){r=!0;i={itemId:Object(D["a"])(),position:e.position},e.type===Wt.Input?(i.outputPortId=Object(D["a"])(),i.targetId=e.id,i.portType=0):(i.inputPortId=Object(D["a"])(),i.sourceId=e.id,i.portType=1),o.createFreeport(i),o.setConnectablePortIds({portId:e.id,isDragging:!0})}function u(){r&&(r=!1,e.type===Wt.Output?o.connectFreeport({portId:i.inputPortId,sourceId:e.id}):o.connectFreeport({portId:i.outputPortId,targetId:e.id}))}return{store:o,isDragging:r,onEscapeKey:c,onBlur:s,dragStart:a,dragEnd:u}}});const Zt=v()(Xt,[["render",Rt]]);var Yt,Ht=Zt;(function(e){e["Buffer"]="Buffer",e["CircuitNode"]="CircuitNode",e["Freeport"]="Freeport",e["InputNode"]="InputNode",e["IntegratedCircuit"]="IntegratedCircuit",e["LogicGate"]="LogicGate",e["OutputNode"]="OutputNode"})(Yt||(Yt={}));var Jt=Yt,Qt=Object(i["defineComponent"])({name:"Item",components:{Draggable:S,LogicGate:Fe,Freeport:lt,InputSwitch:Ke,IntegratedCircuit:tt,Lightbulb:rt,PortHandle:ht,PortSet:xt,PortItem:Ht,Properties:zt,Selectable:At},props:{boundingBox:{type:Object,default:function(){return{left:0,top:0,right:0,bottom:0}}},rotation:{type:Number,default:0},zIndex:{type:Number,default:1},isSelected:{type:Boolean,default:!1},type:{type:String,required:!0},subtype:{type:String,required:!0},position:{type:Object,required:!0},name:{type:String,default:"Node"},portIds:{type:Array,default:function(){return[]}},properties:{type:Object,default:function(){return{}}},groupId:{type:String,default:null},id:{type:String,required:!0},store:{type:Function,required:!0}},setup:function(e,t){var n=t.emit,o=e.store(),r=Object(i["ref"])(),c=Object(i["ref"])(!1),s=!1,a=!1,u=Object(i["computed"])((function(){return e.portIds.map((function(e){return o.ports[e]}))})),l=Object(i["computed"])((function(){var e=["left","top","right","bottom"];return u.value.reduce((function(t,n){return Object(d["a"])(Object(d["a"])({},t),{},Object(p["a"])({},e[n.orientation],[].concat(Object(L["a"])(t[e[n.orientation]]),[n])))}),e.reduce((function(e,t){return Object(d["a"])(Object(d["a"])({},e),{},Object(p["a"])({},t,[]))}),{left:[],top:[],right:[],bottom:[]}))})),f=Object(i["computed"])((function(){return e.isSelected&&s&&Object.keys(e.properties).length>0}));function h(){var e;null===(e=r.value)||void 0===e||e.$el.focus(),s=!0}function m(){o.setSnapBoundaries(e.id)}function b(t){a||(a=!0,o.cacheState()),o.setSelectionPosition({id:e.id,position:t})}function v(){a&&(o.commitCachedState(),a=!1)}function g(e){var t,n;document.activeElement===(null===(t=r.value)||void 0===t?void 0:t.$el)?null===(n=r.value)||void 0===n||n.$el.blur():e.preventDefault()}function O(e){var t;null!==(t=r.value)&&void 0!==t&&t.$el.contains(e.relatedTarget)||(s=!1)}function y(){e.isSelected||n("select"),s=!0}function j(){o.setActivePortId(null),s=!0}function I(e){y(),o.setActivePortId(e)}function x(e,t){o.activePortId===e&&o.setActivePortId(null),O(t)}function w(t){var n=Object(te["a"])(t,1),i=n[0];o.setItemSize({id:e.id,rect:i.contentRect})}var C=new ne["a"](w);return Object(i["onMounted"])((function(){r.value&&C.observe(r.value.$el),o.activeFreeportId===e.id&&(c.value=!0,o.activeFreeportId=null,a=!0),o.setProperties({id:e.id,properties:e.properties})})),{selectable:r,store:o,ports:u,rawStore:e.store,portList:l,forceDragging:c,isPropertiesEnabled:f,focus:h,onDragStart:m,onDrag:b,onDragEnd:v,onEscapeKey:g,onBlur:O,onFocus:y,onPropertiesFocus:j,onPortFocus:I,onPortBlur:x,onSizeChanged:w,ItemSubtype:Me,ItemType:Jt}},watch:{isSelected:function(e){e&&this.$el.focus()}}});const en=v()(Qt,[["render",ee]]);var tn=en,nn=n("42c2"),on=n("f5f2"),rn=n("30c6"),cn=(n("df26"),n("a0d5")),sn=n.n(cn),an=n("f528");function un(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[{label:"&Undo",enabled:e.canUndo,accelerator:"CommandOrControl+Z",click:e.undo},{type:"separator"},{label:"Cut",enabled:e.hasSelection,accelerator:"CommandOrControl+X",click:function(){return console.log("cut")}},{label:"Copy",enabled:e.hasSelection,accelerator:"CommandOrControl+C",click:function(){return console.log("copy")}},{label:"Paste",accelerator:"CommandOrControl+V",click:function(){return console.log("paste")}},{label:"Delete",accelerator:"Delete",enabled:e.hasSelection,click:e.deleteSelection},{type:"separator"},{label:"Select all",accelerator:"CommandOrControl+A",click:e.selectAll}];return e.selectedItemIds.length>0&&(n.push({type:"separator"}),n.push({label:"&Rotate",submenu:[{label:"Rotate 90° &CW",click:function(){return e.rotate(1)}},{label:"Rotate 90° CC&W",click:function(){return e.rotate(-1)}}]})),e.hasSelection&&(n.push({type:"separator"}),n.push({label:"&Bring to Front",submenu:[{label:"&Bring to Front",click:function(){return e.setZIndex(e.zIndex)}},{label:"Bring &Forward",click:function(){return e.incrementZIndex(1)}}]}),n.push({label:"&Send to Back",submenu:[{label:"&Send to Back",click:function(){return e.setZIndex(e.zIndex)}},{label:"Send &Backward",click:function(){return e.incrementZIndex(-1)}}]})),e.canGroup&&n.push({label:"&Group",submenu:[{label:"&Group"},{label:"&Ungroup",enabled:e.canUngroup}]}),t.length>0&&(n.push({type:"separator"}),n=n.concat(t)),1===e.selectedItemIds.length&&(n.push({type:"separator"}),n.push({label:"&Item Properties"})),e.activePortId&&(n.push({type:"separator"}),n.push({type:"checkbox",label:"Show in &Oscilloscope",checked:!0})),n}function ln(e){var t=null!==e.activeDocumentId;return[{label:"&New Circuit",accelerator:"CommandOrControl+N",click:e.newDocument},{type:"separator"},{label:"&Open Circuit",accelerator:"CommandOrControl+O",click:e.selectDocument},{label:"Open &Integrated Circuit",accelerator:"CommandOrControl+Shift+O",click:e.selectDocument},{type:"separator"},{label:"Save",enabled:t,accelerator:"CommandOrControl+S",click:e.saveActiveDocument},{label:"Save As...",enabled:t,accelerator:"CommandOrControl+Shift+S",click:function(){return e.saveActiveDocument(!0)}},{label:"Save All",enabled:t,accelerator:"CommandOrControl+Shift+A",click:function(){return console.log("root store save all")}},{type:"separator"},{label:"Export",enabled:t,submenu:[{label:"Integrated Circuit",accelerator:"CommandOrControl+Shift+E",click:function(){return console.log("export IC")}}]},{type:"separator"},{label:"Preferences",submenu:[{label:"Global Preferences",accelerator:"CommandOrControl+,",click:function(){return console.log("global prefs")}},{label:"Document Preferences",accelerator:"CommandOrControl+Shift+,",click:function(){return console.log("doc prefs")}}]},{type:"separator"},{label:"Exit",click:function(){return window.close()}}]}function dn(e){var t=[{label:"File",submenu:ln(e)}];return e.activeDocument&&t.push({label:"Edit",submenu:un(e.activeDocument.store())}),t}var pn=function(){function e(){Object(on["a"])(this,e)}return Object(rn["a"])(e,null,[{key:"setApplicationMenu",value:function(e){if(window.require){var t=window.require("@electron/remote"),n=t.Menu,o=n.buildFromTemplate(dn(e));n.setApplicationMenu(o)}}},{key:"showContextMenu",value:function(e){if(window.require){var t=window.require("@electron/remote"),n=t.Menu,o=n.buildFromTemplate(e);o.popup()}}},{key:"beep",value:function(){if(window.require){var e=window.require("@electron/remote"),t=e.shell;t.beep()}}},{key:"openModal",value:function(){var e=Object(nn["a"])(regeneratorRuntime.mark((function e(){var t,n,o,i,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:"https://aristotle.dev",window.require){e.next=3;break}return e.abrupt("return");case 3:n=window.require("@electron/remote"),o=n.getCurrentWindow(),i=new n.BrowserWindow({autoHideMenuBar:!0,minimizable:!1,maximizable:!1,modal:!0,show:!1,parent:o}),i.loadURL(t),i.webContents.on("did-finish-load",(function(){return i.show()})),i.setMenu(null);case 9:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"showOpenFileDialog",value:function(e){if(window.require){var t=window.require("@electron/remote"),n=t.dialog,o=t.app,i=sn.a.resolve(o.getPath("desktop"));return n.showOpenDialogSync({defaultPath:i,filters:e})||[]}}},{key:"showSaveFileDialog",value:function(e,t){if(window.require){var n=window.require("@electron/remote"),o=n.dialog,i=n.app,r=sn.a.resolve(i.getPath("desktop"),t);return o.showSaveDialogSync({defaultPath:r,filters:e})}}},{key:"showMessageBox",value:function(e){var t=e.message,n=e.type,o=void 0===n?"warning":n,i=e.buttons,r=void 0===i?["OK"]:i,c=e.title,s=void 0===c?"Aristotle":c;if(!window.require)return r.length-1;var a=window.require("@electron/remote");return a.dialog.showMessageBoxSync(a.getCurrentWindow(),{type:o,buttons:r,title:s,message:t})}},{key:"on",value:function(e,t){this.emitter.on(e,t)}},{key:"onBeforeUnload",value:function(){return!window.require||this.canCloseWindow}},{key:"assignQuitter",value:function(){var e=this;if(window.require){var t=window.require("@electron/remote");t.getCurrentWindow().on("close",(function(n){console.log("E: ",n),e.canCloseWindow?t.app.quit():e.emitter.emit("close")}))}}},{key:"quit",value:function(){this.canCloseWindow=!0,window.close()}}]),e}();pn.canCloseWindow=!1,pn.emitter=new an["TinyEmitter"],window.onbeforeunload=pn.onBeforeUnload;var fn=pn;function hn(e){return[{label:"&Grid",submenu:[{label:"&Show grid"},{type:"separator"},{label:"Snap to &grid"},{label:"Snap to &elements"}]}]}function mn(e){return un(e,hn(e).concat({type:"separator"}))}var bn=Object(i["defineComponent"])({name:"Document",components:{Group:E,Editor:I,Connection:Q,Item:tn},props:{store:{type:Function,required:!0}},setup:function(e,t){var n=t.emit,o=e.store(),r=Object(i["ref"])(),c=1,s={};function a(e){switch(s[e.key]=!0,e.key){case"Escape":return o.deselectAll();case"Delete":return o.deleteSelection();case"z":case"Z":if(s.Control)return s.Shift?o.redo():o.undo();case"a":case"A":if(s.Control)return console.log("SEL ALL"),o.selectAll(),void e.preventDefault();case"r":case"R":if(s.Control)return window.location.reload(),void e.preventDefault();default:return h(e)}}function u(e){s[e.key]=!1,c=1}function l(e){fn.showContextMenu(mn(o)),e.preventDefault(),e.stopPropagation()}function f(e){var t=e.id,i=e.ports;n("openIntegratedCircuit",{items:Object(p["a"])({},t,o.items[t]),ports:i.reduce((function(e,t){return Object(d["a"])(Object(d["a"])({},e),{},Object(p["a"])({},t.id,t))}),{})})}function h(e){var t=function(){switch(e.key){case"ArrowLeft":return{x:-1,y:0};case"ArrowUp":return{x:0,y:-1};case"ArrowRight":return{x:1,y:0};case"ArrowDown":return{x:0,y:1}}}();if(t){var n=Math.min(c,10);o.moveSelectionPosition({x:t.x*n,y:t.y*n}),c*=1.05}}function m(){s={}}function b(e){s.Control||o.deselectAll(),o.setSelectionState({id:e,value:!0})}function v(e){s.Control||o.setSelectionState({id:e,value:!1})}return Object(i["onMounted"])((function(){document.addEventListener("keydown",a),document.addEventListener("keyup",u),window.addEventListener("blur",m)})),Object(i["onBeforeUnmount"])((function(){document.removeEventListener("keydown",a),document.removeEventListener("keyup",u),window.removeEventListener("blur",m)})),{store:o,editor:r,storeDefinition:e.store,onKeyDown:a,onKeyUp:u,onContextMenu:l,onOpenIntegratedCircuit:f,clearKeys:m,selectItem:b,deselectItem:v,gridSize:20}}});const vn=v()(bn,[["render",l]]);var gn=vn,On={class:"toolbar"},yn=Object(i["createTextVNode"])("Undo"),jn=Object(i["createTextVNode"])("Redo"),In=Object(i["createTextVNode"])("Rotate 90° CCW"),xn=Object(i["createTextVNode"])("Rotate 90° CW"),wn=Object(i["createTextVNode"])("Group"),Cn=Object(i["createTextVNode"])("Ungroup"),kn=Object(i["createTextVNode"])("Add NOR"),Sn=Object(i["createTextVNode"])("Add lightbulb"),Bn=Object(i["createTextVNode"])("Add switch"),Pn=Object(i["createTextVNode"])("Delete selection"),En=Object(i["createTextVNode"])("Build IC"),Nn=Object(i["createTextVNode"])("Bring forward"),Dn=Object(i["createTextVNode"])("Send backward"),_n=Object(i["createTextVNode"])("Send to back"),Vn=Object(i["createTextVNode"])("Bring to front");function Mn(e,t,n,o,r,c){var s=Object(i["resolveComponent"])("toolbar-button"),a=Object(i["resolveComponent"])("toolbar-separator");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",On,[Object(i["createVNode"])(s,{icon:e.faFolderOpen},null,8,["icon"]),Object(i["createVNode"])(s,{icon:e.faFile},null,8,["icon"]),Object(i["createVNode"])(s,{icon:e.faSave},null,8,["icon"]),Object(i["createVNode"])(a),Object(i["createVNode"])(s,{onClick:e.store.undo,disabled:!e.store.canUndo,icon:e.faReply},{default:Object(i["withCtx"])((function(){return[yn]})),_:1},8,["onClick","disabled","icon"]),Object(i["createVNode"])(s,{onClick:e.store.redo,disabled:!e.store.canRedo,icon:e.faShare},{default:Object(i["withCtx"])((function(){return[jn]})),_:1},8,["onClick","disabled","icon"]),Object(i["createVNode"])(a),Object(i["createVNode"])(s,{onClick:t[0]||(t[0]=function(t){return e.store.rotate(-1)}),disabled:!e.store.hasSelectedItems,icon:e.faRotateBackward},{default:Object(i["withCtx"])((function(){return[In]})),_:1},8,["disabled","icon"]),Object(i["createVNode"])(s,{onClick:t[1]||(t[1]=function(t){return e.store.rotate(1)}),disabled:!e.store.hasSelectedItems,icon:e.faRotateForward},{default:Object(i["withCtx"])((function(){return[xn]})),_:1},8,["disabled","icon"]),Object(i["createVNode"])(a),Object(i["createVNode"])(s,{onClick:e.store.group,disabled:!e.store.canGroup,icon:e.faObjectGroup},{default:Object(i["withCtx"])((function(){return[wn]})),_:1},8,["onClick","disabled","icon"]),Object(i["createVNode"])(s,{onClick:e.store.ungroup,disabled:!e.store.canUngroup,icon:e.faObjectUngroup},{default:Object(i["withCtx"])((function(){return[Cn]})),_:1},8,["onClick","disabled","icon"]),Object(i["createVNode"])(a),Object(i["createVNode"])(s,{onClick:e.addLogicGate,icon:e.faCodeBranch},{default:Object(i["withCtx"])((function(){return[kn]})),_:1},8,["onClick","icon"]),Object(i["createVNode"])(s,{onClick:e.addLightbulb,icon:e.faLightbulb},{default:Object(i["withCtx"])((function(){return[Sn]})),_:1},8,["onClick","icon"]),Object(i["createVNode"])(s,{onClick:e.addSwitch,icon:e.faToggleOn},{default:Object(i["withCtx"])((function(){return[Bn]})),_:1},8,["onClick","icon"]),Object(i["createVNode"])(a),Object(i["createVNode"])(s,{icon:e.faScissors},null,8,["icon"]),Object(i["createVNode"])(s,{icon:e.faCopy},null,8,["icon"]),Object(i["createVNode"])(s,{icon:e.faPastafarianism},null,8,["icon"]),Object(i["createVNode"])(s,{onClick:e.store.deleteSelection,disabled:!e.store.hasSelection,icon:e.faBan},{default:Object(i["withCtx"])((function(){return[Pn]})),_:1},8,["onClick","disabled","icon"]),Object(i["createVNode"])(a),Object(i["createVNode"])(s,{onClick:e.store.saveIntegratedCircuit,icon:e.faMicrochip},{default:Object(i["withCtx"])((function(){return[En]})),_:1},8,["onClick","icon"]),Object(i["createVNode"])(a),Object(i["createVNode"])(s,{onClick:t[2]||(t[2]=function(t){return e.store.incrementZIndex(1)}),disabled:!e.store.hasSelectedItems},{default:Object(i["withCtx"])((function(){return[Nn]})),_:1},8,["disabled"]),Object(i["createVNode"])(s,{onClick:t[3]||(t[3]=function(t){return e.store.incrementZIndex(-1)}),disabled:!e.store.hasSelectedItems},{default:Object(i["withCtx"])((function(){return[Dn]})),_:1},8,["disabled"]),Object(i["createVNode"])(s,{onClick:t[4]||(t[4]=function(t){return e.store.setZIndex(1)}),disabled:!e.store.hasSelectedItems},{default:Object(i["withCtx"])((function(){return[_n]})),_:1},8,["disabled"]),Object(i["createVNode"])(s,{onClick:t[5]||(t[5]=function(t){return e.store.setZIndex(e.store.zIndex)}),disabled:!e.store.hasSelectedItems},{default:Object(i["withCtx"])((function(){return[Vn]})),_:1},8,["disabled"]),Object(i["createVNode"])(a),Object(i["createVNode"])(s,{icon:e.faBug,active:e.store.isDebugging,onClick:e.store.toggleDebugger},null,8,["icon","active","onClick"]),Object(i["createVNode"])(a),Object(i["createVNode"])(s,{icon:e.faArrowsRotate,onClick:e.store.reset},null,8,["icon","onClick"]),Object(i["createVNode"])(s,{icon:e.faForwardStep,disabled:e.store.isCircuitEvaluated,onClick:e.store.stepThroughCircuit},null,8,["icon","disabled","onClick"]),Object(i["createVNode"])(a),Object(i["createVNode"])(s,{icon:e.faWaveSquare,disabled:e.store.isDebugging,active:!e.store.isDebugging&&e.store.isOscilloscopeEnabled,onClick:e.store.toggleOscilloscope},null,8,["icon","disabled","active","onClick"])])}var zn=n("96ee"),Tn=["disabled"];function Fn(e,t,n,o,r,c){var s=Object(i["resolveComponent"])("icon");return Object(i["openBlock"])(),Object(i["createElementBlock"])("button",{tabindex:-1,disabled:e.disabled,class:Object(i["normalizeClass"])([{"toolbar-button--active":e.active},"toolbar-button"]),role:"button"},[e.icon?(Object(i["openBlock"])(),Object(i["createBlock"])(s,{key:0,icon:e.icon,class:"toolbar-button__icon"},null,8,["icon"])):(Object(i["openBlock"])(),Object(i["createBlock"])(s,{key:1,icon:e.faUser,class:"toolbar-button__icon"},null,8,["icon"]))],10,Tn)}var Ln=["viewBox"],An=["d"];function Rn(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 ".concat(e.width," ").concat(e.height)},[Object(i["createElementVNode"])("path",{fill:"currentColor",d:e.svgPath},null,8,An)],8,Ln)}var qn=Object(i["defineComponent"])({name:"Icon",props:{icon:{type:Object,required:!0}},setup:function(e){var t=Object(i["computed"])((function(){return e.icon.icon[0]})),n=Object(i["computed"])((function(){return e.icon.icon[1]})),o=Object(i["computed"])((function(){return e.icon.icon[4]}));return{width:t,height:n,svgPath:o}}});n("6f3d");const Un=v()(qn,[["render",Rn]]);var $n=Un,Gn=Object(i["defineComponent"])({name:"ToolbarButton",components:{Icon:$n},data:function(){return{faUser:zn["v"]}},props:{active:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},icon:{type:Object,default:null}}});n("f152");const Kn=v()(Gn,[["render",Fn]]);var Wn=Kn,Xn={class:"toolbar-separator"};function Zn(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Xn)}var Yn=Object(i["defineComponent"])({name:"ToolbarSeparator"});n("cfe0");const Hn=v()(Yn,[["render",Zn]]);var Jn=Hn,Qn=function(e,t,n,o,i){return{id:t,orientation:n,name:i,position:{x:0,y:0},type:o,rotation:0,elementId:e,value:0,isFreeport:!1,connectedPortIds:[]}},eo=Object(i["defineComponent"])({name:"Toolbar",components:{ToolbarButton:Wn,ToolbarSeparator:Jn},data:function(){return{faFolderOpen:zn["h"],faFile:zn["g"],faSave:zn["r"],faScissors:zn["s"],faCopy:zn["f"],faPastafarianism:zn["n"],faObjectGroup:zn["l"],faObjectUngroup:zn["m"],faRotateBackward:zn["p"],faRotateForward:zn["q"],faReply:zn["o"],faShare:zn["t"],faMicrochip:zn["k"],faLightbulb:zn["j"],faToggleOn:zn["u"],faCodeBranch:zn["e"],faBan:zn["b"],faArrowsRotate:zn["a"],faBug:zn["c"],faForwardStep:zn["i"],faWaveSquare:zn["w"]}},props:{store:{type:Function,required:!0}},setup:function(e){var t=e.store(),n=Object(i["computed"])((function(){return t.simulation.circuit.isComplete()}));function o(e,n,o,i,r){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s={id:e,name:"",type:n,subtype:o,portIds:c.map((function(e){var t=e.id;return t})),position:{x:400,y:400},rotation:0,isSelected:!1,boundingBox:{left:400,right:400+i,top:400,bottom:400+r},properties:{},groupId:null,zIndex:0,width:i,height:r};switch(n){case Jt.LogicGate:s.properties={inputCount:{label:"Input count",value:2,type:"number",min:2},showInOscilloscope:{label:"Show in oscilloscope",value:!1,type:"boolean"}};break;case Jt.InputNode:s.properties={name:{label:"Name",value:"",type:"text"},startValue:{label:"Start value",value:-1,type:"number",options:{True:1,"Hi-Z":0,False:-1}},showInOscilloscope:{label:"Show in oscilloscope",value:!0,type:"boolean"}};break;case Jt.OutputNode:s.properties={name:{label:"Name",value:"",type:"text"},showInOscilloscope:{label:"Show in oscilloscope",value:!0,type:"boolean"}};break}t.insertItem({item:s,ports:c})}function r(){var e=Object(D["a"])();o(e,Jt.LogicGate,Me.Nor,100,150,[Qn(e,Object(D["a"])(),0,1,"Input Port 1"),Qn(e,Object(D["a"])(),0,1,"Input Port 2"),Qn(e,Object(D["a"])(),2,0,"Output Port")])}function c(){var e=Object(D["a"])();o(e,Jt.OutputNode,Me.Lightbulb,40,40,[Qn(e,Object(D["a"])(),0,1,"Input Port")])}function s(){var e=Object(D["a"])();o(e,Jt.InputNode,Me.Switch,40,40,[Qn(e,Object(D["a"])(),2,0,"Output Port")])}return{store:t,isComplete:n,addLogicGate:r,addLightbulb:c,addSwitch:s}}});n("ef69");const to=v()(eo,[["render",Mn]]);var no=to,oo={class:"resizable-panes__content"};function io(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:Object(i["normalizeClass"])(["resizable-panes",{"resizable-panes--vertical":e.isVertical}]),ref:"root"},[Object(i["createElementVNode"])("div",{class:Object(i["normalizeClass"])(["resizable-panes__first",{"resizable-panes__first--vertical":e.isVertical}]),style:Object(i["normalizeStyle"])(e.firstStyle)},[Object(i["createElementVNode"])("div",oo,[Object(i["renderSlot"])(e.$slots,"first")]),Object(i["createElementVNode"])("div",{class:Object(i["normalizeClass"])(["resizable-panes__divider",{"resizable-panes__divider--vertical":e.isVertical}]),onMousedown:t[0]||(t[0]=function(){return e.mousedown&&e.mousedown.apply(e,arguments)})},null,34)],6),Object(i["createElementVNode"])("div",{class:"resizable-panes__second",style:Object(i["normalizeStyle"])(e.secondStyle)},[Object(i["renderSlot"])(e.$slots,"second")],4)],2)}var ro=Object(i["defineComponent"])({name:"ResizablePanes",data:function(){return{isMouseDown:!1}},props:{isVertical:{type:Boolean,default:!1},modelValue:{type:Number,default:30}},computed:{firstStyle:function(){var e="".concat(this.modelValue,"%");return this.isVertical?{height:e,maxHeight:e}:{width:e,maxWidth:e}},secondStyle:function(){var e="".concat(100-this.modelValue,"%");return this.isVertical?{height:e,maxHeight:e}:{width:e,maxWidth:e}}},mounted:function(){window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)},methods:{mousedown:function(){this.isMouseDown=!0},mouseup:function(){this.isMouseDown=!1},mousemove:function(e){if(this.isMouseDown){var t=this.isVertical?e.y:e.x,n=this.$refs.root.getBoundingClientRect(),o=this.isVertical?n.y:n.x,i=this.isVertical?n.height:n.width,r=Math.max(Math.min((t-o)/i*100,100),0);this.$emit("update:modelValue",r)}}}});n("8f6c");const co=v()(ro,[["render",io]]);var so,ao=co,uo=(n("bdf7"),n("d331"),n("2ff2")),lo=(n("b506"),n("d48b"),n("2ea2"),n("f3b8"),n("918c"),n("8423"),n("33ef"),n("2d6d"),n("9bd2"),n("841a"),n("11ed"),Object(rn["a"])((function e(t,n){Object(on["a"])(this,e),this.node=t,this.id=n}))),po=lo,fo={TRUE:1,FALSE:-1,UNKNOWN:0},ho=fo,mo=n("f0ad"),bo=n("02a5"),vo=Object(rn["a"])((function e(t){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(on["a"])(this,e),this.inputValues={},this.outputs=[],this.isValueChanged=!0,this.forceContinue=!1,this.value=ho.UNKNOWN,this.newValue=ho.UNKNOWN,this.events=[],this.setValue=function(e){n.newValue=e,n.eval=function(){return e}},this.invokeEvent=function(e,t){n.events.forEach((function(n){n.eventType===e&&n.callback(t)}))},this.eval=function(){return n.value},this.valueCount=function(e){return Object.values(n.inputValues).filter((function(t){return t===e})).length},this.updateOutputs=function(e){n.outputs.forEach((function(t){var n=t.node,o=t.id;n.update(e,o)}))},this.update=function(e,t){n.inputValues[t]=e,n.newValue=n.eval()},this.propagate=function(){return n.value!==n.newValue?(n.isValueChanged=!0,n.value=n.newValue,n.updateOutputs(n.newValue),n.invokeEvent("change",n.newValue),n.outputs.map((function(e){var t=e.node;return t}))):[]},this.reset=function(){n.value=ho.UNKNOWN,n.newValue=ho.UNKNOWN,n.invokeEvent("change",n.newValue)},this.on=function(e,t){n.events.push({eventType:e,callback:t})},this.getProjectedValue=function(){return n.eval()||n.newValue||n.value},this.name=t,this.inputValues=o.reduce((function(e,t){return Object.assign(Object.assign({},e),Object(p["a"])({},t,ho.UNKNOWN))}),{})})),go=vo,Oo=function(e){Object(mo["a"])(n,e);var t=Object(bo["a"])(n);function n(){var e;return Object(on["a"])(this,n),e=t.apply(this,arguments),e.reset=function(){},e}return Object(rn["a"])(n)}(go),yo=Oo,jo=function(e){Object(mo["a"])(n,e);var t=Object(bo["a"])(n);function n(){var e;return Object(on["a"])(this,n),e=t.apply(this,arguments),e.update=function(t){e.newValue!==t&&(e.newValue=t,e.invokeEvent("change",t))},e}return Object(rn["a"])(n)}(go),Io=jo,xo=Object(rn["a"])((function e(){var t=this;Object(on["a"])(this,e),this.queue=[],this.nodes=[],this.inputNodes=[],this.addNode=function(e){e instanceof yo&&(t.inputNodes.push(e),t.enqueue(e)),t.nodes.push(e)},this.removeNode=function(e){if(e instanceof yo){var n=t.inputNodes.findIndex((function(t){var n=t.name;return n===e.name}));-1!==n&&t.inputNodes.splice(n,1),t.reset()}var o=t.nodes.findIndex((function(t){var n=t.name;return n===e.name}));-1!==o&&(t.removeNodeOutputs(e),t.nodes.splice(o,1)),t.next()},this.addConnection=function(e,n,o){e.outputs.push(new po(n,o)),e.value=ho.UNKNOWN,t.enqueue(e),t.next()},this.removeConnection=function(e,n){e.outputs.concat().forEach((function(o,i){var r=o.node,c=o.id;n===r&&(n.update(ho.UNKNOWN,c),e.outputs.splice(i,1),t.enqueue(n))})),t.next()},this.removeNodeOutputs=function(e){for(var n=0;n<e.outputs.length;n++)t.removeConnection(e,e.outputs[n].node)},this.enqueue=function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];n.forEach((function(e){~t.queue.indexOf(e)||t.queue.push(e)}))},this.dequeue=function(e){var n=t.queue.indexOf(e);~n&&t.queue.splice(n,1)},this.reset=function(){t.nodes.forEach((function(e){return e.reset()}))},this.next=function(){var e=!1,n=[];while(t.queue.length>0){var o=t.queue.shift();n=n.concat(o.propagate()),t.dequeue(o),o.isValueChanged&&(e=!0,o.isValueChanged=!1),o.forceContinue&&(!0,t.enqueue.apply(t,Object(L["a"])(n)),n=[])}e&&t.enqueue.apply(t,Object(L["a"])(n))},this.isComplete=function(){var e=!0;return 0===t.queue.length||(t.queue.forEach((function(t){var n=t.getProjectedValue();n===t.value||t instanceof Io||(e=!1)})),e&&(t.queue=[]),e)}})),wo=xo,Co=function(e){Object(mo["a"])(n,e);var t=Object(bo["a"])(n);function n(){var e;return Object(on["a"])(this,n),e=t.apply(this,arguments),e.eval=function(){return e.valueCount(ho.TRUE)?ho.FALSE:e.valueCount(ho.UNKNOWN)?ho.UNKNOWN:ho.TRUE},e}return Object(rn["a"])(n)}(go),ko=Co,So=function(e){Object(mo["a"])(n,e);var t=Object(bo["a"])(n);function n(){var e;return Object(on["a"])(this,n),e=t.apply(this,arguments),e.update=function(t){var n=Object.keys(e.inputValues).pop();e.inputValues[n]=t,e.newValue=e.eval()},e.eval=function(){return Object.values(e.inputValues).pop()},e}return Object(rn["a"])(n)}(go),Bo=So;(function(e){e[e["Left"]=0]="Left",e[e["Top"]=1]="Top",e[e["Right"]=2]="Right",e[e["Bottom"]=3]="Bottom"})(so||(so={}));var Po=so,Eo=(n("f38f"),Object(rn["a"])((function e(t,n,o){var i=this;Object(on["a"])(this,e),this.width=0,this.lastY=0,this.segments=[],this.hue=~~(360*Math.random()),this.initialize=function(e){var t={x:1,y:1};1===e?(t.y=0,i.lastY=1):(t.y=1,i.lastY=0),i.width++,i.addSegment(t)},this.reset=function(){i.segments=[],i.width=0,i.initialize(1===i.lastY?0:1)},this.update=function(e){i.drawPulseConstant()},this.addSegment=function(e){var t=i.segments[i.segments.length-1];!t&&e.x>0?(i.segments.push({x:0,y:e.y}),i.width++):t&&t.x!==e.x&&t.y!==e.y&&(i.segments.pop(),i.width--),i.segments.push(e)},this.drawPulseChange=function(e){var t=i.segments[i.segments.length-1].x,n=e===ho.TRUE?0:1;i.width++,i.addSegment({x:t,y:n})},this.drawPulseConstant=function(){var e=i.segments[i.segments.length-1],t=i.lastY!==e.y?e:i.segments.pop();t&&(i.width++,i.addSegment({x:t.x+1,y:t.y})),i.lastY=e.y},this.truncateSegments=function(e){if(!(e>i.width)){var t=i.width-e,n=!1;i.segments=i.segments.reverse().map((function(e){var o=e.x,i=e.y;return o-=t,o<=0&&!n&&(n=!0,o=0),{x:o,y:i}})).filter((function(e){var t=e.x;return t>=0})).reverse(),i.width=e}},this.id=t,this.name=n,this.initialize(o)}))),No=Object(rn["a"])((function e(t,n,o){var i=this;Object(on["a"])(this,e),this.id=Object(D["a"])(),this.signal=0,this.interval=0,this.emitter=new an["TinyEmitter"],this.on=function(e,t){i.emitter.on(e,t)},this.update=function(e){e>=i.lastUpdate+i.interval&&(i.signal=1===i.signal?-1:1,i.lastUpdate=e,i.emitter.emit("change",i.signal))},this.name=t,this.lastUpdate=0,this.signal=o,this.interval=n})),Do=Object(rn["a"])((function e(){var t=this;Object(on["a"])(this,e),this.isPaused=!0,this.waves={},this.refreshRate=20,this.lastUpdateTime=Date.now(),this.timeMsElapsed=0,this.timeMsOffset=0,this.emitter=new an["TinyEmitter"],this.start=function(){if(t.isPaused){var e=t.lastUpdateTime%t.refreshRate;t.lastUpdateTime=Date.now()+e,t.isPaused=!1,t.tick()}},this.stop=function(){t.isPaused=!0},this.clear=function(){Object.values(t.waves).forEach((function(e){e instanceof Eo&&e.reset()}))},this.computeWaveGeometry=function(e){var t={},n=function(e){return e.map((function(e){var t=e.x,n=e.y;return"".concat(t,",").concat(n)}))};for(var o in e)if(e[o]instanceof Eo){var i=e[o],r=n(i.segments);t[o]={points:r.join(" "),width:i.segments.slice(-1)[0].x,hue:i.hue}}return t},this.on=function(e,n){t.emitter.on(e,n)},this.broadcast=function(){var e=1e3/t.refreshRate,n=2*window.screen.width/e;if(t.timeMsElapsed/1e3-t.timeMsOffset>=n){var o=Math.max(n/2,window.innerWidth/e);t.timeMsOffset+=o,Object.values(t.waves).forEach((function(t){t instanceof Eo&&t.truncateSegments(o*e)}))}t.emitter.emit("change",t.computeWaveGeometry(t.waves))},this.tick=function(){if(!t.isPaused){var e=Date.now(),n=1e4,o=!1;if(e>=t.lastUpdateTime+n)return t.stop(),void t.start();while(e>=t.lastUpdateTime+t.refreshRate){var i=Math.min(t.refreshRate,e-t.lastUpdateTime);o=!0,t.timeMsElapsed+=i,t.lastUpdateTime+=i,t.update()}o&&t.broadcast(),requestAnimationFrame(t.tick)}},this.update=function(){Object.values(t.waves).forEach((function(e){return e.update(t.timeMsElapsed)}))},this.add=function(e){t.waves.hasOwnProperty(e.id)||(t.waves[e.id]=e,0===t.timeMsElapsed&&t.broadcast())},this.remove=function(e){var n=e.id;delete t.waves[n],0===Object.keys(t.waves).length&&(t.stop(),t.clear())}}));function _o(e,t,n){switch(e){case Me.And:return new ko(t,n);default:return new ko(t,n)}}function Vo(e,t){var n=e.id,o=e.type,i=e.subtype;switch(o){case Jt.CircuitNode:return new go(n,t);case Jt.InputNode:return new yo(n,t);case Jt.LogicGate:return _o(i,n,t);case Jt.Buffer:case Jt.Freeport:return new Bo(n,t);default:return new Io(n,t)}}var Mo={getLogicGateNode:_o,getCircuitNode:Vo},zo=Object(rn["a"])((function e(t,n,o){var i=this;Object(on["a"])(this,e),this.nodes={},this.waves={},this.clocks={},this.valueMap={},this.circuit=new wo,this.integratedCircuits={},this.oscillator=new Do,this.emitter=new an["TinyEmitter"],this.isPaused=!1,this.oscillogram={},this.integratedCircuitGroups={},this.addElements=function(e,t,n){e.forEach((function(e){return i.addNode(e,n)})),t.forEach((function(e){return i.addConnection(e.source,e.target)}))},this.on=function(e,t){i.emitter.on(e,t)},this.emit=function(){i.emitter.emit("change",i.valueMap,i.oscillogram)},this.pause=function(){i.oscillator.stop(),i.isPaused=!0},this.unpause=function(){i.isPaused=!1,i.oscillator.start(),i.emit()},this.step=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!i.isPaused){i.circuit.next();var t=i.circuit.queue.length>0;if(e>1e4)throw new Error("An infinite loop detected!");t&&i.step(++e),i.emit()}},this.setOutputValue=function(e,t){i.valueMap[e]=t,i.emit()},this.setPortValue=function(e,t){var n;i.nodes[e]&&i.nodes[e].value!==t&&(i.nodes[e].setValue(t),i.circuit.enqueue(i.nodes[e]),null===(n=i.waves[e])||void 0===n||n.drawPulseChange(t),i.step())},this.addIntegratedCircuit=function(e,t){if(e.integratedCircuit){var n=e.integratedCircuit,o=n.items,r=n.connections,c=n.ports;Object.values(o).forEach((function(e){i.addNode(e,c,!0)})),Object.values(r).forEach((function(e){i.addConnection(e.source,e.target)}))}},this.addNode=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0!==e.portIds.length){if(e.integratedCircuit)return i.addIntegratedCircuit(e,t);var o=e.portIds.filter((function(e){return t[e].type===Wt.Input})),r=e.portIds.filter((function(e){return t[e].type===Wt.Output})),c=Mo.getCircuitNode(e,o);c.forceContinue=n,e.portIds.forEach((function(e){return i.addPort(e,c)})),e.type===Jt.InputNode&&e.subtype===Me.Clock&&i.addClock(r[0]),i.circuit.addNode(c),n||i.monitorNode(e,t)}},this.removeNode=function(e){var t=function e(t){return t.integratedCircuit?Object.values(t.integratedCircuit.items).reduce((function(t,n){return n.integratedCircuit?t.concat(e(n)).concat(n.portIds):t.concat(n.portIds)}),[]):[]};e.portIds.concat(t(e)).forEach((function(e){var t=i.nodes[e];t&&(i.circuit.removeNode(t),i.removePort(e))}))},this.monitorNode=function(e,t){var n,o;if(null!==(n=e.properties)&&void 0!==n&&null!==(o=n.showInOscilloscope)&&void 0!==o&&o.value){var r=e.portIds.filter((function(e){return t[e].type===Wt.Input})),c=e.portIds.filter((function(e){return t[e].type===Wt.Output})),s=e.type==Jt.OutputNode?r:c;s.forEach((function(e){i.monitorPort(e,i.nodes[e].value)}))}},this.addClock=function(e){i.clocks[e]=new No(e,1e3,1),i.clocks[e].on("change",(function(t){i.setPortValue(e,t)})),i.oscillator.add(i.clocks[e])},this.addSiblingPort=function(e,t){i.addPort(e,i.nodes[t])},this.addPort=function(e,t){i.nodes[e]=t,t.on("change",(function(t){var n;i.setOutputValue(e,t),null===(n=i.waves[e])||void 0===n||n.drawPulseChange(t)}))},this.removePort=function(e){i.clocks[e]&&i.oscillator.remove(i.clocks[e]),i.unmonitorPort(e),delete i.nodes[e],delete i.valueMap[e],delete i.clocks[e],delete i.waves[e]},this.addConnection=function(e,t){i.nodes[e]&&i.nodes[t]?i.circuit.addConnection(i.nodes[e],i.nodes[t],t):i.nodes[e]?console.log("MISSING TARGET: ",t," TRIED TO CONNECT TO ---",e):console.log("MISSING SOURCE: ",e," TRIED TO CONNECT TO ---",t)},this.removeConnection=function(e,t){i.nodes[e]&&i.nodes[t]?i.circuit.removeConnection(i.nodes[e],i.nodes[t]):console.log("MISSING NODE FOR REMOVING CONNECTION: ",i.nodes[e],i.nodes[t],e,t)},this.monitorPort=function(e,t){i.waves[e]||(i.waves[e]=new Eo(e,e,t),i.oscillator.add(i.waves[e]))},this.unmonitorPort=function(e){i.waves[e]&&(i.oscillator.remove(i.waves[e]),i.oscillator.broadcast()),delete i.waves[e],delete i.oscillator.waves[e],delete i.oscillogram[e]},this.addElements(t,n,o),this.oscillator.on("change",(function(e){i.oscillogram=e,i.emit()}))}));function To(e,t,n){var o=Math.pow(e.x-t.x,2),i=Math.pow(e.y-t.y,2);return Math.sqrt(o+i)<=n}function Fo(e,t,n,o){var i=function(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)};return i(e,n,o)!==i(t,n,o)&&i(e,t,n)!==i(e,t,o)}function Lo(e,t,n){var o={x:n.left,y:n.top},i={x:n.right,y:n.top},r={x:n.right,y:n.bottom},c={x:n.left,y:n.bottom};return Fo(e,t,o,i)||Fo(e,t,i,r)||Fo(e,t,r,c)||Fo(e,t,c,o)}function Ao(e,t){return{left:e.left*t,top:e.top*t,bottom:e.bottom*t,right:e.right*t}}function Ro(e){return e.left!==e.right||e.top!==e.bottom}function qo(e){return[{left:e.x,right:e.x,top:-1/0,bottom:1/0},{left:-1/0,right:1/0,top:e.y,bottom:e.y}]}function Uo(e){return{left:e.x,top:e.y,right:e.x,bottom:e.y}}function $o(e,t){return!(e.left>=t.right||t.left>=e.right)&&!(e.top>=t.bottom||t.top>=e.bottom)}function Go(e){if(e.rotation%2===0)return{left:e.position.x,top:e.position.y,bottom:e.height+e.position.y,right:e.width+e.position.x};var t=e.position.x+e.width/2,n=e.position.y+e.height/2;return{left:t-e.height/2,top:n-e.width/2,right:t+e.height/2,bottom:n+e.width/2}}function Ko(e){return e.reduce((function(e,t){return{left:Math.min(e.left,t.left),top:Math.min(e.top,t.top),right:Math.max(e.right,t.right),bottom:Math.max(e.bottom,t.bottom)}}),{left:1/0,top:1/0,right:0,bottom:0})}var Wo={isInNeighborhood:To,isLineIntersectingRectangle:Lo,scaleBoundingBox:Ao,isTwoDimensional:Ro,getLinearBoundaries:qo,getPointBoundary:Uo,hasIntersection:$o,getItemBoundingBox:Go,getGroupBoundingBox:Ko};function Xo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(e+t%4+4)%4}function Zo(e,t,n){var o=e.right-e.left,i=e.bottom-e.top,r=e.left+o/2,c=e.top+i/2,s=t.position.x,a=t.position.y,u=s+t.width/2,l=a+t.height/2,d=Math.sqrt(Math.pow(r-u,2)+Math.pow(c-l,2)),p=Math.atan2(l-c,u-r),f=90*n*(Math.PI/180)+p,h=d*Math.cos(f)+r,m=d*Math.sin(f)+c;return{x:h-t.width/2,y:m-t.height/2}}function Yo(e,t,n,o){var i=n.boundingBox,r=i.left,c=i.top,s=i.bottom,a=i.right,u=(e.orientation+n.rotation)%2===0?Math.floor((s-c)/t.length):Math.floor((a-r)/t.length),l=u*(o+1)-u/2;switch(Xo(e.orientation+n.rotation)){case Po.Left:return{x:r,y:c+l};case Po.Top:return{x:a-l,y:c};case Po.Right:return{x:a,y:s-l};case Po.Bottom:return{x:r+l,y:s}}}var Ho={rotate:Xo,getGroupedItemRotatedPosition:Zo,getRotatedPortPosition:Yo};function Jo(e,t,n){var o=Object.values(e).reduce((function(e,o){var i=e.connectionIds,r=e.freeportIds;if(n===o.connectionChainId){var c=t[o.source],s=t[o.target];i.add(o.id),null!==c&&void 0!==c&&c.isFreeport&&r.add(c.elementId),null!==s&&void 0!==s&&s.isFreeport&&r.add(s.elementId)}return{connectionIds:i,freeportIds:r}}),{connectionIds:new Set,freeportIds:new Set}),i=o.connectionIds,r=o.freeportIds;return{connectionIds:Array.from(i),freeportIds:Array.from(r)}}function Qo(e,t){return e.zIndex>t.zIndex?1:e.zIndex<t.zIndex?-1:0}function ei(e,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{id:Object(D["a"])(),name:"",type:e,subtype:t,portIds:[],groupId:null,rotation:0,boundingBox:{top:0,left:0,right:0,bottom:0},position:{x:0,y:0},zIndex:0,width:0,height:0,isSelected:!1,properties:n}}function ti(e){var t=Object(_t["cloneDeep"])(e),n=t.ports,o=t.items,i=t.connections,r=t.groups,c=ei(Jt.IntegratedCircuit,"Flip flop");return Object.values(o).forEach((function(e){if(e.type===Jt.InputNode||e.type===Jt.OutputNode){var t=e.type===Jt.InputNode?Wt.Output:Wt.Input,o=e.type===Jt.InputNode?Po.Left:Po.Right;e.portIds.filter((function(e){return n[e].type===t})).forEach((function(t){var i=Object(D["a"])();n[i]=Object(d["a"])(Object(d["a"])({},Object(_t["cloneDeep"])(n[t])),{},{type:e.type===Jt.InputNode?Wt.Input:Wt.Output,id:i,elementId:e.id,orientation:o}),e.portIds.push(i),c.portIds.push(i)})),e.type=Jt.Buffer}})),c.integratedCircuit={items:o,connections:i,ports:n,groups:r,serializedState:JSON.stringify({items:e.items,connections:e.connections,ports:e.ports,groups:e.groups})},c}function ni(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(_t["cloneDeep"])(e),o=n.items,i=n.connections,r=n.ports,c=n.groups;function s(e){return Object.values(e).forEach((function(n){var o=n.id,i=Object(D["a"])();t[o]=i,e[i]=Object(_t["cloneDeep"])(n),delete e[o]})),e}function a(e,n){return Object.values(e).forEach((function(e){e.groupId=null!==e.groupId?t[e.groupId]:null})),Object.values(n).forEach((function(e){e.groupId=null!==e.groupId?t[e.groupId]:null})),{connections:e,items:n}}function u(e){return Object.values(e).forEach((function(n){var o=n.id,i=Object(D["a"])();t[o]=i,e[i]=Object(_t["cloneDeep"])(n),e[i].id=i,e[i].source=t[e[i].source],e[i].target=t[e[i].target],delete e[o]})),e}function l(e){return Object.values(e).forEach((function(n){e[n.id].connectionChainId=t[e[n.id].connectionChainId]})),e}function p(e){return Object.values(e).forEach((function(n){var o=n.id,i=Object(D["a"])();t[o]=i,e[i]=Object(_t["cloneDeep"])(n),n.integratedCircuit?e[i].integratedCircuit=Object(d["a"])({serializedState:n.integratedCircuit.serializedState},ni(Object(_t["cloneDeep"])(n.integratedCircuit),t)):e[i].id=i,e[i].portIds=n.portIds.map((function(e){return t[e]})),delete e[o]})),e}function f(e){return Object.values(e).forEach((function(n){e[n.id].elementId=t[n.elementId]})),e}function h(e){return Object.values(e).forEach((function(n){var o=n.id,i=Object(D["a"])();t[o]=i,e[i]=Object(_t["cloneDeep"])(n),e[i].id=i,delete e[o]})),e}return r=h(r),o=p(o),r=f(r),i=u(i),i=l(i),c=s(c),Object(d["a"])(Object(d["a"])({},a(i,o)),{},{ports:r,groups:c})}function oi(e){if(!e.integratedCircuit)return e;var t=ni({items:Object(p["a"])({},e.id,e),connections:{},ports:{},groups:{}}),n=t.items;return Object.values(n)[0]}var ii={mapStandardCircuitIds:ni,mapIntegratedCircuitIds:oi};function ri(e,t){var n=[e.type];return e.subtype!==Me.None&&n.push(e.subtype),n.push(t.toString()),n.join(" ")}var ci=function(e){return Object(o["b"])({id:e,state:function(){return{undoStack:[],redoStack:[],simulation:new zo([],[],{}),oscillogram:{},taxonomyCounts:{},zoomLevel:1,zIndex:1,isOscilloscopeEnabled:!0,isCircuitEvaluated:!1,isDebugging:!1,isDirty:!1,snapBoundaries:[],connectablePortIds:[],selectedConnectionIds:[],selectedItemIds:[],selectedPortIndex:-1,cachedState:null,activeFreeportId:null,activePortId:null,connectionPreviewId:null,items:{},connections:{},ports:{},groups:{}}},getters:{baseItems:function(e){return Object.values(e.connections).concat(Object.values(e.items)).sort(Qo)},zoom:function(e){return e.zoomLevel},hasSelection:function(e){return e.selectedItemIds.length>0||e.selectedConnectionIds.length>0},hasSelectedItems:function(e){return e.selectedItemIds.length>0},selectedGroupIds:function(e){var t=new Set;return e.selectedItemIds.forEach((function(n){var o;return t.add(null===(o=e.items[n])||void 0===o?void 0:o.groupId)})),Array.from(t)},canGroup:function(){return this.selectedGroupIds.length>1||null===this.selectedGroupIds[0]},canUngroup:function(){return!0},canUndo:function(e){return e.undoStack.length>0},canRedo:function(e){return e.redoStack.length>0}},actions:{setZoom:function(e){this.zoomLevel=e},recycleSelection:function(e){var t=e?this.baseItems[0]:this.baseItems.slice(-1)[0];t&&(this.deselectAll(),this.setSelectionState({id:t.id,value:!0}))},loadDocument:function(e){this.buildCircuit(),this.applyState(e),this.reset()},saveIntegratedCircuit:function(){var e=this;return Object(nn["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=ti(e.$state),o=ii.mapIntegratedCircuitIds(n),e.addIntegratedCircuit(o);case 3:case"end":return t.stop()}}),t)})))()},buildCircuit:function(){var e=this;this.simulation.oscillator&&this.simulation.oscillator.stop();var t=new zo(Object.values(this.items),Object.values(this.connections),this.ports);t.on("change",(function(t,n){for(var o in t)e.ports[o]&&(e.ports[o].value=t[o]);e.oscillogram=n})),this.simulation=t},insertItem:function(e){var t=e.item,n=e.ports;this.commitState(),this.addNewItem({item:t,ports:n}),this.setItemPortPositions(t.id)},undo:function(){var e=this.undoStack.slice(-1).pop();e&&(this.redoStack.push(JSON.stringify({connections:this.connections,items:this.items,ports:this.ports,groups:this.groups})),this.applyState(e),this.undoStack.pop(),this.isDirty=!0)},redo:function(){var e=this.redoStack.slice(-1).pop();e&&(this.undoStack.push(JSON.stringify({connections:this.connections,items:this.items,ports:this.ports,groups:this.groups})),this.applyState(e),this.redoStack.pop(),this.isDirty=!0)},commitState:function(){this.cacheState(),this.commitCachedState()},deleteSelection:function(){var e=this;this.commitState();var t=Object.values(this.items).filter((function(e){var t=e.isSelected,n=e.type;return t&&n!==Jt.Freeport})),n=t.map((function(e){var t=e.id;return t}));Object.values(this.connections).filter((function(t){var o=e.ports[t.source],i=e.ports[t.target];if(o&&i)return n.includes(o.elementId)||n.includes(i.elementId)})).forEach((function(t){var n=t.id;return e.setSelectionState({id:n,value:!0})})),Object.values(this.connections).filter((function(e){var t=e.isSelected;return t})).forEach((function(t){e.disconnect({source:t.source,target:t.target})})),t.forEach((function(t){return e.removeElement(t.id)})),Object.values(this.items).filter((function(e){var t=e.isSelected,n=e.type;return t&&n===Jt.Freeport})).forEach((function(t){return e.removeFreeport(t.id)}))},setSnapBoundaries:function(e){var t=this,n=function(){var n=t.items[e];if(t.connectablePortIds.length)return t.connectablePortIds.map((function(e){return Wo.getPointBoundary(t.ports[e].position)}));if(n&&!n.groupId){if(n.type!==Jt.Freeport)return Object.values(t.items).filter((function(t){return t.id!==e&&t.type!==Jt.Freeport})).map((function(e){return e.boundingBox}));if(n.portIds.length>1)return Object.values(t.connections).reduce((function(e,o){return n.portIds.includes(o.source)?e.concat(Wo.getLinearBoundaries(t.ports[o.target].position)):n.portIds.includes(o.target)?e.concat(Wo.getLinearBoundaries(t.ports[o.source].position)):e}),[])}return[]}();this.snapBoundaries=n},setItemSize:function(e){var t=e.rect,n=e.id,o=this.items[n];if(o){var i=o.position.x+o.width/2,r=o.position.y+o.height/2,c=i-t.width/2,s=r-t.height/2;this.items[n].position={x:c,y:s},this.items[n].width=t.width,this.items[n].height=t.height,this.setItemBoundingBox(n),this.setItemPortPositions(n),this.items[n].groupId&&this.setGroupBoundingBox(this.items[n].groupId||"")}},setItemPortPositions:function(e){var t=this,n=this.items[e];if(n){var o=n.portIds.reduce((function(e,o){var i=t.ports[o];if(i){var r,c=Ho.rotate(i.orientation+n.rotation);null===(r=e.get(c))||void 0===r||r.push(i)}return e}),new Map([[Po.Left,[]],[Po.Top,[]],[Po.Right,[]],[Po.Bottom,[]]])),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach((function(o,i){t.ports[o.id].position=Ho.getRotatedPortPosition(o,e,n,i)}))};i(o.get(Po.Left)),i(o.get(Po.Top)),i(o.get(Po.Right)),i(o.get(Po.Bottom))}},setItemPosition:function(e){var t=this,n=e.id,o=e.position,i=this.items[n],r={x:o.x-i.position.x,y:o.y-i.position.y};this.commitCachedState(),this.items[n].position=o,this.items[n].boundingBox={left:i.boundingBox.left+r.x,top:i.boundingBox.top+r.y,bottom:i.boundingBox.bottom+r.y,right:i.boundingBox.right+r.x},i.portIds.forEach((function(e){var n=t.ports[e];t.ports[e].position={x:n.position.x+r.x,y:n.position.y+r.y}}))},moveSelectionPosition:function(e){var t=this.selectedItemIds[0];if(t){var n=this.items[t],o={x:n.position.x+e.x,y:n.position.y+e.y};this.commitState(),this.setSelectionPosition({id:t,position:o})}},setSelectionPosition:function(e){var t=this,n=e.id,o=e.position,i=this.items[n],r={x:o.x-i.position.x,y:o.y-i.position.y},c=new Set;if(this.setSelectionState({id:n,value:!0}),i.type===Jt.Freeport)return this.setItemPosition({id:n,position:o});this.selectedItemIds.forEach((function(e){var n=t.items[e],o={x:n.position.x+r.x,y:n.position.y+r.y};n.groupId&&c.add(n.groupId),t.setItemPosition({id:e,position:o})})),c.forEach((function(e){var n=t.groups[e];t.groups[e].boundingBox={left:n.boundingBox.left+r.x,top:n.boundingBox.top+r.y,right:n.boundingBox.right+r.x,bottom:n.boundingBox.bottom+r.y}}))},setItemBoundingBox:function(e){var t=this.items[e];t&&(this.items[e].boundingBox=Wo.getItemBoundingBox(t))},setGroupBoundingBox:function(e){var t=this;if(this.groups[e]){var n=this.groups[e].itemIds.map((function(e){return t.items[e].boundingBox}));this.groups[e].boundingBox=Wo.getGroupBoundingBox(n)}},group:function(){var e=this;this.commitState();var t=Object(D["a"])(),n=Object.values(this.items).filter((function(e){var t=e.isSelected;return t})),o=n.reduce((function(e,t){return e.concat(t.portIds)}),[]),i=Object.values(this.connections).filter((function(e){return o.includes(e.source)&&o.includes(e.target)&&e.isSelected}));n.forEach((function(t){return t.groupId&&e.destroyGroup(t.groupId)})),i.forEach((function(t){return t.groupId&&e.destroyGroup(t.groupId)}));var r=[].concat(Object(L["a"])(n),Object(L["a"])(i)).reduce((function(e,t){return Math.max(t.zIndex,e)}),0);this.setZIndex(r);var c={id:t,itemIds:n.map((function(e){var t=e.id;return t})),connectionIds:i.map((function(e){var t=e.id;return t})),isSelected:!0,boundingBox:{left:0,top:0,right:0,bottom:0},position:{x:0,y:0},zIndex:r};this.groups[t]=c,c.itemIds.forEach((function(t){e.items[t].groupId=c.id})),c.connectionIds.forEach((function(t){e.connections[t].groupId=c.id})),this.setGroupBoundingBox(t)},ungroup:function(){for(var e in this.commitState(),this.groups)this.groups[e].isSelected&&this.destroyGroup(e)},deselectAll:function(){for(var e in this.clearStatelessInfo(),this.connections)this.connections[e].isSelected=!1,this.selectedConnectionIds=[];for(var t in this.items)this.items[t].isSelected=!1,this.selectedItemIds.push(t),this.selectedItemIds=[]},selectAll:function(){for(var e in this.clearStatelessInfo(),this.connections)this.connections[e].isSelected=!0,this.selectedConnectionIds.push(e);for(var t in this.items)this.items[t].isSelected=!0,this.selectedItemIds.push(t)},clearStatelessInfo:function(){this.unsetConnectionPreview(),this.snapBoundaries=[],this.connectablePortIds=[],this.selectedConnectionIds=[],this.selectedItemIds=[],this.selectedPortIndex=-1,this.cachedState=null,this.activePortId=null,this.connectionPreviewId=null},createSelection:function(e){var t=this;if(Wo.isTwoDimensional(e))try{var n=Object.keys(this.items).filter((function(n){return Wo.hasIntersection(e,t.items[n].boundingBox)})),o=Object.keys(this.connections).filter((function(n){var o=t.connections[n],i=t.ports[o.source],r=t.ports[o.target];return Wo.isLineIntersectingRectangle(i.position,r.position,e)}));n.concat(o).forEach((function(e){t.SET_SELECTION_STATE({id:e,isSelected:!0})})),this.selectItemConnections(n)}catch(i){console.log("SELECTION ERROR: ",i,e)}},selectItemConnections:function(e){var t=this,n=e.reduce((function(e,n){return e.concat(t.items[n].portIds)}),[]);for(var o in this.connections){var i=this.connections[o];n.includes(i.source)&&n.includes(i.target)&&this.SET_SELECTION_STATE({id:o,isSelected:!0})}},setSelectionState:function(e){var t=this,n=e.id,o=e.value,i=this.items[n]||this.connections[n],r=o;if(i&&i.isSelected!==r)if(i.groupId){var c=this.groups[i.groupId],s=c.itemIds,a=c.connectionIds;s.concat(a).forEach((function(e){t.SET_SELECTION_STATE({id:e,isSelected:r})})),this.SET_SELECTION_STATE({id:i.groupId,isSelected:r})}else this.SET_SELECTION_STATE({id:n,isSelected:r})},setConnectionPreview:function(e){if(this.activePortId&&e){var t=this.activePortId,n=e;this.ports[this.activePortId].type===Wt.Input&&(t=e,n=this.activePortId),this.unsetConnectionPreview(),this.connect({source:t,target:n,isPreview:!0})}},unsetConnectionPreview:function(){this.connectionPreviewId&&this.disconnect(this.connections[this.connectionPreviewId]),this.connectionPreviewId=null},commitPreviewedConnection:function(){this.connectionPreviewId&&this.commitCachedState(),this.connectionPreviewId=null},cycleConnectionPreviews:function(e){var t;e&&e!==this.activePortId&&this.setActivePortId(e);var n=this.selectedPortIndex+1;n<=0&&(n=0),n>=this.connectablePortIds.length&&(n=-1),this.cachedState||this.cacheState();var o=this.connectablePortIds[n];!o||null!==(t=this.ports[e])&&void 0!==t&&t.connectedPortIds.includes(o)?(0===this.connectablePortIds.length&&fn.beep(),this.unsetConnectionPreview()):this.setConnectionPreview(o),this.selectedPortIndex=n},setActivePortId:function(e){this.activePortId!==e&&(e?this.setConnectablePortIds({portId:e}):this.connectablePortIds=[],this.activePortId=e,this.selectedPortIndex=-1)},rotate:function(e){var t=this;this.commitState();var n=Object.values(this.items).filter((function(e){var t=e.isSelected;return t})),o=n.reduce((function(e,t){return{left:Math.min(t.boundingBox.left,e.left),top:Math.min(t.boundingBox.top,e.top),right:Math.max(t.boundingBox.right,e.right),bottom:Math.max(t.boundingBox.bottom,e.bottom)}}),{left:1/0,top:1/0,right:0,bottom:0}),i=new Set;n.forEach((function(n){var r=Ho.rotate(n.rotation+e);n.groupId&&i.add(n.groupId),t.items[n.id].rotation=r,t.items[n.id].portIds.forEach((function(e){t.ports[e].rotation=r})),t.setItemPosition({id:n.id,position:Ho.getGroupedItemRotatedPosition(o,n,e)}),t.setItemBoundingBox(n.id),t.setItemPortPositions(n.id)})),i.forEach((function(e){t.setGroupBoundingBox(e)}))},setPortValue:function(e){var t=e.id,n=e.value;this.simulation.setPortValue(t,n),this.simulation.circuit.isComplete()||(this.isCircuitEvaluated=!1)},removeFreeport:function(e){var t=this.items[e],n="",o="";Object.values(this.connections).forEach((function(e){e.target===t.portIds[0]&&(n=e.source),e.source===t.portIds[1]&&(o=e.target)})),n&&this.disconnect({source:n,target:t.portIds[0]}),o&&this.disconnect({source:t.portIds[1],target:o}),n&&o&&this.connect({source:n,target:o}),this.removeElement(e)},createFreeport:function(e){this.items[e.itemId]||(e.sourceId&&e.targetId&&this.commitState(),this.deselectAll(),this.addFreeportItem(e),this.setItemBoundingBox(e.itemId),this.activeFreeportId=e.itemId,e.sourceId&&e.targetId&&this.disconnect({source:e.sourceId,target:e.targetId}),e.sourceId&&this.connect({source:e.sourceId,target:e.inputPortId,connectionChainId:e.connectionChainId}),e.targetId&&this.connect({source:e.outputPortId,target:e.targetId,connectionChainId:e.connectionChainId}),e.sourceId&&e.targetId&&(this.deselectAll(),this.setSelectionState({id:e.itemId,value:!0}),this.incrementZIndex(1)))},connectFreeport:function(e){var t=this,n=e.sourceId,o=e.targetId,i=e.portId,r=this.ports[i],c=Object.values(this.ports).find((function(e){return Wo.isInNeighborhood(e.position,r.position,10)&&e.id!==i&&t.connectablePortIds.includes(e.id)}));c?(this.commitState(),n?(this.disconnect({source:n,target:i}),this.connect({source:n,target:c.id})):o&&(this.disconnect({source:i,target:o}),this.connect({source:c.id,target:o}))):this.disconnect({source:n||i,target:o||i});var s=Object.values(this.items).find((function(e){var t=e.portIds;return t.includes(i)}));s&&this.removeElement(s.id),this.clearStatelessInfo()},setConnectablePortIds:function(e){var t=e.portId,n=e.isDragging,o=this.ports[t];if(!o.isFreeport){var i=Object.values(this.connections).reduce((function(e,t){return e.concat([t.source,t.target])}),[]);n&&i.splice(-2);var r=o.type===Wt.Output?function(e){return e.type===Wt.Input&&!e.isFreeport&&!i.includes(e.id)&&e.elementId!==o.elementId}:function(e){return e.type===Wt.Output&&!e.isFreeport&&!i.includes(o.id)&&e.elementId!==o.elementId};this.connectablePortIds=Object.values(this.ports).filter(r).map((function(e){var t=e.id;return t}))}},stop:function(){this.simulation.pause()},start:function(){this.isDebugging||this.simulation.unpause()},reset:function(){var e=this;this.buildCircuit(),this.simulation.isPaused=this.isDebugging,this.oscillogram={},this.simulation.oscillogram={},Object.values(this.items).forEach((function(t){t.portIds.forEach((function(n){var o,i;(e.ports[n].value=ho.UNKNOWN,null!==(o=t.properties)&&void 0!==o&&o.startValue&&e.ports[n].type===Wt.Output)&&e.setPortValue({id:n,value:null===(i=t.properties)||void 0===i?void 0:i.startValue.value})}))})),this.simulation.unpause()},toggleDebugger:function(){this.isDebugging?this.simulation.unpause():this.simulation.pause(),this.isDebugging=!this.isDebugging},toggleOscilloscope:function(){this.isOscilloscopeEnabled?this.disableOscilloscope():this.enableOscilloscope()},enableOscilloscope:function(){var e=this;Object.values(this.items).forEach((function(t){return e.simulation.monitorNode(t,e.ports)})),this.isOscilloscopeEnabled=!0},disableOscilloscope:function(){var e=this;Object.values(this.items).forEach((function(t){var n=t.portIds;n.forEach(e.simulation.unmonitorPort)})),this.oscillogram={},this.simulation.oscillogram={},this.isOscilloscopeEnabled=!1},clearOscilloscope:function(){this.simulation.oscillator.clear()},setOscilloscopeVisibility:function(e){var t=this,n=e.id,o=e.value;if(o){var i=this.items[n],r=i.type===Jt.OutputNode?Wt.Input:Wt.Output;i.portIds.forEach((function(e){var n=t.ports[e];n.type===r&&t.simulation.monitorPort(e,n.value)}))}else{var c=this.items[n];c.portIds.forEach((function(e){t.simulation.unmonitorPort(e)}))}},setInputCount:function(e){var t=this,n=e.id,o=e.count,i=this.items[n],r=i.properties.inputCount.value;if(r>o)this.items[n].portIds.filter((function(e){return t.ports[e].type===Wt.Input})).slice(o).forEach((function(e){return t.removePort(e)}));else for(var c=r;c<o;c++){var s=Object(D["a"])();this.addPort(n,{id:s,name:"",connectedPortIds:[],type:Wt.Input,elementId:n,virtualElementId:n,orientation:Po.Left,isFreeport:!1,position:{x:0,y:0},rotation:0,value:0})}},setProperties:function(e){var t=e.id,n=e.properties,o=this.items[t];for(var i in n){var r=n[i];if(o.properties[i].value!==r.value){switch(i){case"showInOscilloscope":this.setOscilloscopeVisibility({id:t,value:r.value});break;case"inputCount":this.setInputCount({id:t,count:r.value});break}this.items[t].properties[i].value=r.value}}},stepThroughCircuit:function(){this.simulation.circuit.next(),this.isCircuitEvaluated=this.simulation.circuit.isComplete()},setPortValues:function(e){for(var t in e)this.ports[t]&&(this.ports[t].value=e[t])},cacheState:function(){this.cachedState=JSON.stringify({connections:this.connections,items:this.items,ports:this.ports,groups:this.groups})},commitCachedState:function(){this.cachedState&&(this.undoStack.push(this.cachedState.toString()),this.cachedState=null,this.redoStack=[],this.isDirty=!0)},applyState:function(e){var t=this,n=JSON.parse(e),o=ii.mapStandardCircuitIds(n),i=o.items,r=o.connections,c=o.ports,s=o.groups;function a(e,t){var n=Object.keys(e),o=Object.keys(t);return n.filter((function(e){return!o.includes(e)}))}var u=a(this.items,i),l=a(this.connections,r),d=a(i,this.items),p=a(r,this.connections);l.forEach((function(e){return t.disconnect(t.connections[e])})),u.forEach((function(e){return t.removeElement(e)})),this.ports=c,this.items=i,this.groups=s,d.forEach((function(e){i[e].integratedCircuit?t.addIntegratedCircuit(i[e]):t.addNewItem({item:i[e],ports:Object.values(c)})})),p.forEach((function(e){return t.connect(r[e])}))},addPort:function(e,t){var n=this,o=Object.keys(this.simulation.nodes).find((function(t){return n.items[e].portIds.includes(t)}));this.ports[t.id]=t,this.items[e].portIds.push(t.id),o?this.simulation.addSiblingPort(t.id,o):this.simulation.addNode(this.items[e],this.ports)},removePort:function(e){var t=this;Object.values(this.connections).filter((function(t){var n=t.source,o=t.target;return n===e||o===e})).forEach((function(e){var n=Jo(Object.values(t.connections),t.ports,e.connectionChainId),o=n.connectionIds,i=n.freeportIds;o.forEach((function(e){var n=t.connections[e],o=n.source,i=n.target;t.simulation.removeConnection(o,i),delete t.connections[e]})),i.forEach((function(e){t.items[e].portIds.forEach((function(e){delete t.ports[e],t.simulation.removePort(e)})),delete t.items[e]}))}));var n=this.ports[e];if(n){var o=this.items[n.elementId];if(!o)return;var i=o.portIds.findIndex((function(t){return t===e}));-1!==i&&this.items[o.id].portIds.splice(i,1),delete this.ports[e],console.log("DELETING: ",e),this.simulation.removePort(e)}else console.log("CANT DELETE")},addNewItem:function(e){var t=this,n=e.item,o=e.ports;o.forEach((function(e){t.ports[e.id]=e}));var i="".concat(n.type,"_").concat(n.subtype);this.taxonomyCounts[i]||(this.taxonomyCounts[i]=0),n.name=ri(n,++this.taxonomyCounts[i]),this.items[n.id]=n,this.items[n.id].zIndex=++this.zIndex,this.simulation.addNode(n,this.ports)},addIntegratedCircuit:function(e){var t=this;if(e.integratedCircuit){var n={};e.portIds.forEach((function(o){var i;null!==(i=e.integratedCircuit)&&void 0!==i&&i.ports[o]&&(t.ports[o]=e.integratedCircuit.ports[o],n[o]=e.integratedCircuit.ports[o])}));var o="".concat(e.type,"_").concat(e.subtype);this.taxonomyCounts[o]||(this.taxonomyCounts[o]=0),this.items[e.id]=e,this.items[e.id].name=ri(e,++this.taxonomyCounts[o]),this.simulation.addNode(e,n)}},removeElement:function(e){var t=this,n=this.items[e];this.simulation.removeNode(n),n.portIds.forEach((function(e){return t.removePort(e)})),delete this.items[e]},SET_SELECTION_STATE:function(e){var t=this,n=e.id,o=e.isSelected,i=function(e,n){var i=t[n].findIndex((function(t){return t===e}));o&&-1===i&&t[n].push(e),o||-1===i||t[n].splice(i,1)};if(this.items[n])this.items[n].isSelected=o,i(n,"selectedItemIds");else if(this.connections[n]){var r=this.connections[n].connectionChainId,c=Jo(Object.values(this.connections),this.ports,r),s=c.connectionIds,a=c.freeportIds;s.forEach((function(e){t.connections[e].isSelected=o,i(e,"selectedConnectionIds")})),a.forEach((function(e){t.items[e].isSelected=o,i(e,"selectedItemIds")}))}},incrementZIndex:function(e){var t=Object.values(this.items),n=Object.values(this.connections),o=t.concat(n).sort(Qo),i=o.filter((function(e){var t=e.isSelected;return t})).map((function(e){var t=e.id;return t}));e>0&&i.reverse();var r=[];i.forEach((function(t){var n,i=o.findIndex((function(e){return e.id===t})),c=i+e;if(c<0||c>=o.length)r.push(o[i].id);else if(!r.includes(null===(n=o[c])||void 0===n?void 0:n.id)){var s=o[i];o.splice(i,1),o.splice(c,0,s)}})),o.forEach((function(e,t){e.zIndex=t+1})),this.zIndex=Object.keys(o).length},setZIndex:function(e){for(var t=Object.values(this.items),n=Object.values(this.connections),o=t.concat(n).sort(Qo),i=o.filter((function(e){var t=e.isSelected;return t})),r=0;r<o.length;r++)o[r].isSelected&&(o.splice(r,1),r--);o.splice.apply(o,[e-1,0].concat(Object(L["a"])(i))),o.forEach((function(e,t){e.zIndex=t+1})),this.zIndex=Object.keys(o).length},connect:function(e){var t=e.source,n=e.target,o=e.connectionChainId,i=e.isPreview,r="conn_".concat(Object(D["a"])());t&&n&&(this.connections[r]={id:r,source:t,target:n,connectionChainId:o||r,groupId:null,zIndex:++this.zIndex,isSelected:!1},i&&(this.connectionPreviewId=r),this.ports[t].connectedPortIds.push(n),this.ports[n].connectedPortIds.push(t),this.simulation.addConnection(t,n))},disconnect:function(e){var t=e.source,n=e.target,o=Object.values(this.connections).find((function(e){return e.source===t&&e.target===n}));if(o){this.simulation.removeConnection(t,n);var i=this.ports[t].connectedPortIds.findIndex((function(e){return e===n})),r=this.ports[n].connectedPortIds.findIndex((function(e){return e===t}));this.ports[t].connectedPortIds.splice(i,1),this.ports[n].connectedPortIds.splice(r,1),delete this.connections[o.id]}},destroyGroup:function(e){var t=this,n=this.groups[e];n.itemIds.forEach((function(e){t.items[e].groupId=null,t.selectedItemIds.push(e)})),n.connectionIds.forEach((function(e){t.connections[e].groupId=null,t.selectedConnectionIds.push(e)})),delete this.groups[e]},addFreeportItem:function(e){var t=e.itemId,n=e.inputPortId,o=e.outputPortId,i=e.position,r=e.value,c=function(e,n,o){return{id:e,type:n,name:"",elementId:t,orientation:o,isFreeport:!0,position:{x:0,y:0},rotation:0,value:r||0,connectedPortIds:[]}},s=[];n&&(this.ports[n]=c(n,Wt.Input,Po.Right),s.push(n)),o&&(this.ports[o]=c(o,Wt.Output,Po.Left),s.push(o)),this.taxonomyCounts[Jt.Freeport]||(this.taxonomyCounts[Jt.Freeport]=0),this.items[t]={id:t,name:"",type:Jt.Freeport,subtype:Me.None,portIds:s,position:i,rotation:0,boundingBox:{left:i.x,top:i.y,right:i.x,bottom:i.y},properties:{},isSelected:!1,groupId:null,zIndex:++this.zIndex,width:1,height:1},this.items[t].name=ri(this.items[t],++this.taxonomyCounts[Jt.Freeport]),this.simulation.addNode(this.items[t],this.ports,!0)}}})},si=n("e58a");n("2aa5"),n("62c8");function ai(e){var t;return(null===(t=e.split("\\").pop())||void 0===t?void 0:t.split("/").pop())||""}var ui=Object(o["b"])({id:"root",state:function(){return{documents:{},activeDocumentId:null}},getters:{hasOpenDocuments:function(e){return Object.keys(e.documents).length>0},activeDocument:function(e){return e.activeDocumentId?e.documents[e.activeDocumentId]:null}},actions:{openIntegratedCircuit:function(e){e.integratedCircuit&&this.openDocument("",e.integratedCircuit.serializedState,e.id,e.name)},newDocument:function(){console.log("will create new doc")},closeApplication:function(){var e=this;return Object(nn["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.closeAll();case 2:n=t.sent,n&&fn.quit();case 4:case"end":return t.stop()}}),t)})))()},closeAll:function(){var e=this;return Object(nn["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.activeDocumentId){t.next=9;break}return t.next=3,e.closeDocument(e.activeDocumentId);case 3:return n=t.sent,t.next=6,new Promise((function(e){return setTimeout(e)}));case 6:if(!n){t.next=8;break}return t.abrupt("return",e.closeAll());case 8:return t.abrupt("return",!1);case 9:return t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t)})))()},closeDocument:function(e){var t=this;return Object(nn["a"])(regeneratorRuntime.mark((function n(){var o,i,r,c,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=t.documents[e],i=o.store(),r=!0,t.activateDocument(e),!i.isDirty){n.next=12;break}if(c=fn.showMessageBox({message:"Save changes to ".concat(o.fileName,"?"),title:"Confirm",buttons:["Yes","No","Cancel"]}),0!==c){n.next=10;break}return n.next=9,t.saveActiveDocument();case 9:r=n.sent;case 10:if(2!==c){n.next=12;break}return n.abrupt("return",!1);case 12:return delete t.documents[e],t.activeDocumentId=null,s=Object.keys(t.documents).pop(),s&&t.activateDocument(s),n.abrupt("return",r);case 17:case"end":return n.stop()}}),n)})))()},saveActiveDocument:function(){var e=arguments,t=this;return Object(nn["a"])(regeneratorRuntime.mark((function n(){var o,i,r,c,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=e.length>0&&void 0!==e[0]&&e[0],n.prev=1,t.activeDocument){n.next=4;break}return n.abrupt("return",!0);case 4:if(t.activeDocument.filePath&&!o){n.next=10;break}if(i=t.activeDocument.fileName||"".concat(t.activeDocument.fileName,".alfx"),r=fn.showSaveFileDialog([{name:"Aristotle Logic Circuit (*.alfx)",extensions:["alfx"]}],i),r){n.next=9;break}return n.abrupt("return",!0);case 9:r&&(c=ai(r),t.activeDocument.filePath=r,t.activeDocument.fileName=c,t.activeDocument.displayName=c);case 10:return s=t.activeDocument.store(),si["a"].save(t.activeDocument.filePath,{items:s.items,connections:s.connections,groups:s.groups,ports:s.ports}),s.isDirty=!1,n.abrupt("return",!0);case 16:return n.prev=16,n.t0=n["catch"](1),fn.showMessageBox({message:"An error occurred while trying to save the file.",title:"Error",type:"error"}),n.abrupt("return",!1);case 20:case"end":return n.stop()}}),n,null,[[1,16]])})))()},selectDocument:function(){var e=this;return Object(nn["a"])(regeneratorRuntime.mark((function t(){var n,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=fn.showOpenFileDialog([{name:"Aristotle Logic Circuit (*.alfx)",extensions:["alfx"]}]),o=0;case 2:if(!(o<n.length)){t.next=16;break}return t.prev=3,t.next=6,si["a"].open(n[o]);case 6:i=t.sent,i&&e.openDocument(n[o],i,Object(D["a"])()),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](3),fn.showMessageBox({message:"An error occurred while trying to read the file.",title:"Error",type:"error"});case 13:o++,t.next=2;break;case 16:case"end":return t.stop()}}),t,null,[[3,10]])})))()},openDocument:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(this.documents[n])return this.activateDocument(n);var i=ci(n),r=i(),c=ai(e);r.loadDocument(t),this.documents[n]={fileName:c,filePath:e,displayName:o||c,store:i},this.activateDocument(n)},switchDocument:function(e){var t=this,n=Object.keys(this.documents),o=n.findIndex((function(e){return t.activeDocumentId===e})),i=o+e;0!==n.length&&(-1===o||i>=n.length?i=0:i<0&&(i=n.length-1),this.activateDocument(n[i]))},pauseActivity:function(){var e;null===(e=this.activeDocument)||void 0===e||e.store().stop()},resumeActivity:function(){var e;null===(e=this.activeDocument)||void 0===e||e.store().start()},activateDocument:function(e){this.pauseActivity(),this.activeDocumentId=e,this.resumeActivity()},openTestDocuments:function(){this.openDocument("flip-flop.alfx",JSON.stringify(uo),Object(D["a"])(),"flip-flop.alfx")},navigateDocumentList:function(e){var t=this,n=Object.keys(this.documents),o=n.findIndex((function(e){return e===t.activeDocumentId})),i=o+e;i<0&&(i=n.length-1),i>=n.length&&(i=0),this.activateDocument(n[i])}}}),li={class:"tab-item__label"};function di(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:Object(i["normalizeClass"])([{"tab-item--active":e.active,"tab-item--dirty":e.dirty},"tab-item"]),onMousedown:t[1]||(t[1]=function(t){return e.$emit("activate")})},[Object(i["createElementVNode"])("div",li,Object(i["toDisplayString"])(e.label)+Object(i["toDisplayString"])(e.dirty?"*":""),1),Object(i["createElementVNode"])("div",{class:"tab-item__close",onClick:t[0]||(t[0]=Object(i["withModifiers"])((function(t){return e.$emit("close")}),["stop"]))}," ✖ ")],34)}var pi=Object(i["defineComponent"])({name:"TabItem",props:{active:{type:Boolean,default:!1},label:{type:String,required:!0},dirty:{type:Boolean,default:!1}}});n("09bf");const fi=v()(pi,[["render",di]]);var hi=fi,mi={class:"tab-host"},bi={class:"tab-host__list"};function vi(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",mi,[Object(i["createElementVNode"])("div",bi,[Object(i["renderSlot"])(e.$slots,"tabs")]),Object(i["renderSlot"])(e.$slots,"default")])}var gi=Object(i["defineComponent"])({name:"TabHost"});n("2a6d");const Oi=v()(gi,[["render",vi]]);var yi=Oi,ji={style:{height:"100%"}},Ii=Object(i["createTextVNode"])(" oscilloscope not available in debugging mode "),xi=Object(i["createTextVNode"])(" the oscilloscope isn't enabled "),wi=Object(i["createTextVNode"])(" no waves to observe ");function Ci(e,t,n,o,r,c){var s=Object(i["resolveComponent"])("oscilloscope-title-bar"),a=Object(i["resolveComponent"])("oscilloscope-viewer"),u=Object(i["resolveComponent"])("oscilloscope-timeline");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",ji,[Object(i["createVNode"])(s,{clearable:!e.isDebugging&&e.isOscilloscopeEnabled&&e.hasWaves,onClear:e.clearOscilloscope},null,8,["clearable","onClear"]),e.isDebugging?(Object(i["openBlock"])(),Object(i["createBlock"])(a,{key:0},{default:Object(i["withCtx"])((function(){return[Ii]})),_:1})):e.isOscilloscopeEnabled?e.hasWaves?(Object(i["openBlock"])(),Object(i["createBlock"])(u,{key:3,oscillogram:e.oscillogram},null,8,["oscillogram"])):(Object(i["openBlock"])(),Object(i["createBlock"])(a,{key:2},{default:Object(i["withCtx"])((function(){return[wi]})),_:1})):(Object(i["openBlock"])(),Object(i["createBlock"])(a,{key:1},{default:Object(i["withCtx"])((function(){return[xi]})),_:1}))])}var ki={class:"oscilloscope-timeline"},Si={class:"oscilloscope-timeline__list",ref:"list"},Bi={class:"oscilloscope-timeline__display",ref:"timeline"},Pi=["width","viewBox"],Ei=["points","stroke"];function Ni(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",ki,[Object(i["createElementVNode"])("div",Si,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.oscillogram,(function(e,t){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:t,style:Object(i["normalizeStyle"])({color:"hsla(".concat(e.hue,",70%,70%,0.8)")}),class:"oscilloscope-timeline__label"},Object(i["toDisplayString"])(t),5)})),128))],512),Object(i["createElementVNode"])("div",Bi,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.oscillogram,(function(t,n){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{style:Object(i["normalizeStyle"])({width:"".concat(e.totalWidth,"px")}),key:n,class:"oscilloscope-timeline__item"},[Object(i["createElementVNode"])("div",{style:Object(i["normalizeStyle"])({width:"".concat(t.width,"px")}),class:"oscilloscope-timeline__svg"},[(Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",{width:t.width,viewBox:"0 0 ".concat(t.width," 1"),preserveAspectRatio:"none"},[Object(i["createElementVNode"])("polyline",{points:t.points,stroke:"hsla(".concat(t.hue,",70%,70%,0.8)"),"stroke-width":"2",fill:"none","vector-effect":"non-scaling-stroke"},null,8,Ei)],8,Pi))],4)],4)})),128))],512)])}var Di=Object(i["defineComponent"])({name:"OscilloscopeTimeline",props:{oscillogram:{type:Object,required:!0}},computed:{totalWidth:function(){return Object.values(this.oscillogram).reduce((function(e,t){var n=t.width;return Math.max(n,e)}),0)}},mounted:function(){var e=this.$refs.timeline,t=this.$refs.list;this.scrollToNextInterval(),t.addEventListener("scroll",this.onTimelineScroll),e.addEventListener("scroll",this.onTimelineScroll)},beforeUnmount:function(){var e=this.$refs.timeline,t=this.$refs.list;t.removeEventListener("scroll",this.onTimelineScroll),e.removeEventListener("scroll",this.onTimelineScroll)},methods:{scrollToNextInterval:function(){var e=this.$refs.timeline;e.scrollLeft=e.scrollWidth},onTimelineScroll:function(){var e=this.$refs.list,t=this.$refs.timeline;t&&(e.scrollTop=t.scrollTop)}},watch:{oscillogram:{handler:function(){this.scrollToNextInterval()},deep:!0}}});n("21c0");const _i=v()(Di,[["render",Ni]]);var Vi=_i,Mi={class:"oscilloscope-title-bar"},zi=Object(i["createElementVNode"])("div",{class:"oscilloscope-title-bar__title"},"Oscilloscope",-1),Ti={class:"oscilloscope-title-bar__actions"},Fi=["disabled"];function Li(e,t,n,o,r,c){var s=Object(i["resolveComponent"])("icon");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Mi,[zi,Object(i["createElementVNode"])("div",Ti,[Object(i["createElementVNode"])("button",{class:"oscilloscope-title-bar__button",title:"Clear oscilloscope",disabled:!e.clearable,onClick:t[0]||(t[0]=function(t){return e.$emit("clear")})},[Object(i["createVNode"])(s,{icon:e.faBan},null,8,["icon"])],8,Fi),Object(i["createElementVNode"])("button",{class:"oscilloscope-title-bar__button",title:"Close",onClick:t[1]||(t[1]=function(t){return e.$emit("close")})},[Object(i["createVNode"])(s,{icon:e.faClose},null,8,["icon"])])])])}var Ai=Object(i["defineComponent"])({name:"OscilloscopeTitleBar",components:{Icon:$n},props:{clearable:{type:Boolean,default:!0}},setup:function(){return{faBan:zn["b"],faClose:zn["d"]}}});n("9001");const Ri=v()(Ai,[["render",Li]]);var qi=Ri,Ui={class:"oscilloscope-viewer"};function $i(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Ui,[Object(i["renderSlot"])(e.$slots,"default")])}var Gi=Object(i["defineComponent"])({name:"OscilloscopeViewer"});n("33f2");const Ki=v()(Gi,[["render",$i]]);var Wi=Ki,Xi=Object(i["defineComponent"])({name:"Oscilloscope",components:{OscilloscopeTimeline:Vi,OscilloscopeTitleBar:qi,OscilloscopeViewer:Wi},props:{store:{type:Function,required:!0}},setup:function(e){var t=e.store(),n=Object(o["c"])(t),r=n.oscillogram,c=n.isDebugging,s=n.isOscilloscopeEnabled,a=Object(i["computed"])((function(){return Object.keys(r).length>0}));return{isDebugging:c,isOscilloscopeEnabled:s,hasWaves:a,oscillogram:r,clearOscilloscope:t.clearOscilloscope}}});const Zi=v()(Xi,[["render",Ci]]);var Yi=Zi,Hi=Object(i["defineComponent"])({name:"App",components:{Document:gn,ResizablePanes:ao,Toolbar:no,TabItem:hi,TabHost:yi,Oscilloscope:Yi},setup:function(){var e=ui(),t=Object(o["c"])(e),n=t.activeDocument,r=t.activeDocumentId,c=t.documents,s=t.hasOpenDocuments;function a(t){t.ctrlKey&&"Tab"===t.key&&(e.switchDocument(t.shiftKey?-1:1),t.preventDefault()),t.ctrlKey&&"R"===t.key.toUpperCase()&&(fn.canCloseWindow=!0),t.ctrlKey&&"Q"===t.key.toUpperCase()&&e.closeApplication(),t.ctrlKey&&"W"===t.key.toUpperCase()&&e.activeDocumentId&&(e.closeDocument(e.activeDocumentId),t.preventDefault())}return s.value||e.openTestDocuments(),Object(i["watchEffect"])((function(){return fn.setApplicationMenu(e)})),Object(i["watchEffect"])((function(){document.title=e.activeDocument?"".concat(e.activeDocument.displayName," - Aristotle"):"Aristotle"})),Object(i["onMounted"])((function(){document.addEventListener("keydown",a),fn.on("close",e.closeApplication)})),Object(i["onBeforeUnmount"])((function(){document.removeEventListener("keydown",a)})),{activeDocument:n,activeDocumentId:r,documents:c,hasOpenDocuments:s,activateDocument:e.activateDocument,closeDocument:e.closeDocument,switchDocument:e.switchDocument,openIntegratedCircuit:e.openIntegratedCircuit}},data:function(){return{horizontal:!1,isMouseDown:!1,lastPosition:0,toolboxWidth:20,documentHeight:80}}});n("92b5");const Ji=v()(Hi,[["render",u]]);var Qi=Ji;fn.assignQuitter(),Object(i["createApp"])(Qi).use(Object(o["a"])()).mount("#app")},cfe0:function(e,t,n){"use strict";n("54f0")},d00e:function(e,t,n){},d4c5:function(e,t,n){"use strict";n("11f9")},e58a:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var o=n("42c2"),i=n("f5f2"),r=n("30c6"),c=(n("d331"),n("df26"),n("bb01")),s=n.n(c),a=function(){function t(){Object(i["a"])(this,t)}return Object(r["a"])(t,null,[{key:"open",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,o,i,r,c,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(window.require){e.next=2;break}return e.abrupt("return");case 2:return n=window.require("fs"),o=new s.a,i=n.readFileSync(t),e.next=7,o.loadAsync(i);case 7:return r=e.sent,c=r.files,e.next=11,c.content.async("text");case 11:return a=e.sent,e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"save",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n,o){var i,r,c,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(window.require){t.next=2;break}return t.abrupt("return");case 2:return i=window.require("fs"),r=new s.a,r.file("content",JSON.stringify(o)),t.next=7,r.generateAsync({type:"blob"});case 7:return c=t.sent,t.t0=e,t.next=11,c.arrayBuffer();case 11:t.t1=t.sent,a=t.t0.from.call(t.t0,t.t1),i.writeFileSync(n,a);case 14:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}()}]),t}()}).call(this,n("f995").Buffer)},ecd2:function(e,t,n){},ef69:function(e,t,n){"use strict";n("9b9f")},efb6:function(e,t,n){},f152:function(e,t,n){"use strict";n("ecd2")},fcbe:function(e,t,n){},ff98:function(e,t,n){"use strict";n("af3c")}});