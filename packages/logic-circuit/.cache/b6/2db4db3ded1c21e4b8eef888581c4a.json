{"id":"K3Ut","dependencies":[{"name":"C:\\Users\\Josh\\Documents\\aristotle\\packages\\logic-circuit\\package.json","includedInParent":true,"mtime":1547308026947},{"name":"../base/InputNode","loc":{"line":3,"column":26},"parent":"C:\\Users\\Josh\\Documents\\aristotle\\packages\\logic-circuit\\esm\\base\\Circuit.js","resolved":"C:\\Users\\Josh\\Documents\\aristotle\\packages\\logic-circuit\\esm\\base\\InputNode.js"},{"name":"../types/Connection","loc":{"line":4,"column":27},"parent":"C:\\Users\\Josh\\Documents\\aristotle\\packages\\logic-circuit\\esm\\base\\Circuit.js","resolved":"C:\\Users\\Josh\\Documents\\aristotle\\packages\\logic-circuit\\esm\\types\\Connection.js"},{"name":"../types/LogicValue","loc":{"line":5,"column":27},"parent":"C:\\Users\\Josh\\Documents\\aristotle\\packages\\logic-circuit\\esm\\base\\Circuit.js","resolved":"C:\\Users\\Josh\\Documents\\aristotle\\packages\\logic-circuit\\esm\\types\\LogicValue.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var e=require(\"../base/InputNode\"),t=require(\"../types/Connection\"),n=require(\"../types/LogicValue\"),u=function(){function u(){this.queue=[],this.nodes=[],this.inputs=[]}return u.prototype.addNode=function(t){t instanceof e.default&&(this.inputs.push(t),this.enqueue(t)),this.nodes.push(t)},u.prototype.removeNode=function(t){t instanceof e.default&&(this.inputs.splice(this.inputs.indexOf(t),1),this.reset()),this.nodes.splice(this.nodes.indexOf(t),1),this.removeNodeOutputs(t),this.next()},u.prototype.addConnection=function(e,u,o){e.outputs.push(new t.default(u,o)),e.value=n.default.UNKNOWN,this.enqueue(e),this.next()},u.prototype.removeConnection=function(e,t){var u=this;e.outputs.concat().forEach(function(o,i){var s=o.node,p=o.index;t===s&&(t.update(n.default.UNKNOWN,p),e.outputs.splice(i,1),u.enqueue(e,t))}),this.next()},u.prototype.removeNodeOutputs=function(e){for(var t=0;t<e.outputs.length;t++)this.removeConnection(e,e.outputs[t].node)},u.prototype.enqueue=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach(function(t){~e.queue.indexOf(t)||e.queue.push(t)})},u.prototype.dequeue=function(e){var t=this.queue.indexOf(e);~t&&this.queue.splice(t,1)},u.prototype.reset=function(){this.nodes.forEach(function(e){return e.reset()})},u.prototype.next=function(){var e=this,t=!1;if(this.queue.forEach(function(n){e.enqueue.apply(e,n.propagate()),e.dequeue(n),n.isValueChanged&&(t=!0,n.isValueChanged=!1)}),!this.isComplete()&&!t)return this.next()},u.prototype.isComplete=function(){return 0===this.queue.length},u.prototype.debug=function(){this.nodes.forEach(function(e){var t=e.name,n=e.value,u=e.newValue;console.log(t+\":\",n,u)})},u}();exports.default=u;","map":{"mappings":[{"source":"base/Circuit.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"base/Circuit.js","name":"Object","original":{"line":2,"column":0},"generated":{"line":1,"column":13}},{"source":"base/Circuit.js","name":"defineProperty","original":{"line":2,"column":7},"generated":{"line":1,"column":20}},{"source":"base/Circuit.js","name":"exports","original":{"line":2,"column":22},"generated":{"line":1,"column":35}},{"source":"base/Circuit.js","original":{"line":2,"column":31},"generated":{"line":1,"column":43}},{"source":"base/Circuit.js","original":{"line":2,"column":45},"generated":{"line":1,"column":56}},{"source":"base/Circuit.js","name":"value","original":{"line":2,"column":47},"generated":{"line":1,"column":57}},{"source":"base/Circuit.js","original":{"line":2,"column":54},"generated":{"line":1,"column":64}},{"source":"base/Circuit.js","original":{"line":3,"column":0},"generated":{"line":1,"column":68}},{"source":"base/Circuit.js","name":"InputNode_1","original":{"line":3,"column":4},"generated":{"line":1,"column":72}},{"source":"base/Circuit.js","name":"require","original":{"line":3,"column":18},"generated":{"line":1,"column":74}},{"source":"base/Circuit.js","original":{"line":3,"column":26},"generated":{"line":1,"column":82}},{"source":"base/Circuit.js","name":"Connection_1","original":{"line":4,"column":4},"generated":{"line":1,"column":103}},{"source":"base/Circuit.js","name":"require","original":{"line":4,"column":19},"generated":{"line":1,"column":105}},{"source":"base/Circuit.js","original":{"line":4,"column":27},"generated":{"line":1,"column":113}},{"source":"base/Circuit.js","name":"LogicValue_1","original":{"line":5,"column":4},"generated":{"line":1,"column":136}},{"source":"base/Circuit.js","name":"require","original":{"line":5,"column":19},"generated":{"line":1,"column":138}},{"source":"base/Circuit.js","original":{"line":5,"column":27},"generated":{"line":1,"column":146}},{"source":"base/Circuit.js","name":"Circuit","original":{"line":6,"column":4},"generated":{"line":1,"column":169}},{"source":"base/Circuit.js","original":{"line":6,"column":29},"generated":{"line":1,"column":171}},{"source":"base/Circuit.js","name":"Circuit","original":{"line":7,"column":13},"generated":{"line":1,"column":182}},{"source":"base/Circuit.js","name":"Circuit","original":{"line":7,"column":13},"generated":{"line":1,"column":191}},{"source":"base/Circuit.js","name":"queue","original":{"line":13,"column":13},"generated":{"line":1,"column":195}},{"source":"base/Circuit.js","name":"queue","original":{"line":13,"column":13},"generated":{"line":1,"column":200}},{"source":"base/Circuit.js","original":{"line":13,"column":21},"generated":{"line":1,"column":206}},{"source":"base/Circuit.js","name":"nodes","original":{"line":19,"column":13},"generated":{"line":1,"column":209}},{"source":"base/Circuit.js","name":"nodes","original":{"line":19,"column":13},"generated":{"line":1,"column":214}},{"source":"base/Circuit.js","original":{"line":19,"column":21},"generated":{"line":1,"column":220}},{"source":"base/Circuit.js","name":"inputs","original":{"line":25,"column":13},"generated":{"line":1,"column":223}},{"source":"base/Circuit.js","name":"inputs","original":{"line":25,"column":13},"generated":{"line":1,"column":228}},{"source":"base/Circuit.js","original":{"line":25,"column":22},"generated":{"line":1,"column":235}},{"source":"base/Circuit.js","name":"Circuit","original":{"line":169,"column":11},"generated":{"line":1,"column":238}},{"source":"base/Circuit.js","name":"Circuit","original":{"line":32,"column":4},"generated":{"line":1,"column":245}},{"source":"base/Circuit.js","name":"prototype","original":{"line":32,"column":12},"generated":{"line":1,"column":247}},{"source":"base/Circuit.js","name":"addNode","original":{"line":32,"column":22},"generated":{"line":1,"column":257}},{"source":"base/Circuit.js","original":{"line":32,"column":32},"generated":{"line":1,"column":265}},{"source":"base/Circuit.js","name":"node","original":{"line":32,"column":42},"generated":{"line":1,"column":274}},{"source":"base/Circuit.js","name":"node","original":{"line":33,"column":12},"generated":{"line":1,"column":277}},{"source":"base/Circuit.js","name":"InputNode_1","original":{"line":33,"column":28},"generated":{"line":1,"column":290}},{"source":"base/Circuit.js","name":"default","original":{"line":33,"column":40},"generated":{"line":1,"column":292}},{"source":"base/Circuit.js","name":"inputs","original":{"line":34,"column":17},"generated":{"line":1,"column":302}},{"source":"base/Circuit.js","name":"inputs","original":{"line":34,"column":17},"generated":{"line":1,"column":307}},{"source":"base/Circuit.js","name":"push","original":{"line":34,"column":24},"generated":{"line":1,"column":314}},{"source":"base/Circuit.js","name":"node","original":{"line":34,"column":29},"generated":{"line":1,"column":319}},{"source":"base/Circuit.js","name":"enqueue","original":{"line":35,"column":17},"generated":{"line":1,"column":322}},{"source":"base/Circuit.js","name":"enqueue","original":{"line":35,"column":17},"generated":{"line":1,"column":327}},{"source":"base/Circuit.js","name":"node","original":{"line":35,"column":25},"generated":{"line":1,"column":335}},{"source":"base/Circuit.js","name":"nodes","original":{"line":37,"column":13},"generated":{"line":1,"column":339}},{"source":"base/Circuit.js","name":"nodes","original":{"line":37,"column":13},"generated":{"line":1,"column":344}},{"source":"base/Circuit.js","name":"push","original":{"line":37,"column":19},"generated":{"line":1,"column":350}},{"source":"base/Circuit.js","name":"node","original":{"line":37,"column":24},"generated":{"line":1,"column":355}},{"source":"base/Circuit.js","name":"Circuit","original":{"line":44,"column":4},"generated":{"line":1,"column":359}},{"source":"base/Circuit.js","name":"prototype","original":{"line":44,"column":12},"generated":{"line":1,"column":361}},{"source":"base/Circuit.js","name":"removeNode","original":{"line":44,"column":22},"generated":{"line":1,"column":371}},{"source":"base/Circuit.js","original":{"line":44,"column":35},"generated":{"line":1,"column":382}},{"source":"base/Circuit.js","name":"node","original":{"line":44,"column":45},"generated":{"line":1,"column":391}},{"source":"base/Circuit.js","name":"node","original":{"line":45,"column":12},"generated":{"line":1,"column":394}},{"source":"base/Circuit.js","name":"InputNode_1","original":{"line":45,"column":28},"generated":{"line":1,"column":407}},{"source":"base/Circuit.js","name":"default","original":{"line":45,"column":40},"generated":{"line":1,"column":409}},{"source":"base/Circuit.js","name":"inputs","original":{"line":46,"column":17},"generated":{"line":1,"column":419}},{"source":"base/Circuit.js","name":"inputs","original":{"line":46,"column":17},"generated":{"line":1,"column":424}},{"source":"base/Circuit.js","name":"splice","original":{"line":46,"column":24},"generated":{"line":1,"column":431}},{"source":"base/Circuit.js","original":{"line":46,"column":31},"generated":{"line":1,"column":438}},{"source":"base/Circuit.js","name":"inputs","original":{"line":46,"column":36},"generated":{"line":1,"column":443}},{"source":"base/Circuit.js","name":"indexOf","original":{"line":46,"column":43},"generated":{"line":1,"column":450}},{"source":"base/Circuit.js","name":"node","original":{"line":46,"column":51},"generated":{"line":1,"column":458}},{"source":"base/Circuit.js","original":{"line":46,"column":58},"generated":{"line":1,"column":461}},{"source":"base/Circuit.js","name":"reset","original":{"line":47,"column":17},"generated":{"line":1,"column":464}},{"source":"base/Circuit.js","name":"reset","original":{"line":47,"column":17},"generated":{"line":1,"column":469}},{"source":"base/Circuit.js","name":"nodes","original":{"line":49,"column":13},"generated":{"line":1,"column":478}},{"source":"base/Circuit.js","name":"nodes","original":{"line":49,"column":13},"generated":{"line":1,"column":483}},{"source":"base/Circuit.js","name":"splice","original":{"line":49,"column":19},"generated":{"line":1,"column":489}},{"source":"base/Circuit.js","original":{"line":49,"column":26},"generated":{"line":1,"column":496}},{"source":"base/Circuit.js","name":"nodes","original":{"line":49,"column":31},"generated":{"line":1,"column":501}},{"source":"base/Circuit.js","name":"indexOf","original":{"line":49,"column":37},"generated":{"line":1,"column":507}},{"source":"base/Circuit.js","name":"node","original":{"line":49,"column":45},"generated":{"line":1,"column":515}},{"source":"base/Circuit.js","original":{"line":49,"column":52},"generated":{"line":1,"column":518}},{"source":"base/Circuit.js","name":"removeNodeOutputs","original":{"line":50,"column":13},"generated":{"line":1,"column":521}},{"source":"base/Circuit.js","name":"removeNodeOutputs","original":{"line":50,"column":13},"generated":{"line":1,"column":526}},{"source":"base/Circuit.js","name":"node","original":{"line":50,"column":31},"generated":{"line":1,"column":544}},{"source":"base/Circuit.js","name":"next","original":{"line":51,"column":13},"generated":{"line":1,"column":547}},{"source":"base/Circuit.js","name":"next","original":{"line":51,"column":13},"generated":{"line":1,"column":552}},{"source":"base/Circuit.js","name":"Circuit","original":{"line":60,"column":4},"generated":{"line":1,"column":560}},{"source":"base/Circuit.js","name":"prototype","original":{"line":60,"column":12},"generated":{"line":1,"column":562}},{"source":"base/Circuit.js","name":"addConnection","original":{"line":60,"column":22},"generated":{"line":1,"column":572}},{"source":"base/Circuit.js","original":{"line":60,"column":38},"generated":{"line":1,"column":586}},{"source":"base/Circuit.js","name":"source","original":{"line":60,"column":48},"generated":{"line":1,"column":595}},{"source":"base/Circuit.js","name":"target","original":{"line":60,"column":56},"generated":{"line":1,"column":597}},{"source":"base/Circuit.js","name":"targetIndex","original":{"line":60,"column":64},"generated":{"line":1,"column":599}},{"source":"base/Circuit.js","name":"source","original":{"line":61,"column":8},"generated":{"line":1,"column":602}},{"source":"base/Circuit.js","name":"outputs","original":{"line":61,"column":15},"generated":{"line":1,"column":604}},{"source":"base/Circuit.js","name":"push","original":{"line":61,"column":23},"generated":{"line":1,"column":612}},{"source":"base/Circuit.js","original":{"line":61,"column":28},"generated":{"line":1,"column":617}},{"source":"base/Circuit.js","name":"Connection_1","original":{"line":61,"column":32},"generated":{"line":1,"column":621}},{"source":"base/Circuit.js","name":"default","original":{"line":61,"column":45},"generated":{"line":1,"column":623}},{"source":"base/Circuit.js","name":"target","original":{"line":61,"column":53},"generated":{"line":1,"column":631}},{"source":"base/Circuit.js","name":"targetIndex","original":{"line":61,"column":61},"generated":{"line":1,"column":633}},{"source":"base/Circuit.js","name":"source","original":{"line":62,"column":8},"generated":{"line":1,"column":637}},{"source":"base/Circuit.js","name":"value","original":{"line":62,"column":15},"generated":{"line":1,"column":639}},{"source":"base/Circuit.js","name":"LogicValue_1","original":{"line":62,"column":23},"generated":{"line":1,"column":645}},{"source":"base/Circuit.js","name":"default","original":{"line":62,"column":36},"generated":{"line":1,"column":647}},{"source":"base/Circuit.js","name":"UNKNOWN","original":{"line":62,"column":44},"generated":{"line":1,"column":655}},{"source":"base/Circuit.js","name":"enqueue","original":{"line":63,"column":13},"generated":{"line":1,"column":663}},{"source":"base/Circuit.js","name":"enqueue","original":{"line":63,"column":13},"generated":{"line":1,"column":668}},{"source":"base/Circuit.js","name":"source","original":{"line":63,"column":21},"generated":{"line":1,"column":676}},{"source":"base/Circuit.js","name":"next","original":{"line":64,"column":13},"generated":{"line":1,"column":679}},{"source":"base/Circuit.js","name":"next","original":{"line":64,"column":13},"generated":{"line":1,"column":684}},{"source":"base/Circuit.js","name":"Circuit","original":{"line":73,"column":4},"generated":{"line":1,"column":692}},{"source":"base/Circuit.js","name":"prototype","original":{"line":73,"column":12},"generated":{"line":1,"column":694}},{"source":"base/Circuit.js","name":"removeConnection","original":{"line":73,"column":22},"generated":{"line":1,"column":704}},{"source":"base/Circuit.js","original":{"line":73,"column":41},"generated":{"line":1,"column":721}},{"source":"base/Circuit.js","name":"sourceNode","original":{"line":73,"column":51},"generated":{"line":1,"column":730}},{"source":"base/Circuit.js","name":"targetNode","original":{"line":73,"column":63},"generated":{"line":1,"column":732}},{"source":"base/Circuit.js","name":"_this","original":{"line":74,"column":12},"generated":{"line":1,"column":735}},{"source":"base/Circuit.js","name":"_this","original":{"line":74,"column":12},"generated":{"line":1,"column":739}},{"source":"base/Circuit.js","original":{"line":74,"column":20},"generated":{"line":1,"column":741}},{"source":"base/Circuit.js","name":"sourceNode","original":{"line":75,"column":8},"generated":{"line":1,"column":746}},{"source":"base/Circuit.js","name":"outputs","original":{"line":76,"column":13},"generated":{"line":1,"column":748}},{"source":"base/Circuit.js","name":"concat","original":{"line":77,"column":13},"generated":{"line":1,"column":756}},{"source":"base/Circuit.js","name":"forEach","original":{"line":78,"column":13},"generated":{"line":1,"column":765}},{"source":"base/Circuit.js","original":{"line":78,"column":21},"generated":{"line":1,"column":773}},{"source":"base/Circuit.js","name":"_a","original":{"line":78,"column":31},"generated":{"line":1,"column":782}},{"source":"base/Circuit.js","name":"i","original":{"line":78,"column":35},"generated":{"line":1,"column":784}},{"source":"base/Circuit.js","name":"node","original":{"line":79,"column":16},"generated":{"line":1,"column":787}},{"source":"base/Circuit.js","name":"node","original":{"line":79,"column":16},"generated":{"line":1,"column":791}},{"source":"base/Circuit.js","name":"_a","original":{"line":79,"column":23},"generated":{"line":1,"column":793}},{"source":"base/Circuit.js","name":"node","original":{"line":79,"column":26},"generated":{"line":1,"column":795}},{"source":"base/Circuit.js","name":"index","original":{"line":79,"column":32},"generated":{"line":1,"column":800}},{"source":"base/Circuit.js","name":"_a","original":{"line":79,"column":40},"generated":{"line":1,"column":802}},{"source":"base/Circuit.js","name":"index","original":{"line":79,"column":43},"generated":{"line":1,"column":804}},{"source":"base/Circuit.js","name":"targetNode","original":{"line":80,"column":16},"generated":{"line":1,"column":810}},{"source":"base/Circuit.js","name":"node","original":{"line":80,"column":31},"generated":{"line":1,"column":814}},{"source":"base/Circuit.js","name":"targetNode","original":{"line":82,"column":16},"generated":{"line":1,"column":818}},{"source":"base/Circuit.js","name":"update","original":{"line":82,"column":27},"generated":{"line":1,"column":820}},{"source":"base/Circuit.js","name":"LogicValue_1","original":{"line":82,"column":34},"generated":{"line":1,"column":827}},{"source":"base/Circuit.js","name":"default","original":{"line":82,"column":47},"generated":{"line":1,"column":829}},{"source":"base/Circuit.js","name":"UNKNOWN","original":{"line":82,"column":55},"generated":{"line":1,"column":837}},{"source":"base/Circuit.js","name":"index","original":{"line":82,"column":64},"generated":{"line":1,"column":845}},{"source":"base/Circuit.js","name":"sourceNode","original":{"line":84,"column":16},"generated":{"line":1,"column":848}},{"source":"base/Circuit.js","name":"outputs","original":{"line":84,"column":27},"generated":{"line":1,"column":850}},{"source":"base/Circuit.js","name":"splice","original":{"line":84,"column":35},"generated":{"line":1,"column":858}},{"source":"base/Circuit.js","name":"i","original":{"line":84,"column":42},"generated":{"line":1,"column":865}},{"source":"base/Circuit.js","original":{"line":84,"column":45},"generated":{"line":1,"column":867}},{"source":"base/Circuit.js","name":"_this","original":{"line":86,"column":16},"generated":{"line":1,"column":870}},{"source":"base/Circuit.js","name":"enqueue","original":{"line":86,"column":22},"generated":{"line":1,"column":872}},{"source":"base/Circuit.js","name":"sourceNode","original":{"line":86,"column":30},"generated":{"line":1,"column":880}},{"source":"base/Circuit.js","name":"targetNode","original":{"line":86,"column":42},"generated":{"line":1,"column":882}},{"source":"base/Circuit.js","name":"next","original":{"line":89,"column":13},"generated":{"line":1,"column":888}},{"source":"base/Circuit.js","name":"next","original":{"line":89,"column":13},"generated":{"line":1,"column":893}},{"source":"base/Circuit.js","name":"Circuit","original":{"line":96,"column":4},"generated":{"line":1,"column":901}},{"source":"base/Circuit.js","name":"prototype","original":{"line":96,"column":12},"generated":{"line":1,"column":903}},{"source":"base/Circuit.js","name":"removeNodeOutputs","original":{"line":96,"column":22},"generated":{"line":1,"column":913}},{"source":"base/Circuit.js","original":{"line":96,"column":42},"generated":{"line":1,"column":931}},{"source":"base/Circuit.js","name":"source","original":{"line":96,"column":52},"generated":{"line":1,"column":940}},{"source":"base/Circuit.js","original":{"line":97,"column":13},"generated":{"line":1,"column":943}},{"source":"base/Circuit.js","original":{"line":97,"column":13},"generated":{"line":1,"column":947}},{"source":"base/Circuit.js","name":"i","original":{"line":97,"column":17},"generated":{"line":1,"column":951}},{"source":"base/Circuit.js","original":{"line":97,"column":21},"generated":{"line":1,"column":953}},{"source":"base/Circuit.js","name":"i","original":{"line":97,"column":24},"generated":{"line":1,"column":955}},{"source":"base/Circuit.js","name":"source","original":{"line":97,"column":28},"generated":{"line":1,"column":957}},{"source":"base/Circuit.js","name":"outputs","original":{"line":97,"column":35},"generated":{"line":1,"column":959}},{"source":"base/Circuit.js","name":"length","original":{"line":97,"column":43},"generated":{"line":1,"column":967}},{"source":"base/Circuit.js","name":"i","original":{"line":97,"column":51},"generated":{"line":1,"column":974}},{"source":"base/Circuit.js","name":"removeConnection","original":{"line":98,"column":17},"generated":{"line":1,"column":978}},{"source":"base/Circuit.js","name":"removeConnection","original":{"line":98,"column":17},"generated":{"line":1,"column":983}},{"source":"base/Circuit.js","name":"source","original":{"line":98,"column":34},"generated":{"line":1,"column":1000}},{"source":"base/Circuit.js","name":"source","original":{"line":98,"column":42},"generated":{"line":1,"column":1002}},{"source":"base/Circuit.js","name":"outputs","original":{"line":98,"column":49},"generated":{"line":1,"column":1004}},{"source":"base/Circuit.js","name":"i","original":{"line":98,"column":57},"generated":{"line":1,"column":1012}},{"source":"base/Circuit.js","name":"node","original":{"line":98,"column":60},"generated":{"line":1,"column":1015}},{"source":"base/Circuit.js","name":"Circuit","original":{"line":106,"column":4},"generated":{"line":1,"column":1022}},{"source":"base/Circuit.js","name":"prototype","original":{"line":106,"column":12},"generated":{"line":1,"column":1024}},{"source":"base/Circuit.js","name":"enqueue","original":{"line":106,"column":22},"generated":{"line":1,"column":1034}},{"source":"base/Circuit.js","original":{"line":106,"column":32},"generated":{"line":1,"column":1042}},{"source":"base/Circuit.js","original":{"line":109,"column":13},"generated":{"line":1,"column":1053}},{"source":"base/Circuit.js","name":"_this","original":{"line":107,"column":12},"generated":{"line":1,"column":1057}},{"source":"base/Circuit.js","name":"_this","original":{"line":107,"column":12},"generated":{"line":1,"column":1061}},{"source":"base/Circuit.js","original":{"line":107,"column":20},"generated":{"line":1,"column":1063}},{"source":"base/Circuit.js","name":"added","original":{"line":108,"column":12},"generated":{"line":1,"column":1068}},{"source":"base/Circuit.js","original":{"line":108,"column":20},"generated":{"line":1,"column":1070}},{"source":"base/Circuit.js","name":"_i","original":{"line":109,"column":17},"generated":{"line":1,"column":1073}},{"source":"base/Circuit.js","original":{"line":109,"column":22},"generated":{"line":1,"column":1075}},{"source":"base/Circuit.js","name":"_i","original":{"line":109,"column":25},"generated":{"line":1,"column":1077}},{"source":"base/Circuit.js","name":"arguments","original":{"line":109,"column":30},"generated":{"line":1,"column":1079}},{"source":"base/Circuit.js","name":"length","original":{"line":109,"column":40},"generated":{"line":1,"column":1089}},{"source":"base/Circuit.js","name":"_i","original":{"line":109,"column":48},"generated":{"line":1,"column":1096}},{"source":"base/Circuit.js","name":"added","original":{"line":110,"column":12},"generated":{"line":1,"column":1100}},{"source":"base/Circuit.js","name":"_i","original":{"line":110,"column":18},"generated":{"line":1,"column":1102}},{"source":"base/Circuit.js","name":"arguments","original":{"line":110,"column":24},"generated":{"line":1,"column":1105}},{"source":"base/Circuit.js","name":"_i","original":{"line":110,"column":34},"generated":{"line":1,"column":1115}},{"source":"base/Circuit.js","name":"added","original":{"line":112,"column":8},"generated":{"line":1,"column":1118}},{"source":"base/Circuit.js","name":"forEach","original":{"line":112,"column":14},"generated":{"line":1,"column":1120}},{"source":"base/Circuit.js","original":{"line":112,"column":22},"generated":{"line":1,"column":1128}},{"source":"base/Circuit.js","name":"node","original":{"line":112,"column":32},"generated":{"line":1,"column":1137}},{"source":"base/Circuit.js","name":"_this","original":{"line":113,"column":18},"generated":{"line":1,"column":1141}},{"source":"base/Circuit.js","name":"queue","original":{"line":113,"column":24},"generated":{"line":1,"column":1143}},{"source":"base/Circuit.js","name":"indexOf","original":{"line":113,"column":30},"generated":{"line":1,"column":1149}},{"source":"base/Circuit.js","name":"node","original":{"line":113,"column":38},"generated":{"line":1,"column":1157}},{"source":"base/Circuit.js","name":"_this","original":{"line":114,"column":16},"generated":{"line":1,"column":1161}},{"source":"base/Circuit.js","name":"queue","original":{"line":114,"column":22},"generated":{"line":1,"column":1163}},{"source":"base/Circuit.js","name":"push","original":{"line":114,"column":28},"generated":{"line":1,"column":1169}},{"source":"base/Circuit.js","name":"node","original":{"line":114,"column":33},"generated":{"line":1,"column":1174}},{"source":"base/Circuit.js","name":"Circuit","original":{"line":123,"column":4},"generated":{"line":1,"column":1180}},{"source":"base/Circuit.js","name":"prototype","original":{"line":123,"column":12},"generated":{"line":1,"column":1182}},{"source":"base/Circuit.js","name":"dequeue","original":{"line":123,"column":22},"generated":{"line":1,"column":1192}},{"source":"base/Circuit.js","original":{"line":123,"column":32},"generated":{"line":1,"column":1200}},{"source":"base/Circuit.js","name":"removed","original":{"line":123,"column":42},"generated":{"line":1,"column":1209}},{"source":"base/Circuit.js","name":"removedIndex","original":{"line":124,"column":12},"generated":{"line":1,"column":1212}},{"source":"base/Circuit.js","name":"removedIndex","original":{"line":124,"column":12},"generated":{"line":1,"column":1216}},{"source":"base/Circuit.js","original":{"line":124,"column":27},"generated":{"line":1,"column":1218}},{"source":"base/Circuit.js","name":"queue","original":{"line":124,"column":32},"generated":{"line":1,"column":1223}},{"source":"base/Circuit.js","name":"indexOf","original":{"line":124,"column":38},"generated":{"line":1,"column":1229}},{"source":"base/Circuit.js","name":"removed","original":{"line":124,"column":46},"generated":{"line":1,"column":1237}},{"source":"base/Circuit.js","name":"removedIndex","original":{"line":125,"column":13},"generated":{"line":1,"column":1241}},{"source":"base/Circuit.js","name":"queue","original":{"line":126,"column":17},"generated":{"line":1,"column":1244}},{"source":"base/Circuit.js","name":"queue","original":{"line":126,"column":17},"generated":{"line":1,"column":1249}},{"source":"base/Circuit.js","name":"splice","original":{"line":126,"column":23},"generated":{"line":1,"column":1255}},{"source":"base/Circuit.js","name":"removedIndex","original":{"line":126,"column":30},"generated":{"line":1,"column":1262}},{"source":"base/Circuit.js","original":{"line":126,"column":44},"generated":{"line":1,"column":1264}},{"source":"base/Circuit.js","name":"Circuit","original":{"line":132,"column":4},"generated":{"line":1,"column":1268}},{"source":"base/Circuit.js","name":"prototype","original":{"line":132,"column":12},"generated":{"line":1,"column":1270}},{"source":"base/Circuit.js","name":"reset","original":{"line":132,"column":22},"generated":{"line":1,"column":1280}},{"source":"base/Circuit.js","original":{"line":132,"column":30},"generated":{"line":1,"column":1286}},{"source":"base/Circuit.js","name":"nodes","original":{"line":133,"column":13},"generated":{"line":1,"column":1297}},{"source":"base/Circuit.js","name":"nodes","original":{"line":133,"column":13},"generated":{"line":1,"column":1302}},{"source":"base/Circuit.js","name":"forEach","original":{"line":133,"column":19},"generated":{"line":1,"column":1308}},{"source":"base/Circuit.js","original":{"line":133,"column":27},"generated":{"line":1,"column":1316}},{"source":"base/Circuit.js","name":"node","original":{"line":133,"column":37},"generated":{"line":1,"column":1325}},{"source":"base/Circuit.js","name":"node","original":{"line":133,"column":52},"generated":{"line":1,"column":1328}},{"source":"base/Circuit.js","name":"node","original":{"line":133,"column":52},"generated":{"line":1,"column":1335}},{"source":"base/Circuit.js","name":"reset","original":{"line":133,"column":57},"generated":{"line":1,"column":1337}},{"source":"base/Circuit.js","name":"Circuit","original":{"line":139,"column":4},"generated":{"line":1,"column":1348}},{"source":"base/Circuit.js","name":"prototype","original":{"line":139,"column":12},"generated":{"line":1,"column":1350}},{"source":"base/Circuit.js","name":"next","original":{"line":139,"column":22},"generated":{"line":1,"column":1360}},{"source":"base/Circuit.js","original":{"line":139,"column":29},"generated":{"line":1,"column":1365}},{"source":"base/Circuit.js","name":"_this","original":{"line":140,"column":12},"generated":{"line":1,"column":1376}},{"source":"base/Circuit.js","name":"_this","original":{"line":140,"column":12},"generated":{"line":1,"column":1380}},{"source":"base/Circuit.js","original":{"line":140,"column":20},"generated":{"line":1,"column":1382}},{"source":"base/Circuit.js","name":"isValueChanged","original":{"line":141,"column":12},"generated":{"line":1,"column":1387}},{"source":"base/Circuit.js","original":{"line":141,"column":29},"generated":{"line":1,"column":1390}},{"source":"base/Circuit.js","original":{"line":150,"column":12},"generated":{"line":1,"column":1392}},{"source":"base/Circuit.js","name":"queue","original":{"line":142,"column":13},"generated":{"line":1,"column":1395}},{"source":"base/Circuit.js","name":"queue","original":{"line":142,"column":13},"generated":{"line":1,"column":1400}},{"source":"base/Circuit.js","name":"forEach","original":{"line":142,"column":19},"generated":{"line":1,"column":1406}},{"source":"base/Circuit.js","original":{"line":142,"column":27},"generated":{"line":1,"column":1414}},{"source":"base/Circuit.js","name":"node","original":{"line":142,"column":37},"generated":{"line":1,"column":1423}},{"source":"base/Circuit.js","name":"_this","original":{"line":143,"column":12},"generated":{"line":1,"column":1426}},{"source":"base/Circuit.js","name":"enqueue","original":{"line":143,"column":18},"generated":{"line":1,"column":1428}},{"source":"base/Circuit.js","name":"apply","original":{"line":143,"column":26},"generated":{"line":1,"column":1436}},{"source":"base/Circuit.js","name":"_this","original":{"line":143,"column":32},"generated":{"line":1,"column":1442}},{"source":"base/Circuit.js","name":"node","original":{"line":143,"column":39},"generated":{"line":1,"column":1444}},{"source":"base/Circuit.js","name":"propagate","original":{"line":143,"column":44},"generated":{"line":1,"column":1446}},{"source":"base/Circuit.js","name":"_this","original":{"line":144,"column":12},"generated":{"line":1,"column":1459}},{"source":"base/Circuit.js","name":"dequeue","original":{"line":144,"column":18},"generated":{"line":1,"column":1461}},{"source":"base/Circuit.js","name":"node","original":{"line":144,"column":26},"generated":{"line":1,"column":1469}},{"source":"base/Circuit.js","name":"node","original":{"line":145,"column":16},"generated":{"line":1,"column":1472}},{"source":"base/Circuit.js","name":"isValueChanged","original":{"line":145,"column":21},"generated":{"line":1,"column":1474}},{"source":"base/Circuit.js","name":"isValueChanged","original":{"line":146,"column":16},"generated":{"line":1,"column":1491}},{"source":"base/Circuit.js","original":{"line":146,"column":33},"generated":{"line":1,"column":1494}},{"source":"base/Circuit.js","name":"node","original":{"line":147,"column":16},"generated":{"line":1,"column":1496}},{"source":"base/Circuit.js","name":"isValueChanged","original":{"line":147,"column":21},"generated":{"line":1,"column":1498}},{"source":"base/Circuit.js","original":{"line":147,"column":38},"generated":{"line":1,"column":1514}},{"source":"base/Circuit.js","original":{"line":150,"column":13},"generated":{"line":1,"column":1520}},{"source":"base/Circuit.js","name":"isComplete","original":{"line":150,"column":18},"generated":{"line":1,"column":1525}},{"source":"base/Circuit.js","name":"isValueChanged","original":{"line":150,"column":35},"generated":{"line":1,"column":1540}},{"source":"base/Circuit.js","original":{"line":152,"column":19},"generated":{"line":1,"column":1542}},{"source":"base/Circuit.js","original":{"line":152,"column":19},"generated":{"line":1,"column":1549}},{"source":"base/Circuit.js","name":"next","original":{"line":152,"column":24},"generated":{"line":1,"column":1554}},{"source":"base/Circuit.js","name":"Circuit","original":{"line":160,"column":4},"generated":{"line":1,"column":1562}},{"source":"base/Circuit.js","name":"prototype","original":{"line":160,"column":12},"generated":{"line":1,"column":1564}},{"source":"base/Circuit.js","name":"isComplete","original":{"line":160,"column":22},"generated":{"line":1,"column":1574}},{"source":"base/Circuit.js","original":{"line":160,"column":35},"generated":{"line":1,"column":1585}},{"source":"base/Circuit.js","original":{"line":161,"column":15},"generated":{"line":1,"column":1596}},{"source":"base/Circuit.js","original":{"line":161,"column":37},"generated":{"line":1,"column":1603}},{"source":"base/Circuit.js","original":{"line":161,"column":15},"generated":{"line":1,"column":1607}},{"source":"base/Circuit.js","name":"queue","original":{"line":161,"column":20},"generated":{"line":1,"column":1612}},{"source":"base/Circuit.js","name":"length","original":{"line":161,"column":26},"generated":{"line":1,"column":1618}},{"source":"base/Circuit.js","name":"Circuit","original":{"line":163,"column":4},"generated":{"line":1,"column":1626}},{"source":"base/Circuit.js","name":"prototype","original":{"line":163,"column":12},"generated":{"line":1,"column":1628}},{"source":"base/Circuit.js","name":"debug","original":{"line":163,"column":22},"generated":{"line":1,"column":1638}},{"source":"base/Circuit.js","original":{"line":163,"column":30},"generated":{"line":1,"column":1644}},{"source":"base/Circuit.js","name":"nodes","original":{"line":164,"column":13},"generated":{"line":1,"column":1655}},{"source":"base/Circuit.js","name":"nodes","original":{"line":164,"column":13},"generated":{"line":1,"column":1660}},{"source":"base/Circuit.js","name":"forEach","original":{"line":164,"column":19},"generated":{"line":1,"column":1666}},{"source":"base/Circuit.js","original":{"line":164,"column":27},"generated":{"line":1,"column":1674}},{"source":"base/Circuit.js","name":"_a","original":{"line":164,"column":37},"generated":{"line":1,"column":1683}},{"source":"base/Circuit.js","name":"name","original":{"line":165,"column":16},"generated":{"line":1,"column":1686}},{"source":"base/Circuit.js","name":"name","original":{"line":165,"column":16},"generated":{"line":1,"column":1690}},{"source":"base/Circuit.js","name":"_a","original":{"line":165,"column":23},"generated":{"line":1,"column":1692}},{"source":"base/Circuit.js","name":"name","original":{"line":165,"column":26},"generated":{"line":1,"column":1694}},{"source":"base/Circuit.js","name":"value","original":{"line":165,"column":32},"generated":{"line":1,"column":1699}},{"source":"base/Circuit.js","name":"_a","original":{"line":165,"column":40},"generated":{"line":1,"column":1701}},{"source":"base/Circuit.js","name":"value","original":{"line":165,"column":43},"generated":{"line":1,"column":1703}},{"source":"base/Circuit.js","name":"newValue","original":{"line":165,"column":50},"generated":{"line":1,"column":1709}},{"source":"base/Circuit.js","name":"_a","original":{"line":165,"column":61},"generated":{"line":1,"column":1711}},{"source":"base/Circuit.js","name":"newValue","original":{"line":165,"column":64},"generated":{"line":1,"column":1713}},{"source":"base/Circuit.js","name":"console","original":{"line":166,"column":12},"generated":{"line":1,"column":1722}},{"source":"base/Circuit.js","name":"log","original":{"line":166,"column":20},"generated":{"line":1,"column":1730}},{"source":"base/Circuit.js","name":"name","original":{"line":166,"column":24},"generated":{"line":1,"column":1734}},{"source":"base/Circuit.js","original":{"line":166,"column":31},"generated":{"line":1,"column":1736}},{"source":"base/Circuit.js","name":"value","original":{"line":166,"column":36},"generated":{"line":1,"column":1740}},{"source":"base/Circuit.js","name":"newValue","original":{"line":166,"column":43},"generated":{"line":1,"column":1742}},{"source":"base/Circuit.js","name":"Circuit","original":{"line":169,"column":11},"generated":{"line":1,"column":1748}},{"source":"base/Circuit.js","original":{"line":6,"column":29},"generated":{"line":1,"column":1750}},{"source":"base/Circuit.js","name":"exports","original":{"line":171,"column":0},"generated":{"line":1,"column":1753}},{"source":"base/Circuit.js","name":"default","original":{"line":171,"column":8},"generated":{"line":1,"column":1761}},{"source":"base/Circuit.js","name":"Circuit","original":{"line":171,"column":18},"generated":{"line":1,"column":1769}}],"sources":{"base/Circuit.js":"\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar InputNode_1 = require(\"../base/InputNode\");\r\nvar Connection_1 = require(\"../types/Connection\");\r\nvar LogicValue_1 = require(\"../types/LogicValue\");\r\nvar Circuit = /** @class */ (function () {\r\n    function Circuit() {\r\n        /**\r\n         * The debugger processing queue.\r\n         *\r\n         * @type {Array<CircuitNode>}\r\n         */\r\n        this.queue = [];\r\n        /**\r\n         * A list of all the nodes in the circuit.\r\n         *\r\n         * @type {Array<CircuitNode>}\r\n         */\r\n        this.nodes = [];\r\n        /**\r\n         * A list of all input nodes in the circuit.jest\r\n         *\r\n         * @type {Array<CircuitNode>}\r\n         */\r\n        this.inputs = [];\r\n    }\r\n    /**\r\n     * Adds a node to the circuit and its appropriate queue(s).\r\n     *\r\n     * @param {CircuitNode} node - node to add\r\n     */\r\n    Circuit.prototype.addNode = function (node) {\r\n        if (node instanceof InputNode_1.default) {\r\n            this.inputs.push(node);\r\n            this.enqueue(node);\r\n        }\r\n        this.nodes.push(node);\r\n    };\r\n    /**\r\n     * Removes a node from the circuit and its appropriate queue(s).\r\n     *\r\n     * @param {CircuitNode} node - node to remove\r\n     */\r\n    Circuit.prototype.removeNode = function (node) {\r\n        if (node instanceof InputNode_1.default) {\r\n            this.inputs.splice(this.inputs.indexOf(node), 1);\r\n            this.reset();\r\n        }\r\n        this.nodes.splice(this.nodes.indexOf(node), 1);\r\n        this.removeNodeOutputs(node);\r\n        this.next();\r\n    };\r\n    /**\r\n     * Adds a connection entry from the source node to the target node on the given index.\r\n     *\r\n     * @param {CircuitNode} source - source node\r\n     * @param {CircuitNode} target - target node\r\n     * @param {Number} targetIndex - entry index on the target node for the connection\r\n     */\r\n    Circuit.prototype.addConnection = function (source, target, targetIndex) {\r\n        source.outputs.push(new Connection_1.default(target, targetIndex));\r\n        source.value = LogicValue_1.default.UNKNOWN;\r\n        this.enqueue(source);\r\n        this.next();\r\n    };\r\n    /**\r\n     * Removes the connection on the source node at the source index and the connection at its target node.\r\n     * The input value at the target index will be reset to Hi-Z.\r\n     *\r\n     * @param {CircuitNode} sourceNode - source node to disconnect\r\n     * @param {CircuitNode} targetNode - target node to disconnect\r\n     */\r\n    Circuit.prototype.removeConnection = function (sourceNode, targetNode) {\r\n        var _this = this;\r\n        sourceNode\r\n            .outputs\r\n            .concat()\r\n            .forEach(function (_a, i) {\r\n            var node = _a.node, index = _a.index;\r\n            if (targetNode === node) {\r\n                // reset the input of the target for this connection to hi-Z\r\n                targetNode.update(LogicValue_1.default.UNKNOWN, index);\r\n                // remove the output entry at the source\r\n                sourceNode.outputs.splice(i, 1);\r\n                // place the target node in the queue for processing\r\n                _this.enqueue(sourceNode, targetNode);\r\n            }\r\n        });\r\n        this.next();\r\n    };\r\n    /**\r\n     * Removes all connections from the given source node.\r\n     *\r\n     * @param {CircuitNode} source\r\n     */\r\n    Circuit.prototype.removeNodeOutputs = function (source) {\r\n        for (var i = 0; i < source.outputs.length; i++) {\r\n            this.removeConnection(source, source.outputs[i].node);\r\n        }\r\n    };\r\n    /**\r\n     * Appends the given node(s) to the processing queue.\r\n     *\r\n     * @param {...CircuitNode} added - node(s) to add to the queue\r\n     */\r\n    Circuit.prototype.enqueue = function () {\r\n        var _this = this;\r\n        var added = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            added[_i] = arguments[_i];\r\n        }\r\n        added.forEach(function (node) {\r\n            if (!~_this.queue.indexOf(node)) {\r\n                _this.queue.push(node);\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Removes the given node from the processing queue.\r\n     *\r\n     * @param {CircuitNode} removed - node to remove from the queue\r\n     */\r\n    Circuit.prototype.dequeue = function (removed) {\r\n        var removedIndex = this.queue.indexOf(removed);\r\n        if (~removedIndex) {\r\n            this.queue.splice(removedIndex, 1);\r\n        }\r\n    };\r\n    /**\r\n     * Resets the circuit.\r\n     */\r\n    Circuit.prototype.reset = function () {\r\n        this.nodes.forEach(function (node) { return node.reset(); });\r\n    };\r\n    /**\r\n     * Advances the circuit simulation one step. If none of the node values have changed,\r\n     * it continues stepping through until either a value changes or the queue is empty.\r\n     */\r\n    Circuit.prototype.next = function () {\r\n        var _this = this;\r\n        var isValueChanged = false;\r\n        this.queue.forEach(function (node) {\r\n            _this.enqueue.apply(_this, node.propagate());\r\n            _this.dequeue(node);\r\n            if (node.isValueChanged) {\r\n                isValueChanged = true;\r\n                node.isValueChanged = false;\r\n            }\r\n        });\r\n        if (!this.isComplete() && !isValueChanged) {\r\n            // if the queue is not finished but no value in the circuit has changed, step again\r\n            return this.next();\r\n        }\r\n    };\r\n    /**\r\n     * Returns true when the queue is finished processing.\r\n     *\r\n     * @returns {Boolean}\r\n     */\r\n    Circuit.prototype.isComplete = function () {\r\n        return this.queue.length === 0;\r\n    };\r\n    Circuit.prototype.debug = function () {\r\n        this.nodes.forEach(function (_a) {\r\n            var name = _a.name, value = _a.value, newValue = _a.newValue;\r\n            console.log(name + \":\", value, newValue);\r\n        });\r\n    };\r\n    return Circuit;\r\n}());\r\nexports.default = Circuit;\r\n"},"lineCount":null}},"hash":"30929501368b87507506520583f3c387","cacheData":{"env":{}}}