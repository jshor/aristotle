(function(e){function t(t){for(var o,c,a=t[0],s=t[1],u=t[2],d=0,p=[];d<a.length;d++)c=a[d],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&p.push(i[c][0]),i[c]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);l&&l(t);while(p.length)p.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,a=1;a<n.length;a++){var s=n[a];0!==i[s]&&(o=!1)}o&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},i={index:0},r=[];function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/web/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],s=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var l=s;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0867":function(e,t,n){"use strict";n("88e5")},"09ef":function(e,t,n){"use strict";n("0c62")},"0c62":function(e,t,n){},"0f40":function(e,t,n){},"19eb":function(e,t,n){},"19f8":function(e,t,n){},2004:function(e,t,n){},2341:function(e,t,n){},"2cc5":function(e,t,n){},"2fde":function(e,t,n){"use strict";n("f7ab")},"2ff2":function(e){e.exports=JSON.parse('{"groups":{},"connections":{"switch1_nor1_conn":{"id":"switch1_nor1_conn","connectionChainId":"switch1_nor1_conn","source":"switchOutputPort1","target":"nor1InputPort1","isSelected":false,"groupId":null,"zIndex":7},"switch2_nor2_conn":{"id":"switch2_nor2_conn","connectionChainId":"switch2_nor2_conn","source":"switchOutputPort2","target":"nor2InputPort1","isSelected":false,"groupId":null,"zIndex":8},"nor1_nor2_conn":{"id":"nor1_nor2_conn","connectionChainId":"nor1_nor2_conn","source":"nor1OutputPort1","target":"nor2InputPort2","isSelected":false,"groupId":null,"zIndex":9},"nor2_nor1_conn":{"id":"nor2_nor1_conn","connectionChainId":"nor2_nor1_conn","source":"nor2OutputPort1","target":"nor1InputPort2","isSelected":false,"groupId":null,"zIndex":10},"nor1_lightbulb1_conn":{"id":"nor1_lightbulb1_conn","connectionChainId":"nor1_lightbulb1_conn","source":"nor1OutputPort1","target":"lightbulbInputPort1","isSelected":false,"groupId":null,"zIndex":11},"nor2_lightbulb2_conn":{"id":"nor2_lightbulb2_conn","connectionChainId":"nor2_lightbulb2_conn","source":"nor2OutputPort1","target":"lightbulbInputPort2","isSelected":false,"groupId":null,"zIndex":12}},"ports":{"nor1InputPort1":{"id":"nor1InputPort1","elementId":"nor1","name":"Input Port 1","connectedPortIds":[],"position":{"x":0,"y":0},"type":1,"rotation":0,"orientation":0,"value":0,"isFreeport":false},"nor1InputPort2":{"id":"nor1InputPort2","elementId":"nor1","name":"Input Port 2","connectedPortIds":[],"position":{"x":0,"y":0},"type":1,"rotation":0,"orientation":0,"value":0,"isFreeport":false},"nor1OutputPort1":{"id":"nor1OutputPort1","elementId":"nor1","name":"Output Port","connectedPortIds":[],"position":{"x":0,"y":0},"type":0,"rotation":0,"orientation":2,"value":0,"isFreeport":false},"nor2InputPort1":{"id":"nor2InputPort1","elementId":"nor2","name":"Input Port 1","connectedPortIds":[],"position":{"x":0,"y":0},"type":1,"rotation":0,"orientation":0,"value":0,"isFreeport":false},"nor2InputPort2":{"id":"nor2InputPort2","elementId":"nor2","name":"Input Port 2","connectedPortIds":[],"position":{"x":0,"y":0},"type":1,"rotation":0,"orientation":0,"value":0,"isFreeport":false},"nor2OutputPort1":{"id":"nor2OutputPort1","elementId":"nor2","name":"Output Port","connectedPortIds":[],"position":{"x":0,"y":0},"type":0,"rotation":0,"orientation":2,"value":0,"isFreeport":false},"switchOutputPort1":{"id":"switchOutputPort1","elementId":"switch1","name":"Output Port","connectedPortIds":[],"position":{"x":0,"y":0},"type":0,"rotation":0,"orientation":2,"value":0,"isFreeport":false},"switchOutputPort2":{"id":"switchOutputPort2","elementId":"switch2","name":"Output Port","connectedPortIds":[],"position":{"x":0,"y":0},"type":0,"rotation":0,"orientation":2,"value":0,"isFreeport":false},"lightbulbInputPort1":{"id":"lightbulbInputPort1","elementId":"lightbulb1","name":"Input Port","connectedPortIds":[],"position":{"x":0,"y":0},"type":1,"rotation":0,"orientation":0,"value":0,"isFreeport":false},"lightbulbInputPort2":{"id":"lightbulbInputPort2","elementId":"lightbulb2","name":"Input Port","connectedPortIds":[],"position":{"x":0,"y":0},"type":1,"rotation":0,"orientation":0,"value":0,"isFreeport":false}},"items":{"nor1":{"id":"nor1","type":"LogicGate","subtype":"Nor","portIds":["nor1InputPort1","nor1InputPort2","nor1OutputPort1"],"position":{"x":300,"y":300},"boundingBox":{"left":0,"top":0,"right":0,"bottom":0},"rotation":0,"isSelected":false,"properties":{"inputCount":{"label":"Input count","value":2,"type":"number","min":2},"showInOscilloscope":{"label":"Show in oscilloscope","value":true,"type":"boolean"}},"groupId":null,"zIndex":1,"width":100,"height":150},"nor2":{"id":"nor2","type":"LogicGate","subtype":"Nor","portIds":["nor2InputPort2","nor2InputPort1","nor2OutputPort1"],"position":{"x":300,"y":500},"boundingBox":{"left":0,"top":0,"right":0,"bottom":0},"rotation":0,"isSelected":false,"properties":{"inputCount":{"label":"Input count","value":2,"type":"number","min":2},"showInOscilloscope":{"label":"Show in oscilloscope","value":true,"type":"boolean"}},"groupId":null,"zIndex":2,"width":120,"height":51},"switch1":{"id":"switch1","type":"InputNode","subtype":"Clock","portIds":["switchOutputPort1"],"position":{"x":100,"y":300},"boundingBox":{"left":0,"top":0,"right":0,"bottom":0},"rotation":0,"isSelected":false,"properties":{"name":{"label":"Name","value":"","type":"text"},"startValue":{"label":"Start value","value":-1,"type":"number","options":{"True":1,"Hi-Z":0,"False":-1}},"showInOscilloscope":{"label":"Show in oscilloscope","value":true,"type":"boolean"}},"groupId":null,"zIndex":3,"width":40,"height":40},"switch2":{"id":"switch2","type":"InputNode","subtype":"Switch","portIds":["switchOutputPort2"],"position":{"x":100,"y":500},"boundingBox":{"left":0,"top":0,"right":0,"bottom":0},"rotation":0,"isSelected":false,"properties":{"name":{"label":"Name","value":"","type":"text"},"startValue":{"label":"Start value","value":1,"type":"number","options":{"True":1,"Hi-Z":0,"False":-1}},"showInOscilloscope":{"label":"Show in oscilloscope","value":true,"type":"boolean"}},"groupId":null,"zIndex":4,"width":40,"height":40},"lightbulb1":{"id":"lightbulb1","type":"OutputNode","subtype":"Lightbulb","portIds":["lightbulbInputPort1"],"position":{"x":700,"y":300},"boundingBox":{"left":0,"top":0,"right":0,"bottom":0},"rotation":0,"isSelected":false,"properties":{"name":{"label":"Name","value":"","type":"text"},"showInOscilloscope":{"label":"Show in oscilloscope","value":true,"type":"boolean"}},"groupId":null,"zIndex":5,"width":40,"height":40},"lightbulb2":{"id":"lightbulb2","type":"OutputNode","subtype":"Lightbulb","portIds":["lightbulbInputPort2"],"position":{"x":700,"y":500},"boundingBox":{"left":0,"top":0,"right":0,"bottom":0},"rotation":0,"isSelected":false,"properties":{"name":{"label":"Name","value":"","type":"text"},"showInOscilloscope":{"label":"Show in oscilloscope","value":true,"type":"boolean"}},"groupId":null,"zIndex":6,"width":40,"height":40}}}')},"331d":function(e,t,n){},3348:function(e,t,n){},3359:function(e,t,n){"use strict";n("fea7")},3480:function(e,t,n){},"34ac":function(e,t,n){},"34e5":function(e,t,n){},3744:function(e,t,n){},"3c0f":function(e,t,n){},"3c7e":function(e,t,n){},"3efd":function(e,t,n){},4598:function(e,t,n){},"45ad":function(e,t,n){"use strict";n("3c7e")},"521b":function(e,t,n){"use strict";n("ba3d")},5433:function(e,t,n){"use strict";n("0f40")},"56bb":function(e,t,n){"use strict";n("8624")},"57ae":function(e,t,n){},"58b4":function(e,t,n){"use strict";n("3c0f")},"5a18":function(e,t,n){"use strict";n("331d")},"5af2":function(e,t,n){"use strict";n("3efd")},"5af6":function(e,t,n){"use strict";n("2341")},"5cf4":function(e,t,n){"use strict";n("b5e9")},"5ee8":function(e,t,n){"use strict";n("2cc5")},"600c":function(e,t,n){"use strict";n("bfb9")},7093:function(e,t,n){},7684:function(e,t,n){},7726:function(e,t,n){"use strict";n("3348")},"78ec":function(e,t,n){"use strict";n("9256")},"7a6f":function(e,t,n){"use strict";n("19f8")},"823c":function(e,t,n){"use strict";n("a518")},8624:function(e,t,n){},"88e5":function(e,t,n){},9256:function(e,t,n){},"9d58":function(e,t,n){},a390:function(e,t,n){"use strict";n("f6ee")},a4d6:function(e,t,n){"use strict";n("b0e9")},a518:function(e,t,n){},a7a3:function(e,t,n){"use strict";n("7093")},aa2e:function(e,t,n){"use strict";n("34e5")},b0e9:function(e,t,n){},b4e7:function(e,t,n){},b5e9:function(e,t,n){},b704:function(e,t,n){"use strict";n("57ae")},ba3d:function(e,t,n){},bc65:function(e,t,n){"use strict";n("19eb")},bdf0:function(e,t,n){"use strict";n("9d58")},bfb9:function(e,t,n){},c31e:function(e,t,n){"use strict";n("2004")},c36a:function(e,t,n){"use strict";n("34ac")},cbfb:function(e,t,n){"use strict";n("3480")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("be92"),i=n("7a23"),r=(n("d3b7"),n("25f0"),{key:0}),c={key:1};function a(e,t,n,o,a,s){var u=Object(i["resolveComponent"])("toolbar"),l=Object(i["resolveComponent"])("toolbox"),d=Object(i["resolveComponent"])("tab-item"),p=Object(i["resolveComponent"])("document"),f=Object(i["resolveComponent"])("tab-host"),m=Object(i["resolveComponent"])("oscilloscope"),h=Object(i["resolveComponent"])("status-bar"),b=Object(i["resolveComponent"])("main-view");return Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],null,[Object(i["createElementVNode"])("div",{class:Object(i["normalizeClass"])(["app__dropzone",{"app__dropzone--active":e.isDropping}])},null,2),e.activeDocumentId&&e.activeDocument?(Object(i["openBlock"])(),Object(i["createBlock"])(b,{key:0},{top:Object(i["withCtx"])((function(){return[e.isMobile?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",r,"mobile bar")):Object(i["createCommentVNode"])("",!0),(Object(i["openBlock"])(),Object(i["createBlock"])(u,{key:e.activeDocumentId,store:e.activeDocument.store},null,8,["store"])),Object(i["createVNode"])(l,{store:e.activeDocument.store},null,8,["store"])]})),middle:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(f,null,Object(i["createSlots"])({default:Object(i["withCtx"])((function(){return[(Object(i["openBlock"])(),Object(i["createBlock"])(p,{key:e.activeDocumentId,store:e.activeDocument.store,onSwitch:e.switchDocument,onOpenIntegratedCircuit:e.openIntegratedCircuit},null,8,["store","onSwitch","onOpenIntegratedCircuit"]))]})),_:2},[e.isMobile?void 0:{name:"tabs",fn:Object(i["withCtx"])((function(){return[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.documents,(function(t,n){return Object(i["openBlock"])(),Object(i["createBlock"])(d,{key:n,label:t.displayName,active:e.activeDocumentId===n,dirty:t.store().isDirty,onActivate:function(t){return e.activateDocument(n.toString())},onClose:function(t){return e.closeDocument(n.toString())}},null,8,["label","active","dirty","onActivate","onClose"])})),128))]}))}]),1024)]})),bottom:Object(i["withCtx"])((function(){return[(Object(i["openBlock"])(),Object(i["createBlock"])(m,{key:e.activeDocumentId,store:e.activeDocument.store},null,8,["store"])),e.isMobile?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createBlock"])(h,{key:e.activeDocumentId,store:e.activeDocument.store,"is-fullscreen":e.isFullscreen,onFullscreen:e.toggleFullscreen},null,8,["store","is-fullscreen","onFullscreen"]))]})),_:1})):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",c," no documents open "+Object(i["toDisplayString"])(e.isDropping),1))],64)}var s=n("1da1");n("96cf");function u(e,t,n,o,r,c){var a=Object(i["resolveComponent"])("item"),s=Object(i["resolveComponent"])("connection"),u=Object(i["resolveComponent"])("group"),l=Object(i["resolveComponent"])("editor");return Object(i["openBlock"])(),Object(i["createBlock"])(l,{ref:"editor",zoom:e.store.zoomLevel,"grid-size":e.gridSize,tabindex:0,offset:{x:e.store.canvas.left,y:e.store.canvas.top},width:e.store.canvas.right-e.store.canvas.left,height:e.store.canvas.bottom-e.store.canvas.top,onPan:e.store.panTo,onDeselect:e.store.deselectAll,onSelection:e.store.createSelection,onZoom:e.store.setZoom,onContextmenu:e.onContextMenu,onResize:e.store.setViewerSize},{default:Object(i["withCtx"])((function(){return[Object(i["createElementVNode"])("div",{tabindex:0,onFocus:t[0]||(t[0]=function(t){return e.store.recycleSelection(!1)})},null,32),(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.store.baseItems,(function(t){return Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],null,["type"in t?(Object(i["openBlock"])(),Object(i["createBlock"])(a,{tabindex:0,store:e.storeDefinition,id:t.id,key:t.id,"is-selected":t.isSelected,flash:e.store.isDebugging&&e.store.isCircuitEvaluated,"z-index":t.zIndex+1e3,onContextmenu:e.onContextMenu,onOpenIntegratedCircuit:function(n){return e.$emit("openIntegratedCircuit",t)}},null,8,["store","id","is-selected","flash","z-index","onContextmenu","onOpenIntegratedCircuit"])):(Object(i["openBlock"])(),Object(i["createBlock"])(s,{tabindex:0,store:e.storeDefinition,id:t.id,key:"c".concat(t.id),"is-selected":t.isSelected,"is-preview":e.store.connectionPreviewId===t.id,flash:e.store.isDebugging&&e.store.isCircuitEvaluated,"z-index":t.zIndex,onContextmenu:e.onContextMenu},null,8,["store","id","is-selected","is-preview","flash","z-index","onContextmenu"]))],64)})),256)),Object(i["createElementVNode"])("div",{tabindex:0,onFocus:t[1]||(t[1]=function(t){return e.store.recycleSelection(!0)})},null,32),(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.store.groups,(function(t){return Object(i["openBlock"])(),Object(i["createBlock"])(u,{key:t.id,id:t.id,"bounding-box":t.boundingBox,"is-selected":t.isSelected,"z-index":e.store.zIndex,zoom:e.store.zoom},null,8,["id","bounding-box","is-selected","z-index","zoom"])})),128))]})),_:1},8,["zoom","grid-size","offset","width","height","onPan","onDeselect","onSelection","onZoom","onContextmenu","onResize"])}n("d81d"),n("07ac");function l(e,t,n,o,r,c){var a=Object(i["resolveComponent"])("wire"),s=Object(i["resolveComponent"])("draggable");return Object(i["openBlock"])(),Object(i["createBlock"])(s,{style:Object(i["normalizeStyle"])({zIndex:e.zIndex}),position:e.position,"is-selected":e.isSelected,onDragStart:e.onDragStart,onDrag:e.onDrag,onDragEnd:e.onDragEnd,onSelect:t[0]||(t[0]=function(t){return e.selectItem(e.id,t)}),onDeselect:t[1]||(t[1]=function(t){return e.deselectItem(e.id)})},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(a,{source:e.source,target:e.target,geometry:e.geometry,"is-selected":e.isSelected,"is-preview":e.isPreview,flash:e.flash,label:"TODO",ref:"root","data-test":"wire"},null,8,["source","target","geometry","is-selected","is-preview","flash"])]})),_:1},8,["style","position","is-selected","onDragStart","onDrag","onDragEnd"])}n("a9e3");var d=n("ec26");function p(e,t,n,o,r,c){var a=Object(i["resolveComponent"])("resizable");return Object(i["openBlock"])(),Object(i["createBlock"])(a,{class:"draggable",ref:"draggable",style:Object(i["normalizeStyle"])(e.style),onMousedown:Object(i["withModifiers"])(e.onMouseDown,["stop"]),onTouchstart:Object(i["withModifiers"])(e.onTouchStart,["stop"]),onTouchmove:Object(i["withModifiers"])(e.onTouchMove,["stop"]),onTouchend:Object(i["withModifiers"])(e.dragEnd,["stop"]),onTouchcancel:e.dragEnd,onFocus:e.onFocus},{default:Object(i["withCtx"])((function(){return[Object(i["renderSlot"])(e.$slots,"default")]})),_:3},8,["style","onMousedown","onTouchstart","onTouchmove","onTouchend","onTouchcancel","onFocus"])}var f={ref:"resizable"};function m(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",f,[Object(i["renderSlot"])(e.$slots,"default")],512)}var h=n("3835"),b=n("6dd8"),v=Object(i["defineComponent"])({name:"Resizable",emits:["resize"],setup:function(e,t){var n=t.emit,o=Object(i["ref"])();function r(e){var t=Object(h["a"])(e,1),o=t[0];n("resize",o.target.getBoundingClientRect())}var c=new b["a"](r);return Object(i["onMounted"])((function(){o.value&&c.observe(o.value)})),{resizable:o}}}),g=n("6b0d"),O=n.n(g);const y=O()(v,[["render",m]]);var j=y,x=Object(i["defineComponent"])({name:"Draggable",components:{Resizable:j},props:{position:{type:Object,default:function(){return{x:0,y:0}}},isSelected:{type:Boolean,default:!1},isMobile:{type:Boolean,default:!1}},emits:["dragStart","drag","dragEnd","select","deselect","touchhold"],setup:function(e,t){var n=t.emit,o=Object(i["computed"])((function(){return{left:"".concat(e.position.x,"px"),top:"".concat(e.position.y,"px")}})),r=Object(i["ref"])();Object(i["onMounted"])((function(){window.addEventListener("mousemove",p),window.addEventListener("mouseup",m)})),Object(i["onBeforeUnmount"])((function(){window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",m)})),Object(i["watchEffect"])((function(){var t;e.isSelected&&(null===(t=r.value)||void 0===t||t.$el.focus())}));var c=0,a=!1,s=!1,u={x:0,y:0},l={x:0,y:0};function d(t){e.isSelected?n("deselect"):n("select",t)}function p(e){var t=e.clientX,o=e.clientY;a&&(u.x===t&&u.y===o||(u={x:t,y:o},n(s?"drag":"dragStart",u,l),s=!0))}function f(e){var t=e.clientX,n=e.clientY;if(r.value){var o=r.value.$el.getBoundingClientRect(),i=o.x,c=o.y,a=o.width,d=o.height;u={x:t,y:n},l={x:t-(i+a/2),y:n-(c+d/2)},s=!1}}function m(){a&&(clearTimeout(c),n("dragEnd",u,l),a=!1)}function h(e){a=!0,d(e.ctrlKey),f(e)}function b(e){c=window.setTimeout((function(){a=!1,d(!0),navigator.vibrate(100),n("touchhold",e)}),1e3),f(e.touches[0]),a=!0}function v(e){clearTimeout(c),p(e.touches[0])}function g(){setTimeout((function(){e.isSelected||n("select")}))}return{style:o,draggable:r,onMouseDown:h,onTouchStart:b,onTouchMove:v,dragEnd:m,onFocus:g}}});n("bc65");const I=O()(x,[["render",p]]);var w=I,C=(n("99af"),["width","height"]),k=["transform","d"],S=["transform","d"],B=["transform","d"],E=["transform","d"];function P(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",{class:Object(i["normalizeClass"])(["wire",{"wire--selected":e.isSelected,"wire--flash":e.flash,"wire--preview":e.isPreview}]),width:e.geometry.width,height:e.geometry.height},[Object(i["createElementVNode"])("title",null,Object(i["toDisplayString"])(e.label),1),Object(i["createElementVNode"])("path",{class:"wire__outline",fill:"none",transform:"translate(".concat(Math.abs(e.geometry.minX),", ").concat(Math.abs(e.geometry.minY),")"),d:e.geometry.path},null,8,k),Object(i["createElementVNode"])("path",{class:Object(i["normalizeClass"])(["wire__display",{"wire__display--on":1===e.source.value,"wire__display--off":-1===e.source.value}]),fill:"none",transform:"translate(".concat(Math.abs(e.geometry.minX),", ").concat(Math.abs(e.geometry.minY),")"),d:e.geometry.path},null,10,S),e.isAnimated?(Object(i["openBlock"])(),Object(i["createElementBlock"])("path",{key:0,class:"wire__animation",fill:"none",transform:"translate(".concat(Math.abs(e.geometry.minX),", ").concat(Math.abs(e.geometry.minY),")"),d:e.geometry.path},null,8,B)):Object(i["createCommentVNode"])("",!0),Object(i["createElementVNode"])("path",{class:"wire__clickable",fill:"none",transform:"translate(".concat(Math.abs(e.geometry.minX),", ").concat(Math.abs(e.geometry.minY),")"),d:e.geometry.path},null,8,E)],10,C)}var N=Object(i["defineComponent"])({name:"Wire",props:{isAnimated:{type:Boolean,default:!1},source:{type:Object,required:!0},target:{type:Object,required:!0},label:{type:String,default:""},isPreview:{type:Boolean,default:!1},isSelected:{type:Boolean,default:!1},flash:{type:Boolean,default:!1},geometry:{type:Object,required:!0}}});n("56bb");const D=O()(N,[["render",P]]);var _,M=D,z=n("2909");(function(e){e[e["Outer"]=0]="Outer",e[e["Inner"]=1]="Inner",e[e["Radial"]=2]="Radial",e[e["Grid"]=3]="Grid",e[e["None"]=4]="None"})(_||(_={}));var V=_;function T(e,t){return Math.round(e/t)*t}function F(e,t,n){var o=Math.pow(e.x-t.x,2),i=Math.pow(e.y-t.y,2);return Math.sqrt(o+i)<=n}function R(e,t){return{x:T(e.left,t)-e.left,y:T(e.top,t)-e.top}}function L(e,t,n){for(var o=0;o<e.length;o++){var i=e[o];if(F({x:i.left,y:i.top},{x:t.left,y:t.top},n))return{x:i.left-t.left,y:i.top-t.top}}return{x:0,y:0}}function A(e,t,n){for(var o={x:0,y:0},i=0;i<e.length;i++){var r=e[i],c=Math.abs(r.top-t.bottom)<=n,a=Math.abs(r.bottom-t.top)<=n,s=Math.abs(r.left-t.right)<=n,u=Math.abs(r.right-t.left)<=n;(t.left<=r.right&&t.left>=r.left||t.right>=r.left&&t.right<=r.right||t.left<=r.left&&t.right>=r.right)&&(c&&(o.y=r.top-t.bottom),a&&(o.y=r.bottom-t.top)),(t.top<=r.bottom&&t.top>=r.top||t.bottom>=r.top&&t.bottom<=r.bottom||t.top<=r.top&&t.bottom>=r.bottom)&&(s&&(o.x=r.left-t.right),u&&(o.x=r.right-t.left))}return o}function U(e,t,n,o){switch(n){case V.Radial:return L(e,t,o);case V.Grid:return R(t,o);case V.Outer:default:return A(e,t,o)}}function $(e,t,n,o){var i=function(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)};return i(e,n,o)!==i(t,n,o)&&i(e,t,n)!==i(e,t,o)}function q(e,t,n){var o={x:n.left,y:n.top},i={x:n.right,y:n.top},r={x:n.right,y:n.bottom},c={x:n.left,y:n.bottom};return $(e,t,o,i)||$(e,t,i,r)||$(e,t,r,c)||$(e,t,c,o)}function G(e,t){return!(e.left>=t.right||t.left>=e.right)&&!(e.top>=t.bottom||t.top>=e.bottom)}function W(e,t){return{left:e.left*t,top:e.top*t,bottom:e.bottom*t,right:e.right*t}}function K(e){return e.left!==e.right||e.top!==e.bottom}function Z(e){return[{left:e.x,right:e.x,top:-1/0,bottom:1/0},{left:-1/0,right:1/0,top:e.y,bottom:e.y}]}function X(e){return{left:e.x,top:e.y,right:e.x,bottom:e.y}}function Y(e,t,n,o){if(t%2===0)return{left:e.x,top:e.y,bottom:o+e.y,right:n+e.x};var i=e.x+n/2,r=e.y+o/2;return{left:i-o/2,top:r-n/2,right:i+o/2,bottom:r+n/2}}function H(e){return e.reduce((function(e,t){return{left:Math.min(e.left,t.left),top:Math.min(e.top,t.top),right:Math.max(e.right,t.right),bottom:Math.max(e.bottom,t.bottom)}}),{left:1/0,top:1/0,right:0,bottom:0})}function J(e){var t=e.right-e.left,n=e.bottom-e.top;return{x:t/2,y:n/2}}function Q(e,t,n){var o=J(e),i=t.right-t.left,r=t.bottom-t.top;return{x:T(o.x-i/2,n),y:T(o.y-r/2,n)}}function ee(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var i=Math[e].apply(Math,Object(z["a"])(n.map((function(e){var t=e.x;return t})))),r=Math[e].apply(Math,Object(z["a"])(n.map((function(e){var t=e.y;return t}))));return{x:i,y:r}}var te,ne={isInNeighborhood:F,getRadialSnapOffset:L,getOuterSnapOffset:A,getGridSnapPosition:R,isLineIntersectingRectangle:q,scaleBoundingBox:W,isOneOrTwoDimensional:K,getLinearBoundaries:Z,getPointBoundary:X,hasIntersection:G,getBoundingBox:Y,getGroupBoundingBox:H,getBoundingBoxMidpoint:J,getCenteredScreenPoint:Q,getSnapOffset:U,getExtremePoint:ee};n("b680"),n("a15b");(function(e){e[e["Left"]=0]="Left",e[e["Top"]=1]="Top",e[e["Right"]=2]="Right",e[e["Bottom"]=3]="Bottom"})(te||(te={}));var oe=te;function ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(e+t%4+4)%4}var re=15;function ce(e,t){var n=e.position,o=t.position,i=le(n,o),r=i.start,c=i.end;if(r.x===c.x||r.y===c.y||c.x<=1&&r.x<=1||c.y<=1&&r.y<=1)return ae(r,c);var a=ue(e,n,o),s=ue(t,n,o);return de(a,s,r,c)}function ae(e,t){return{path:"M ".concat(e.x,",").concat(e.y," L ").concat(t.x,",").concat(t.y),width:Math.abs(e.x-t.x)+re,height:Math.abs(e.y-t.y)+re,minX:-re/2,minY:-re/2}}function se(e,t,n){switch(e){case 0:return t.y>n.y?2:oe.Left;case 1:return t.x<n.x?3:oe.Top;case 2:return t.y>n.y?0:oe.Right;case 3:return t.x<n.x?1:oe.Bottom;default:return se(ie(e),t,n)}}function ue(e,t,n){var o=ie(e.orientation+e.rotation-1);return e.isFreeport&&(o=se(o,t,n),e.rotation%4!==1&&e.rotation%4!==2||(o=ie(o-2))),o}function le(e,t){return e.x<=t.x?e.y<=t.y?{start:{x:0,y:0},end:{x:Math.floor(t.x-e.x),y:Math.floor(t.y-e.y)}}:{start:{x:0,y:Math.floor(e.y-t.y)},end:{x:Math.floor(t.x-e.x),y:0}}:e.y<=t.y?{start:{x:Math.floor(e.x-t.x),y:0},end:{x:0,y:Math.floor(t.y-e.y)}}:{start:{x:Math.floor(e.x-t.x),y:Math.floor(e.y-t.y)},end:{x:0,y:0}}}function de(e,t,n,o){var i=n.x,r=n.y,c=o.x,a=o.y,s=Math.max(Math.abs(i-c)/2,10),u=Math.max(Math.abs(r-a)/2,10),l=[i,i+s,i,i-s][e].toFixed(3),d=[r-u,r,r+u,r][e].toFixed(3),p=[c,c+s,c,c-s][t].toFixed(3),f=[a-u,a,a+u,a][t].toFixed(3),m=["M",i.toFixed(3),r.toFixed(3),"C",l,d,p,f,c.toFixed(3),a.toFixed(3)].join(" "),h=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((function(e){return parseInt(e.toString(),10)}))},b=Math.min.apply(Math,Object(z["a"])(h(i,l,p,c)))-re/2,v=Math.max.apply(Math,Object(z["a"])(h(i,l,p,c)))+re/2,g=Math.min.apply(Math,Object(z["a"])(h(r,d,f,a)))-re/2,O=Math.max.apply(Math,Object(z["a"])(h(r,d,f,a)))+re/2,y=v-b+re,j=O-g+re;return{width:y,height:j,path:m,minX:b,minY:g}}var pe=Object(i["defineComponent"])({name:"Connection",components:{Draggable:w,Wire:M},props:{isSelected:{type:Boolean,default:!1},id:{type:String,required:!0},zIndex:{type:Number,default:0},isPreview:{type:Boolean,default:!1},flash:{type:Boolean,default:!1},store:{type:Function,required:!0}},setup:function(e){var t=e.store(),n=Object(i["ref"])(t.connections[e.id]),o=Object(i["ref"])(),r=Object(i["computed"])((function(){return t.ports[n.value.source]})),c=Object(i["computed"])((function(){return t.ports[n.value.target]})),a=Object(i["computed"])((function(){return ne.getExtremePoint("min",r.value.position,c.value.position)})),u=Object(i["computed"])((function(){return ce(r.value,c.value)})),l=Object(i["computed"])((function(){return{y:a.value.y+u.value.minY,x:a.value.x+u.value.minX}})),p=null;function f(){null===n.value.groupId&&(p=null)}function m(e){return h.apply(this,arguments)}function h(){return h=Object(s["a"])(regeneratorRuntime.mark((function e(i){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==(a=o.value)&&void 0!==a&&a.$el){e.next=2;break}return e.abrupt("return");case 2:null===p&&(o.value.$el.style.opacity="0",p=Object(d["a"])(),t.createFreeport({itemId:p,inputPortId:Object(d["a"])(),outputPortId:Object(d["a"])(),connectionChainId:n.value.connectionChainId,sourceId:r.value.id,targetId:c.value.id}),t.setSnapBoundaries(p)),t.dragItem(p,i);case 4:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function b(){p&&t.disconnect({source:n.value.source,target:n.value.target}),p=null}return{root:o,geometry:u,position:l,onDragStart:f,onDrag:m,onDragEnd:b,source:r,target:c,selectItem:t.selectItem,deselectItem:t.deselectItem}}});const fe=O()(pe,[["render",l]]);var me=fe;n("4de4");function he(e,t,n,o,r,c){var a=Object(i["resolveComponent"])("properties"),s=Object(i["resolveComponent"])("port-item"),u=Object(i["resolveComponent"])("circuit-component"),l=Object(i["resolveComponent"])("draggable");return Object(i["openBlock"])(),Object(i["createBlock"])(l,{style:Object(i["normalizeStyle"])({transform:"rotate(".concat(90*e.item.rotation,"deg)"),outline:"none",pointerEvents:"none",zIndex:e.zIndex}),position:e.item.position,"is-selected":e.isSelected,onResize:e.onResize,onKeydown:Object(i["withKeys"])(e.onEscapeKey,["esc"]),onDrag:e.onDrag,onDragStart:e.onDragStart,onDragEnd:e.store.commitCachedState,onSelect:t[1]||(t[1]=function(t){return e.store.selectItem(e.id,t)}),onDeselect:t[2]||(t[2]=function(t){return e.store.deselectItem(e.id)}),ref:"itemRef","data-test":"item"},{default:Object(i["withCtx"])((function(){return[e.isPropertiesEnabled?(Object(i["openBlock"])(),Object(i["createBlock"])(a,{key:0,tabindex:0,properties:e.item.properties,id:e.id,onUpdate:e.store.setProperties,onFocus:t[0]||(t[0]=function(t){return e.store.setActivePortId(null)}),"aria-label":"Properties dialog","data-test":"properties"},null,8,["properties","id","onUpdate"])):Object(i["createCommentVNode"])("",!0),Object(i["createVNode"])(u,{type:e.item.type,subtype:e.item.subtype,ports:e.ports,properties:e.item.properties,"is-selected":e.isSelected,flash:e.flash,onToggle:e.store.setPortValue},Object(i["createSlots"])({_:2},[Object(i["renderList"])(4,(function(t,n){return{name:n,fn:Object(i["withCtx"])((function(){return[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.ports.filter((function(e){return e.orientation===n})),(function(t){return Object(i["openBlock"])(),Object(i["createBlock"])(s,{tabindex:0,store:e.$props.store,id:t.id,key:t.id,type:t.type,"is-freeport":e.item.type===e.ItemType.Freeport,position:t.position,orientation:t.orientation+e.item.rotation,"connected-port-ids":t.connectedPortIds,rotation:e.item.rotation,onKeypress:Object(i["withKeys"])(e.onEscapeKey,["esc"]),onFocus:function(n){return e.store.setActivePortId(t.id)},onBlur:function(n){return e.onPortBlur(t.id)},onDeselect:e.focus,"data-test":"port-item"},null,8,["store","id","type","is-freeport","position","orientation","connected-port-ids","rotation","onKeypress","onFocus","onBlur","onDeselect"])})),128))]}))}}))]),1032,["type","subtype","ports","properties","is-selected","flash","onToggle"])]})),_:1},8,["style","position","is-selected","onResize","onKeydown","onDrag","onDragStart","onDragEnd"])}function be(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:Object(i["normalizeClass"])(["circuit-component",{"circuit-component--selected":e.isSelected,"circuit-component--flash":e.flash}])},[(Object(i["openBlock"])(),Object(i["createBlock"])(Object(i["resolveDynamicComponent"])(e.type),Object(i["normalizeProps"])(Object(i["guardReactiveProps"])(e.$props)),null,16)),(Object(i["openBlock"])(),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(["left","top","right","bottom"],(function(t,n){return Object(i["createElementVNode"])("div",{key:n,class:Object(i["normalizeClass"])("circuit-component__ports circuit-component__ports--".concat(t))},[Object(i["renderSlot"])(e.$slots,n)],2)})),64))],2)}var ve={class:"freeport"};function ge(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",ve)}var Oe=Object(i["defineComponent"])({name:"Freeport"});n("78ec");const ye=O()(Oe,[["render",ge]]);var je=ye,xe={class:"input-node"},Ie={key:0},we={key:1},Ce={key:2};function ke(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",xe,[Object(i["createElementVNode"])("button",{type:"button",class:Object(i["normalizeClass"])(["input-node__flipper",{"input-node__flipper--on":1===e.model,"input-node__flipper--off":-1===e.model,"input-node__flipper--high-z":0===e.model}]),tabindex:0,onMousedown:t[0]||(t[0]=Object(i["withModifiers"])((function(){return e.onInput&&e.onInput.apply(e,arguments)}),["stop"]))},[1===e.model?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",Ie,"ON")):-1===e.model?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",we,"OFF")):(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",Ce,"?"))],34)])}var Se=Object(i["defineComponent"])({name:"InputNode",props:{ports:{type:Array,default:function(){return[]}}},setup:function(e,t){var n=t.emit,o=Object(i["ref"])(0);function r(t){t.preventDefault(),t.stopPropagation(),o.value=1===o.value?-1:1,n("toggle",{id:e.ports[0].id,value:o.value})}return Object(i["watchEffect"])((function(){var t;o.value=(null===(t=e.ports[0])||void 0===t?void 0:t.value)||0})),{model:o,onInput:r}}});n("cfbe");const Be=O()(Se,[["render",ke]]);var Ee=Be,Pe={class:"integrated-circuit"},Ne={class:"integrated-circuit__wires"},De={class:"integrated-circuit__wires-divider"},_e={class:"integrated-circuit__wires-divider"},Me=Object(i["createElementVNode"])("div",{class:"integrated-circuit__box"},[Object(i["createElementVNode"])("div",{class:"integrated-circuit__box-inner"}," R-S Flip-Flop ")],-1);function ze(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Pe,[Object(i["createElementVNode"])("div",Ne,[Object(i["createElementVNode"])("div",De,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.ports.filter((function(e){return 0===e.orientation})),(function(e){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:e.id,class:"integrated-circuit__wire"})})),128))]),Object(i["createElementVNode"])("div",_e,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.ports.filter((function(e){return 2===e.orientation})),(function(e){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:e.id,class:"integrated-circuit__wire"})})),128))])]),Me])}var Ve=Object(i["defineComponent"])({name:"IntegratedCircuit",props:{ports:{type:Array,default:function(){return[]}}}});n("a390");const Te=O()(Ve,[["render",ze]]);var Fe=Te,Re=Object(i["createElementVNode"])("div",{class:"logic-gate__wire"},null,-1),Le={key:0,class:"logic-gate__wires--multiwire"},Ae=Object(i["createElementVNode"])("div",{class:"logic-gate__wires-divider"},[Object(i["createElementVNode"])("div",{class:"logic-gate__wire"})],-1);function Ue(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{style:Object(i["normalizeStyle"])({height:"".concat(25*e.inputCount,"px")}),class:"logic-gate"},[Object(i["createElementVNode"])("div",{style:Object(i["normalizeStyle"])({width:(e.inputCount,"100%")}),class:"logic-gate__wires"},[Object(i["createElementVNode"])("div",{class:Object(i["normalizeClass"])([{"logic-gate__wires-divider--multiwire":e.inputCount>2},"logic-gate__wires-divider"])},[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.inputCount-1,(function(e){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:e,class:"logic-gate__wire"})})),128)),Re],2),e.inputCount>2?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Le)):Object(i["createCommentVNode"])("",!0),Ae],4),(Object(i["openBlock"])(),Object(i["createBlock"])(Object(i["resolveDynamicComponent"])(e.subtype),{class:"logic-gate__component"}))],4)}var $e={class:"and",width:"100",height:"50",viewBox:"0 -1 100 50"},qe=Object(i["createElementVNode"])("path",{transform:"translate(20, 0)",class:"and__element",d:"M 0 0 V 48 H 24 C 36 48 48 36 48 24 C 48 12 36 0 24 0 Z"},null,-1),Ge={key:0,cx:"73",cy:"24",r:"5",class:"and__negation"};function We(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",$e,[qe,e.isNegated?(Object(i["openBlock"])(),Object(i["createElementBlock"])("circle",Ge)):Object(i["createCommentVNode"])("",!0)])}var Ke=Object(i["defineComponent"])({name:"And",props:{isNegated:{type:Boolean,default:!1}}});n("b704");const Ze=O()(Ke,[["render",We]]);var Xe=Ze,Ye={width:"100",height:"50",viewBox:"0 -1 100 50",class:"or"},He=Object(i["createElementVNode"])("path",{transform:"translate(10, 0)",fill:"#fff",d:"M 0 0 C 12 12 12 36 0 48 H 0 H 24 C 48 48 60 36 72 24 C 60 12 48 0 24 0 Z",class:"or__element"},null,-1),Je={key:0,fill:"none",d:"M 0 0 C 12 12 12 36 0 48",class:"or__tail"},Qe={key:1,cx:"88",cy:"24",r:"5",class:"or__negation"};function et(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",Ye,[He,e.isXor?(Object(i["openBlock"])(),Object(i["createElementBlock"])("path",Je)):Object(i["createCommentVNode"])("",!0),e.isNegated?(Object(i["openBlock"])(),Object(i["createElementBlock"])("circle",Qe)):Object(i["createCommentVNode"])("",!0)])}var tt=Object(i["defineComponent"])({name:"Or",props:{isNegated:{type:Boolean,default:!1},isXor:{type:Boolean,default:!1}}});n("3359");const nt=O()(tt,[["render",et]]);var ot=nt;function it(e,t,n,o,r,c){var a=Object(i["resolveComponent"])("or");return Object(i["openBlock"])(),Object(i["createBlock"])(a,{"is-negated":!0})}var rt=Object(i["defineComponent"])({name:"Nor",components:{Or:ot}});const ct=O()(rt,[["render",it]]);var at=ct;function st(e,t,n,o,r,c){var a=Object(i["resolveComponent"])("and");return Object(i["openBlock"])(),Object(i["createBlock"])(a,{"is-negated":!0})}var ut=Object(i["defineComponent"])({name:"Nand",components:{And:Xe}});const lt=O()(ut,[["render",st]]);var dt=lt;function pt(e,t,n,o,r,c){var a=Object(i["resolveComponent"])("or");return Object(i["openBlock"])(),Object(i["createBlock"])(a,{"is-negated":!0,"is-xor":!0})}var ft=Object(i["defineComponent"])({name:"Xnor",components:{Or:ot}});const mt=O()(ft,[["render",pt]]);var ht=mt;function bt(e,t,n,o,r,c){var a=Object(i["resolveComponent"])("or");return Object(i["openBlock"])(),Object(i["createBlock"])(a,{"is-xor":!0})}var vt=Object(i["defineComponent"])({name:"Xor",components:{Or:ot}});const gt=O()(vt,[["render",bt]]);var Ot=gt,yt=Object(i["defineComponent"])({name:"LogicGate",components:{And:Xe,Or:ot,Nor:at,Nand:dt,Xnor:ht,Xor:Ot},props:{properties:{type:Object,default:function(){return{}}},subtype:{subtype:String,required:!0}},setup:function(e){var t=Object(i["computed"])((function(){var t;return(null===(t=e.properties.inputCount)||void 0===t?void 0:t.value)||2}));return{inputCount:t}}});n("aa2e");const jt=O()(yt,[["render",Ue]]);var xt=jt;function It(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:Object(i["normalizeClass"])(["output-node",{"output-node--on":1===e.value,"output-node--high-z":0===e.value}])},null,2)}var wt=Object(i["defineComponent"])({name:"OutputNode",props:{ports:{type:Array,default:function(){return[]}}},setup:function(e){var t=Object(i["computed"])((function(){var t;return(null===(t=e.ports[0])||void 0===t?void 0:t.value)||0}));return{value:t}}});n("5433");const Ct=O()(wt,[["render",It]]);var kt=Ct,St={Freeport:je,InputNode:Ee,IntegratedCircuit:Fe,LogicGate:xt,OutputNode:kt},Bt=Object(i["defineComponent"])({name:"CircuitComponent",components:St,emits:["toggle"],props:{isSelected:{type:Boolean,default:!1},flash:{type:Boolean,default:!1},type:{type:String,required:!0},subtype:{type:String,required:!0},ports:{type:Array,default:function(){return[]}},properties:{type:Object,default:function(){return{}}}}});n("5cf4");const Et=O()(Bt,[["render",be]]);var Pt=Et,Nt=["aria-hidden"],Dt={class:"properties__heading",role:"title"},_t=Object(i["createTextVNode"])(" Properties "),Mt=["for"],zt=["onUpdate:modelValue","id"],Vt=["value"],Tt=["onUpdate:modelValue","id"],Ft=["onUpdate:modelValue","min","max","type","id"];function Rt(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{onKeydown:[t[1]||(t[1]=Object(i["withKeys"])((function(t){return e.isOpen=!0}),["space"])),t[2]||(t[2]=Object(i["withKeys"])((function(){return e.onKeyDown&&e.onKeyDown.apply(e,arguments)}),["esc"]))],onClick:t[3]||(t[3]=function(t){return e.isOpen=!0}),onContextmenu:t[4]||(t[4]=function(){return e.stopPropagation&&e.stopPropagation.apply(e,arguments)}),onMousedown:t[5]||(t[5]=function(){return e.stopPropagation&&e.stopPropagation.apply(e,arguments)}),onMouseup:t[6]||(t[6]=function(){return e.stopPropagation&&e.stopPropagation.apply(e,arguments)}),class:"properties"},[e.isOpen?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:0,class:"properties__dialog","aria-hidden":!e.isOpen},[Object(i["createElementVNode"])("div",Dt,[_t,Object(i["createElementVNode"])("span",{onClick:t[0]||(t[0]=function(t){return e.isOpen=!1}),class:"properties__close"}," Ã— ")]),(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.model,(function(t,n){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:n,class:"properties__entry"},[Object(i["createElementVNode"])("label",{for:"".concat(e.id,"_").concat(n)},Object(i["toDisplayString"])(t.label),9,Mt),t.options?Object(i["withDirectives"])((Object(i["openBlock"])(),Object(i["createElementBlock"])("select",{key:0,"onUpdate:modelValue":function(e){return t.value=e},id:"".concat(e.id,"_").concat(n),class:"properties__input"},[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(t.options,(function(e,t){return Object(i["openBlock"])(),Object(i["createElementBlock"])("option",{key:t,value:e},Object(i["toDisplayString"])(t),9,Vt)})),128))],8,zt)),[[i["vModelSelect"],t.value]]):"boolean"===t.type?Object(i["withDirectives"])((Object(i["openBlock"])(),Object(i["createElementBlock"])("input",{key:1,"onUpdate:modelValue":function(e){return t.value=e},id:"".concat(e.id,"_").concat(n),type:"checkbox",class:"properties__input"},null,8,Tt)),[[i["vModelCheckbox"],t.value]]):Object(i["withDirectives"])((Object(i["openBlock"])(),Object(i["createElementBlock"])("input",{key:2,"onUpdate:modelValue":function(e){return t.value=e},min:t.min,max:t.max,type:t.type,id:"".concat(e.id,"_").concat(n),class:"properties__input"},null,8,Ft)),[[i["vModelDynamic"],t.value]])])})),128))],8,Nt)):Object(i["createCommentVNode"])("",!0)],32)}var Lt=n("cd3f"),At=n.n(Lt),Ut=Object(i["defineComponent"])({name:"Properties",props:{properties:{type:Object,default:function(){return{}}},id:{type:String,default:""}},emits:["update"],data:function(){return{model:{},isOpen:!1}},watch:{properties:{handler:function(e){this.model=At()(e)},deep:!0,immediate:!0},model:{handler:function(e){this.$emit("update",{id:this.id,properties:e})},deep:!0}},methods:{onKeyDown:function(e){this.isOpen=!1,e.preventDefault(),this.$el.focus()},stopPropagation:function(e){e.stopPropagation()}}});n("521b");const $t=O()(Ut,[["render",Rt]]);var qt=$t;n("caad"),n("2532");function Gt(e,t,n,o,r,c){var a=Object(i["resolveComponent"])("port-handle"),s=Object(i["resolveComponent"])("draggable"),u=Object(i["resolveComponent"])("port-pivot");return Object(i["openBlock"])(),Object(i["createBlock"])(u,{rotation:e.rotation,onBlur:e.onBlur,onKeydown:[Object(i["withKeys"])(e.onEscapeKey,["esc"]),t[2]||(t[2]=Object(i["withKeys"])((function(t){return e.store.cycleConnectionPreviews(e.id)}),["space"])),Object(i["withKeys"])(e.store.commitPreviewedConnection,["enter"])],onContextmenu:t[3]||(t[3]=function(t){return e.store.setActivePortId(e.id)})},{default:Object(i["withCtx"])((function(){return[e.isFreeport?(Object(i["openBlock"])(),Object(i["createBlock"])(a,{key:1,type:e.type,active:e.store.activePortId===e.id||e.store.connectablePortIds.includes(e.id)},null,8,["type","active"])):(Object(i["openBlock"])(),Object(i["createBlock"])(s,{key:0,onDragStart:e.onDragStart,onDrag:e.onDrag,onDragEnd:e.onDragEnd,onTouchhold:t[0]||(t[0]=function(t){return e.store.togglePortMonitoring(e.id)}),onDblclick:t[1]||(t[1]=function(t){return e.store.togglePortMonitoring(e.id)}),tabindex:-1},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(a,{type:e.type,active:e.store.activePortId===e.id||e.store.connectablePortIds.includes(e.id),"touch-friendly":""},null,8,["type","active"])]})),_:1},8,["onDragStart","onDrag","onDragEnd"]))]})),_:1},8,["rotation","onBlur","onKeydown"])}var Wt={class:"port-handle"};function Kt(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Wt,[Object(i["createElementVNode"])("div",{class:Object(i["normalizeClass"])(["port-handle__display",{"port-handle__display--active":e.active}])},null,2)])}var Zt=Object(i["defineComponent"])({name:"PortHandle",props:{active:{type:Boolean,default:!1},type:{type:Number,default:0}}});n("a4d6");const Xt=O()(Zt,[["render",Kt]]);var Yt=Xt;function Ht(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:"port-pivot",style:Object(i["normalizeStyle"])({transform:"rotate(-".concat(90*e.rotation,"deg)")}),onKeydown:t[0]||(t[0]=Object(i["withKeys"])((function(t){return e.$emit("connect")}),["space"]))},[Object(i["renderSlot"])(e.$slots,"default")],36)}var Jt=Object(i["defineComponent"])({name:"PortPivot",props:{rotation:{type:Number,default:0}}});n("bdf0");const Qt=O()(Jt,[["render",Ht]]);var en,tn=Qt;(function(e){e[e["Output"]=0]="Output",e[e["Input"]=1]="Input"})(en||(en={}));var nn=en,on=Object(i["defineComponent"])({name:"PortItem",components:{PortHandle:Yt,PortPivot:tn,Draggable:w},props:{id:{type:String,default:""},rotation:{type:Number,default:0},position:{type:Object,default:function(){return{x:0,y:0}}},isFreeport:{type:Boolean,default:!1},type:{type:Number,default:0},orientation:{type:Number,default:0},connectedPortIds:{type:Object,default:[]},store:{type:Function,required:!0}},setup:function(e,t){var n=t.emit,o=e.store(),i=V.Radial,r=null,c="",a=!1;function s(e){e.preventDefault(),e.stopPropagation(),n("deselect",e)}function u(){o.unsetConnectionPreview(),o.cachedState=null}function l(){r={itemId:Object(d["a"])()},c=Object(d["a"])(),a=!1,e.type===nn.Input?(r.outputPortId=c,r.targetId=e.id):(r.inputPortId=c,r.sourceId=e.id)}function p(t){var n=t.x,i=t.y;null!==r&&(a||(o.createFreeport(r,!1),o.setConnectablePortIds({portId:e.id,isDragging:!0}),o.setSnapBoundaries(c)),o.dragItem(r.itemId,{x:n,y:i},V.Radial))}function f(){null!==r&&(r.inputPortId?o.connectFreeport({portId:r.inputPortId,sourceId:e.id}):r.outputPortId&&o.connectFreeport({portId:r.outputPortId,targetId:e.id}))}return{store:o,snapMode:i,onDragStart:l,onDrag:p,onDragEnd:f,onEscapeKey:s,onBlur:u,PortType:nn}}});const rn=O()(on,[["render",Gt]]);var cn,an=rn;(function(e){e["Buffer"]="Buffer",e["CircuitNode"]="CircuitNode",e["Freeport"]="Freeport",e["InputNode"]="InputNode",e["IntegratedCircuit"]="IntegratedCircuit",e["LogicGate"]="LogicGate",e["OutputNode"]="OutputNode"})(cn||(cn={}));var sn,un=cn;(function(e){e["None"]="None",e["Switch"]="Switch",e["PushButton"]="PushButton",e["Clock"]="Clock",e["Lightbulb"]="Lightbulb",e["Buffer"]="Buffer",e["Not"]="Not",e["Tristate"]="Tristate",e["And"]="And",e["Or"]="Or",e["Nand"]="Nand",e["Nor"]="Nor",e["Xnor"]="Xnor",e["Xor"]="Xor"})(sn||(sn={}));var ln=sn,dn=Object(i["defineComponent"])({name:"Item",components:{CircuitComponent:Pt,Draggable:w,PortItem:an,Properties:qt},props:{zIndex:{type:Number,default:1},isSelected:{type:Boolean,default:!1},id:{type:String,required:!0},flash:{type:Boolean,default:!1},store:{type:Function,required:!0}},setup:function(e){var t=e.store(),n=Object(i["computed"])((function(){return t.items[e.id]})),o=Object(i["ref"])(),r=Object(i["computed"])((function(){return t.items[e.id].portIds.map((function(e){return t.ports[e]}))})),c=Object(i["computed"])((function(){return e.isSelected&&1===t.selectedItemIds.length&&n.value.type!==un.Freeport}));function a(){var e;null===(e=o.value)||void 0===e||e.$el.focus()}function s(){t.cacheState(),t.setSnapBoundaries(e.id)}function u(o,i){t.dragItem(e.id,{x:o.x-i.x-n.value.width/2*t.zoomLevel,y:o.y-i.y-n.value.height/2*t.zoomLevel})}function l(e){var t;document.activeElement===(null===(t=o.value)||void 0===t?void 0:t.$el)?o.value.$el.blur():e.preventDefault()}function d(e){t.activePortId===e&&t.setActivePortId(null)}function p(n){t.setItemSize({id:e.id,rect:n})}return{item:n,itemRef:o,store:t,ports:r,isPropertiesEnabled:c,focus:a,onDrag:u,onDragStart:s,onEscapeKey:l,onResize:p,onPortBlur:d,ItemSubtype:ln,ItemType:un}}});const pn=O()(dn,[["render",he]]);var fn=pn;function mn(e,t,n,o,r,c){var a=Object(i["resolveComponent"])("selector"),s=Object(i["resolveComponent"])("resizable");return Object(i["openBlock"])(),Object(i["createBlock"])(s,{onMousewheel:e.mousewheel,onMousedown:Object(i["withModifiers"])(e.onMouseDown,["right"]),onTouchstart:e.onTouchStart,onTouchmove:e.onTouchMove,onTouchend:e.onTouchEnd,onResize:t[0]||(t[0]=function(t){return e.$emit("resize",t)}),class:"editor"},{default:Object(i["withCtx"])((function(){return[Object(i["createElementVNode"])("div",{style:Object(i["normalizeStyle"])(e.style),class:"editor__grid"},[Object(i["createVNode"])(a,{zoom:e.zoom,onSelectionStart:e.selectionStart,onSelectionEnd:e.selectionEnd},null,8,["zoom","onSelectionStart","onSelectionEnd"]),Object(i["renderSlot"])(e.$slots,"default")],4)]})),_:3},8,["onMousewheel","onMousedown","onTouchstart","onTouchmove","onTouchend"])}function hn(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{onMousedown:t[0]||(t[0]=Object(i["withModifiers"])((function(){return e.mousedown&&e.mousedown.apply(e,arguments)}),["left","self"])),class:"selector"},[e.selection?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:0,style:Object(i["normalizeStyle"])(e.style),class:"selector__selection"},null,4)):Object(i["createCommentVNode"])("",!0)],32)}var bn=Object(i["defineComponent"])({name:"Selector",props:{zoom:{type:Number,default:1}},data:function(){return{selection:!1,start:{x:0,y:0},end:{x:0,y:0}}},computed:{style:function(){var e=Math.min(this.start.x,this.end.x),t=Math.min(this.start.y,this.end.y),n=Math.abs(this.start.x-this.end.x),o=Math.abs(this.start.y-this.end.y);return{left:"".concat(e,"px"),top:"".concat(t,"px"),width:"".concat(n,"px"),height:"".concat(o,"px")}}},mounted:function(){window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)},destroy:function(){window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)},methods:{getPosition:function(e){var t=this.$el.getBoundingClientRect(),n=t.top,o=t.left,i=(e.x-o)/this.zoom,r=(e.y-n)/this.zoom;return{x:i,y:r}},mousedown:function(e){var t=this.getPosition(e);this.selection=!0,this.start=t,this.end=t,this.$emit("selectionStart",e)},mousemove:function(e){this.selection&&(this.end=this.getPosition(e))},mouseup:function(){this.selection&&(this.createSelection(),this.selection=!1,this.start.x=0,this.start.y=0,this.end.x=0,this.end.y=0)},createSelection:function(){var e=Math.min(this.start.x,this.end.x),t=Math.min(this.start.y,this.end.y),n=Math.abs(this.start.x-this.end.x),o=Math.abs(this.start.y-this.end.y);this.$emit("selectionEnd",{left:e,top:t,bottom:o+t,right:e+n})}}});n("ed6a");const vn=O()(bn,[["render",hn]]);var gn=vn,On=Object(i["defineComponent"])({name:"Editor",emits:["resize","pan","selection","deselect","zoom","contextmenu"],components:{Selector:gn,Resizable:j},props:{zoom:{type:Number,default:1},gridSize:{type:Number,default:0},width:{type:Number,default:0},height:{type:Number,default:0},offset:{type:Object,default:function(){return{x:0,y:0}}}},computed:{style:function(){return{backgroundSize:"".concat(this.gridSize,"px ").concat(this.gridSize,"px"),transform:"scale(".concat(this.zoom,")"),left:"".concat(this.offset.x,"px"),top:"".concat(this.offset.y,"px"),width:"".concat(this.width,"px"),height:"".concat(this.height,"px")}}},data:function(){return{panStartPosition:{x:0,y:0},originalMousePosition:{y:0,x:0},panning:!1,preventContextMenu:!1}},mounted:function(){window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp)},destroy:function(){window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp)},methods:{onMouseDown:function(e){this.startPanning(e.x,e.y),e.preventDefault(),e.stopPropagation()},onTouchStart:function(e){var t=e.touches[0],n=t.clientX,o=t.clientY;this.startPanning(n,o),e.preventDefault(),e.stopPropagation()},onMouseMove:function(e){this.pan(e.x,e.y)},onTouchMove:function(e){var t=e.touches[0],n=t.clientX,o=t.clientY;this.pan(n,o)},startPanning:function(e,t){this.panning=!0,this.panStartPosition={x:e-this.offset.x,y:t-this.offset.y},this.originalMousePosition={x:e,y:t}},pan:function(e,t){this.panning&&this.$emit("pan",{x:Math.min(e-this.panStartPosition.x,0),y:Math.min(t-this.panStartPosition.y,0)})},hasPannedSubstantially:function(e,t){var n=Math.abs(this.originalMousePosition.x-e),o=Math.abs(this.originalMousePosition.y-t);return n+o<2},onMouseUp:function(e){this.panning&&(2===e.button&&this.hasPannedSubstantially(e.x,e.y)&&(this.$emit("contextmenu",e),e.stopPropagation(),e.preventDefault()),this.panning=!1)},onTouchEnd:function(e){var t=e.changedTouches[0],n=t.clientX,o=t.clientY;this.hasPannedSubstantially(n,o)&&this.$emit("deselect"),this.panning=!1},mousewheel:function(e){if(e.shiftKey){var t=e.deltaY<0?1:-1,n=this.zoom+t/10;this.$emit("zoom",{zoom:n,point:e})}},selectionStart:function(e){e.shiftKey||this.$emit("deselect")},selectionEnd:function(e){this.$emit("selection",e)}}});n("5af2");const yn=O()(On,[["render",mn]]);var jn=yn;function xn(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:Object(i["normalizeClass"])(["group",{"group--is-selected":e.isSelected}]),tabindex:-1,style:Object(i["normalizeStyle"])({position:"absolute",left:"".concat(e.boundingBox.left,"px"),top:"".concat(e.boundingBox.top,"px"),width:"".concat(e.boundingBox.right-e.boundingBox.left,"px"),height:"".concat(e.boundingBox.bottom-e.boundingBox.top,"px"),zIndex:e.zIndex})},null,6)}var In=Object(i["defineComponent"])({name:"Group",props:{boundingBox:{type:Object,required:!0},id:{type:String,required:!0},isSelected:{type:Boolean,default:!1},zIndex:{type:Number,default:0},zoom:{type:Number,default:1}}});n("45ad");const wn=O()(In,[["render",xn]]);var Cn=wn;function kn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e(),o=[{label:"&Undo",enabled:n.canUndo,accelerator:"CommandOrControl+Z",click:n.undo},{type:"separator"},{role:"cut",enabled:n.hasSelection},{role:"copy",enabled:n.hasSelection},{role:"paste",enabled:n.hasSelection},{label:"Delete",accelerator:"Delete",enabled:n.hasSelection,click:n.deleteSelection},{type:"separator"},{role:"selectAll",enabled:n.baseItems.length>0}];return n.selectedItemIds.length>0&&(o.push({type:"separator"}),o.push({label:"&Rotate",submenu:[{label:"Rotate 90Â° &CW",accelerator:"CmdOrCtrl+R",click:function(){return n.rotate(1)}},{label:"Rotate 90Â° CC&W",accelerator:"CmdOrCtrl+Shift+R",click:function(){return n.rotate(-1)}}]})),n.hasSelection&&(o.push({type:"separator"}),o.push({label:"&Bring to Front",submenu:[{label:"&Bring to Front",click:function(){return n.setZIndex(n.zIndex)}},{label:"Bring &Forward",click:function(){return n.incrementZIndex(1)}}]}),o.push({label:"&Send to Back",submenu:[{label:"&Send to Back",click:function(){return n.setZIndex(n.zIndex)}},{label:"Send &Backward",click:function(){return n.incrementZIndex(-1)}}]})),n.canGroup&&o.push({label:"&Group",submenu:[{label:"&Group"},{label:"&Ungroup",enabled:n.canUngroup}]}),t.length>0&&(o.push({type:"separator"}),o=o.concat(t)),1===n.selectedItemIds.length&&(o.push({type:"separator"}),o.push({label:"&Item Properties"})),n.activePortId&&(o.push({type:"separator"}),o.push({type:"checkbox",label:"Show in &Oscilloscope",checked:!0})),o}function Sn(e){e();return[{label:"&Grid",submenu:[{label:"&Show grid"},{type:"separator"},{label:"Snap to &grid"},{label:"Snap to &elements"}]}]}function Bn(e){return kn(e,Sn(e).concat({type:"separator"}))}n("ac1f"),n("5319"),n("b0c0");var En=n("70b0"),Pn=n.n(En);function Nn(e,t,n,o){for(var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"printer-friendly",r=t.cloneNode(!0),c=n.right-n.left+2*o,a=n.bottom-n.top+2*o,s=0;s<r.children.length;s++){var u=r.children[s],l=parseInt(u.style.left.replace("px",""),10)+o,d=parseInt(u.style.top.replace("px",""),10)+o;u.style.left="".concat(l-n.left,"px"),u.style.top="".concat(d-n.top,"px")}return r.style["zoom"]=e.toString(),r.style.width="".concat(c,"px"),r.style.height="".concat(a,"px"),r.style.position="relative",r.style.top="0",r.style.left="0",r.style.background="none",i&&r.classList.add(i),{printArea:r,width:c,height:a}}function Dn(e,t){var n=document.createElement("iframe");n.name="print",n.style.width="1px",n.style.height="1px",n.style.opacity="0",n.style.position="absolute",n.style.top="0px",n.style.left="0px",document.body.appendChild(n);var o=n.contentWindow;if(o){var i=document.createElement("style");i.appendChild(document.createTextNode("\n      @page {\n        size: ".concat(t.map((function(e){return"".concat(e,"in")})).join(" "),";\n        margin: 0in;\n      }\n    "))),o.document.head.append(i),o.document.body.appendChild(e)}return n}function _n(e,t){return Mn.apply(this,arguments)}function Mn(){return Mn=Object(s["a"])(regeneratorRuntime.mark((function e(t,n){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return document.body.appendChild(t),e.next=3,Pn.a[n](t);case 3:return o=e.sent,t.remove(),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Mn.apply(this,arguments)}function zn(e){return Vn.apply(this,arguments)}function Vn(){return Vn=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){setTimeout((function(){if(!t)return e();t.addEventListener("afterprint",(function(){return e()})),t.print()}))})));case 1:case"end":return e.stop()}}),e)}))),Vn.apply(this,arguments)}function Tn(e,t,n){return Fn.apply(this,arguments)}function Fn(){return Fn=Object(s["a"])(regeneratorRuntime.mark((function e(t,n,o){var i,r,c,a,s,u,l,d,p,f,m,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=Nn(1/t,n,o,20),r=i.printArea,c=i.width,a=i.height,e.next=3,Rn.createImage(r,"toPng");case 3:return s=e.sent,u=[8.5,11],l=96*Math.min.apply(Math,u),d=96*Math.max.apply(Math,u),p=new Image,f=1,p.src=s,(c>l||c>d||a>l||a>d)&&(m=c>a,f=m?d/c:d/a,m&&u.reverse()),p.style.width="".concat(Math.floor(c*f),"px"),p.style.height="".concat(Math.floor(a*f),"px"),h=Rn.createPrintFrame(p,u),e.next=16,Rn.printWindow(null===h||void 0===h?void 0:h.contentWindow);case 16:null===h||void 0===h||h.remove();case 17:case"end":return e.stop()}}),e)}))),Fn.apply(this,arguments)}var Rn={createPrintArea:Nn,createPrintFrame:Dn,createImage:_n,printImage:Tn,printWindow:zn},Ln=Rn,An=(n("b64b"),n("c740"),n("e9c4"),n("2ff2")),Un=n("ade3"),$n=n("5530"),qn=(n("4e82"),n("6062"),n("3ca3"),n("ddb0"),n("159b"),n("a630"),n("fb6a"),n("4ec9"),n("7db0"),n("a434"),n("bee2")),Gn=n("d4ec"),Wn=Object(qn["a"])((function e(t,n){Object(Gn["a"])(this,e),this.node=t,this.id=n})),Kn=Wn,Zn={TRUE:1,FALSE:-1,UNKNOWN:0},Xn=Zn,Yn=n("262e"),Hn=n("2caf"),Jn=Object(qn["a"])((function e(t){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(Gn["a"])(this,e),this.inputValues={},this.outputs=[],this.isValueChanged=!0,this.forceContinue=!1,this.value=Xn.UNKNOWN,this.newValue=Xn.UNKNOWN,this.events=[],this.setValue=function(e){n.newValue=e,n.eval=function(){return e}},this.invokeEvent=function(e,t){n.events.forEach((function(n){n.eventType===e&&n.callback(t)}))},this.eval=function(){return n.value},this.valueCount=function(e){return Object.values(n.inputValues).filter((function(t){return t===e})).length},this.updateOutputs=function(e){n.outputs.forEach((function(t){var n=t.node,o=t.id;n.update(e,o)}))},this.update=function(e,t){n.inputValues[t]=e,n.newValue=n.eval()},this.propagate=function(){return n.value!==n.newValue?(n.isValueChanged=!0,n.value=n.newValue,n.updateOutputs(n.newValue),n.invokeEvent("change",n.newValue),n.outputs.map((function(e){var t=e.node;return t}))):[]},this.reset=function(){n.value=Xn.UNKNOWN,n.newValue=Xn.UNKNOWN,n.invokeEvent("change",n.newValue)},this.on=function(e,t){n.events.push({eventType:e,callback:t})},this.getProjectedValue=function(){return n.eval()||n.newValue||n.value},this.name=t,this.inputValues=o.reduce((function(e,t){return Object($n["a"])(Object($n["a"])({},e),{},Object(Un["a"])({},t,Xn.UNKNOWN))}),{})})),Qn=Jn,eo=function(e){Object(Yn["a"])(n,e);var t=Object(Hn["a"])(n);function n(){var e;return Object(Gn["a"])(this,n),e=t.apply(this,arguments),e.reset=function(){},e}return Object(qn["a"])(n)}(Qn),to=eo,no=function(e){Object(Yn["a"])(n,e);var t=Object(Hn["a"])(n);function n(){var e;return Object(Gn["a"])(this,n),e=t.apply(this,arguments),e.update=function(t){e.newValue!==t&&(e.newValue=t,e.invokeEvent("change",t))},e}return Object(qn["a"])(n)}(Qn),oo=no,io=Object(qn["a"])((function e(){var t=this;Object(Gn["a"])(this,e),this.queue=[],this.nodes=[],this.inputNodes=[],this.addNode=function(e){e instanceof to&&(t.inputNodes.push(e),t.enqueue(e)),t.nodes.push(e)},this.removeNode=function(e){if(e instanceof to){var n=t.inputNodes.findIndex((function(t){var n=t.name;return n===e.name}));-1!==n&&t.inputNodes.splice(n,1)}var o=t.nodes.findIndex((function(t){var n=t.name;return n===e.name}));-1!==o&&(t.removeNodeOutputs(e),t.nodes.splice(o,1)),t.next()},this.addConnection=function(e,n,o){e.outputs.push(new Kn(n,o)),e.value=Xn.UNKNOWN,t.enqueue(e),t.next()},this.removeConnection=function(e,n){e.outputs.concat().forEach((function(o,i){var r=o.node,c=o.id;n===r&&(n.update(Xn.UNKNOWN,c),e.outputs.splice(i,1),t.enqueue(n))})),t.next()},this.removeNodeOutputs=function(e){for(var n=0;n<e.outputs.length;n++)t.removeConnection(e,e.outputs[n].node)},this.enqueue=function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];n.forEach((function(e){~t.queue.indexOf(e)||t.queue.push(e)}))},this.dequeue=function(e){var n=t.queue.indexOf(e);~n&&t.queue.splice(n,1)},this.reset=function(){t.nodes.forEach((function(e){return e.reset()}))},this.next=function(){var e=!1,n=[];while(t.queue.length>0){var o=t.queue.shift();o&&(n=n.concat(o.propagate()),t.dequeue(o),o.isValueChanged&&(e=!0,o.isValueChanged=!1),o.forceContinue&&(!0,t.enqueue.apply(t,Object(z["a"])(n)),n=[]))}e&&t.enqueue.apply(t,Object(z["a"])(n))},this.isComplete=function(){var e=!0;return 0===t.queue.length||(t.queue.forEach((function(t){var n=t.getProjectedValue();n===t.value||t instanceof oo||(e=!1)})),e&&(t.queue=[]),e)}})),ro=io,co=function(e){Object(Yn["a"])(n,e);var t=Object(Hn["a"])(n);function n(){var e;return Object(Gn["a"])(this,n),e=t.apply(this,arguments),e.eval=function(){return e.valueCount(Xn.TRUE)?Xn.FALSE:e.valueCount(Xn.UNKNOWN)?Xn.UNKNOWN:Xn.TRUE},e}return Object(qn["a"])(n)}(Qn),ao=co,so=function(e){Object(Yn["a"])(n,e);var t=Object(Hn["a"])(n);function n(){var e;return Object(Gn["a"])(this,n),e=t.apply(this,arguments),e.update=function(t){var n=Object.keys(e.inputValues).pop();n&&(e.inputValues[n]=t,e.newValue=e.eval())},e.eval=function(){var t=Object.values(e.inputValues);return t.find((function(e){return 1===e}))||t.pop()||0},e}return Object(qn["a"])(n)}(Qn),uo=so,lo=(n("d9e2"),n("c0e2")),po=Object(qn["a"])((function e(t,n,o,i){var r=this;Object(Gn["a"])(this,e),this.width=0,this.lastY=0,this.segments=[],this.hue=0,this.initialize=function(e){var t={x:1,y:1};1===e?(t.y=0,r.lastY=1):(t.y=1,r.lastY=0),r.addSegment(t),r.updateWidth()},this.reset=function(){r.segments=[],r.width=0,r.initialize(1===r.lastY?0:1)},this.update=function(e){r.drawPulseConstant()},this.addSegment=function(e){var t=r.segments[r.segments.length-1];!t&&e.x>0?r.segments.push({x:0,y:e.y}):t&&t.x!==e.x&&t.y!==e.y&&r.segments.pop(),r.segments.push(e),r.updateWidth()},this.drawPulseChange=function(e){var t=r.segments[r.segments.length-1].x,n=e===Xn.TRUE?0:1;r.updateWidth(),r.addSegment({x:t,y:n})},this.drawPulseConstant=function(){var e=r.segments[r.segments.length-1],t=r.lastY!==e.y?e:r.segments.pop();t&&(r.updateWidth(),r.addSegment({x:t.x+1,y:t.y})),r.lastY=e.y},this.truncateSegments=function(e){if(!(e>r.width)){for(var t=r.width-e,n=0;n<r.segments.length;n++){var o=r.segments[n],i=o.x,c=o.y;if(i>t){i-t,r.segments.splice(0,n),r.segments.unshift({x:0,y:c});break}}for(var a=1;a<r.segments.length;a++){var s=r.segments[a],u=s.x,l=s.y;r.segments[a]={x:u-t,y:l}}r.updateWidth()}},this.updateWidth=function(){var e;r.width=(null===(e=r.segments.slice(-1)[0])||void 0===e?void 0:e.x)||0},this.id=t,this.name=n,this.hue=i,this.initialize(o)})),fo=Object(qn["a"])((function e(t,n,o){var i=this;Object(Gn["a"])(this,e),this.id=Object(d["a"])(),this.signal=0,this.interval=0,this.emitter=new lo["TinyEmitter"],this.on=function(e,t){i.emitter.on(e,t)},this.update=function(e){e>=i.lastUpdate+i.interval&&(i.signal=-1===i.signal?1:-1,i.lastUpdate=e,i.emitter.emit("change",i.signal))},this.name=t,this.signal=o,this.interval=n,this.lastUpdate=-n})),mo=Object(qn["a"])((function e(){var t=this;Object(Gn["a"])(this,e),this.isPaused=!0,this.waves={},this.refreshRate=20,this.lastUpdateTime=Date.now(),this.timeMsElapsed=0,this.timeMsOffset=0,this.emitter=new lo["TinyEmitter"],this.start=function(){if(t.isPaused){var e=t.lastUpdateTime%t.refreshRate;t.lastUpdateTime=Date.now()+e,t.isPaused=!1,t.tick()}},this.stop=function(){t.isPaused=!0},this.clear=function(){Object.values(t.waves).forEach((function(e){e instanceof po&&e.reset()}))},this.computeWaveGeometry=function(e){var t={},n=function(e){return e.map((function(e){var t=e.x,n=e.y;return"".concat(t,",").concat(n)}))};for(var o in e)if(e[o]instanceof po){var i=e[o],r=n(i.segments);t[o]={points:r.join(" "),width:i.width,hue:i.hue}}return t},this.on=function(e,n){t.emitter.on(e,n)},this.broadcast=function(){var e=window.screen.width,n=1e3/t.refreshRate,o=e/n;t.timeMsElapsed>=t.timeMsOffset+o/2*1e3&&(t.timeMsOffset=t.timeMsElapsed,Object.values(t.waves).forEach((function(t){t instanceof po&&t.truncateSegments(e)}))),t.emitter.emit("change",t.computeWaveGeometry(t.waves))},this.tick=function(){if(!t.isPaused){var e=Date.now(),n=1e4,o=!1;if(e>=t.lastUpdateTime+n)return t.stop(),void t.start();while(e>=t.lastUpdateTime+t.refreshRate){var i=Math.min(t.refreshRate,e-t.lastUpdateTime);o=!0,t.timeMsElapsed+=i,t.lastUpdateTime+=i,t.update()}o&&t.broadcast(),requestAnimationFrame(t.tick)}},this.update=function(){Object.values(t.waves).forEach((function(e){return e.update(t.timeMsElapsed)}))},this.add=function(e){t.waves.hasOwnProperty(e.id)||(t.waves[e.id]=e,0===t.timeMsElapsed&&t.broadcast())},this.remove=function(e){var n=e.id;delete t.waves[n],0===Object.keys(t.waves).length&&(t.stop(),t.clear())}}));function ho(e,t,n){switch(e){case ln.And:return new ao(t,n);default:return new ao(t,n)}}function bo(e,t){var n=e.id,o=e.type,i=e.subtype;switch(o){case un.CircuitNode:return new Qn(n,t);case un.InputNode:return new to(n,t);case un.LogicGate:return ho(i,n,t);case un.Buffer:case un.Freeport:return new uo(n,t);default:return new oo(n,t)}}var vo={getLogicGateNode:ho,getCircuitNode:bo},go=Object(qn["a"])((function e(t,n,o){var i=this;Object(Gn["a"])(this,e),this.nodes={},this.waves={},this.clocks={},this.valueMap={},this.circuit=new ro,this.oscillator=new mo,this.emitter=new lo["TinyEmitter"],this.isPaused=!1,this.oscillogram={},this.addElements=function(e,t,n){e.forEach((function(e){return i.addNode(e,n)})),t.forEach((function(e){return i.addConnection(e.source,e.target)}))},this.on=function(e,t){i.emitter.on(e,t)},this.emit=function(){i.emitter.emit("change",i.valueMap,i.oscillogram)},this.pause=function(){i.oscillator.stop(),i.isPaused=!0},this.unpause=function(){i.isPaused=!1,i.oscillator.start(),i.emit()},this.step=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!i.isPaused){i.circuit.next();var t=i.circuit.queue.length>0;if(e>1e4)throw new Error("An infinite loop detected!");t&&i.step(++e),i.emit()}},this.canContinue=!1,this.nextState=null,this.isDebug=!1,this.nextValueMap={},this.startDebugging=function(){i.isDebug=!0,i.pause(),i.computeNextState()},this.stopDebugging=function(){i.isDebug=!1,i.nextState=null,i.unpause()},this.advance=function(){var e=Object.keys(i.nextValueMap);e.length>0?e.forEach((function(e){return i.updatePortValue(e,i.nextValueMap[e])})):i.nextState&&(i.valueMap=JSON.parse(i.nextState)),i.nextValueMap={},i.computeNextState(),i.emit()},this.computeNextState=function(){var e=JSON.stringify(i.valueMap);i.circuit.next();var t=JSON.stringify(i.valueMap);i.nextState=e!==t?t:null,i.canContinue=null!==i.nextState},this.setOutputValue=function(e,t){i.valueMap[e]=t,i.emit()},this.updatePortValue=function(e,t){var n;i.nodes[e].setValue(t),i.circuit.enqueue(i.nodes[e]),null===(n=i.waves[e])||void 0===n||n.drawPulseChange(t)},this.enqueuePortValueChange=function(e,t){i.nextValueMap[e]=t,i.canContinue=Object.keys(i.nextValueMap).reduce((function(e,t){return e||i.valueMap[t]!==i.nextValueMap[t]}),!1),i.emit()},this.setPortValue=function(e,t){if(i.isDebug)return i.enqueuePortValueChange(e,t);i.nodes[e]&&i.nodes[e].value!==t&&(i.updatePortValue(e,t),i.step())},this.addIntegratedCircuit=function(e){if(e.integratedCircuit){var t=e.integratedCircuit,n=t.items,o=t.connections,r=t.ports;Object.values(n).forEach((function(e){i.addNode(e,r,!0)})),Object.values(o).forEach((function(e){i.addConnection(e.source,e.target)}))}},this.addNode=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0!==e.portIds.length){if(e.integratedCircuit)return i.addIntegratedCircuit(e);var o=e.portIds.filter((function(e){return t[e].type===nn.Input})),r=e.portIds.filter((function(e){return t[e].type===nn.Output})),c=vo.getCircuitNode(e,o);c.forceContinue=n,e.portIds.forEach((function(e){return i.addPort(e,c)})),e.type===un.InputNode&&e.subtype===ln.Clock&&i.addClock(r[0]),i.circuit.addNode(c),e.portIds.forEach((function(e){var n=t[e];n.isMonitored&&i.monitorPort(e,n.value,n.hue)}))}},this.removeNode=function(e){var t=function e(t){return t.integratedCircuit?Object.values(t.integratedCircuit.items).reduce((function(t,n){return n.integratedCircuit?t.concat(e(n)).concat(n.portIds):t.concat(n.portIds)}),[]):[]};e.portIds.concat(t(e)).forEach((function(e){var t=i.nodes[e];t&&(i.circuit.removeNode(t),i.removePort(e))})),i.emit()},this.addClock=function(e){i.clocks[e]=new fo(e,1e3,1),i.clocks[e].on("change",(function(t){i.setPortValue(e,t)})),i.oscillator.add(i.clocks[e])},this.addPort=function(e,t){i.nodes[e]=t,t.on("change",(function(t){var n;i.setOutputValue(e,t),null===(n=i.waves[e])||void 0===n||n.drawPulseChange(t)}))},this.removePort=function(e){i.clocks[e]&&i.oscillator.remove(i.clocks[e]),i.unmonitorPort(e),delete i.nodes[e],delete i.valueMap[e],delete i.clocks[e],delete i.waves[e]},this.addConnection=function(e,t){i.nodes[e]&&i.nodes[t]&&i.circuit.addConnection(i.nodes[e],i.nodes[t],t)},this.removeConnection=function(e,t){i.nodes[e]&&i.nodes[t]&&i.circuit.removeConnection(i.nodes[e],i.nodes[t])},this.monitorPort=function(e,t,n){i.waves[e]||(i.waves[e]=new po(e,e,t,n),i.oscillator.add(i.waves[e]))},this.unmonitorPort=function(e){i.waves[e]&&(i.oscillator.remove(i.waves[e]),i.oscillator.broadcast()),delete i.waves[e],delete i.oscillator.waves[e],delete i.oscillogram[e]},this.addElements(t,n,o),this.oscillator.on("change",(function(e){i.oscillogram=e,i.emit()}))}));function Oo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(e+t%4+4)%4}function yo(e,t,n){var o=e.right-e.left,i=e.bottom-e.top,r=e.left+o/2,c=e.top+i/2,a=t.position.x,s=t.position.y,u=a+t.width/2,l=s+t.height/2,d=Math.sqrt(Math.pow(r-u,2)+Math.pow(c-l,2)),p=Math.atan2(l-c,u-r),f=90*n*(Math.PI/180)+p,m=d*Math.cos(f)+r,h=d*Math.sin(f)+c;return{x:m-t.width/2,y:h-t.height/2}}function jo(e,t,n,o){var i=n.boundingBox,r=i.left,c=i.top,a=i.bottom,s=i.right,u=(e.orientation+n.rotation)%2===0?Math.floor((a-c)/t.length):Math.floor((s-r)/t.length),l=u*(o+1)-u/2;switch(Oo(e.orientation+n.rotation)){case oe.Left:return{x:r,y:c+l};case oe.Top:return{x:s-l,y:c};case oe.Right:return{x:s,y:a-l};case oe.Bottom:return{x:r+l,y:a}}}var xo={rotate:Oo,getGroupedItemRotatedPosition:yo,getRotatedPortPosition:jo};function Io(e,t,n){var o=Object.values(e).reduce((function(e,o){var i=e.connectionIds,r=e.freeportIds;if(n===o.connectionChainId){var c=t[o.source],a=t[o.target];i.add(o.id),null!==c&&void 0!==c&&c.isFreeport&&r.add(c.elementId),null!==a&&void 0!==a&&a.isFreeport&&r.add(a.elementId)}return{connectionIds:i,freeportIds:r}}),{connectionIds:new Set,freeportIds:new Set}),i=o.connectionIds,r=o.freeportIds;return{connectionIds:Array.from(i),freeportIds:Array.from(r)}}function wo(e,t){return e.zIndex>t.zIndex?1:e.zIndex<t.zIndex?-1:0}function Co(e,t,n,o,i){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];return{id:e,name:"",type:t,subtype:n,portIds:r.map((function(e){var t=e.id;return t})),groupId:null,rotation:0,boundingBox:{top:0,left:0,right:o,bottom:i},position:{x:0,y:0},zIndex:0,width:o,height:i,isSelected:!1,properties:{}}}function ko(e){var t=At()(e),n=t.ports,o=t.items,i=t.connections,r=t.groups,c=Co(Object(d["a"])(),un.IntegratedCircuit,"Flip flop",400,400);return Object.values(o).forEach((function(e){if(e.type===un.InputNode||e.type===un.OutputNode){var t=e.type===un.InputNode?nn.Output:nn.Input,o=e.type===un.InputNode?oe.Left:oe.Right;e.portIds.filter((function(e){return n[e].type===t})).forEach((function(t){var i=Object(d["a"])();n[i]=Object($n["a"])(Object($n["a"])({},At()(n[t])),{},{type:e.type===un.InputNode?nn.Input:nn.Output,id:i,elementId:e.id,orientation:o}),e.portIds.push(i),c.portIds.push(i)})),e.type=un.Buffer}})),c.integratedCircuit={items:o,connections:i,ports:n,groups:r,serializedState:JSON.stringify({items:e.items,connections:e.connections,ports:e.ports,groups:e.groups})},c}function So(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=At()(e),o=n.items,i=n.connections,r=n.ports,c=n.groups;function a(e){return Object.values(e).forEach((function(n){var o=n.id,i=Object(d["a"])();t[o]=i,e[i]=At()(n),delete e[o]})),e}function s(e,n){return Object.values(e).forEach((function(e){e.groupId=null!==e.groupId?t[e.groupId]:null})),Object.values(n).forEach((function(e){e.groupId=null!==e.groupId?t[e.groupId]:null})),{connections:e,items:n}}function u(e){return Object.values(e).forEach((function(n){var o=n.id,i=Object(d["a"])();t[o]=i,e[i]=At()(n),e[i].id=i,e[i].source=t[e[i].source],e[i].target=t[e[i].target],delete e[o]})),e}function l(e){return Object.values(e).forEach((function(n){e[n.id].connectionChainId=t[e[n.id].connectionChainId]})),e}function p(e){return Object.values(e).forEach((function(n){var o=n.id,i=Object(d["a"])();t[o]=i,e[i]=At()(n),n.integratedCircuit?e[i].integratedCircuit=Object($n["a"])({serializedState:n.integratedCircuit.serializedState},So(At()(n.integratedCircuit),t)):e[i].id=i,e[i].portIds=n.portIds.map((function(e){return t[e]})),delete e[o]})),e}function f(e){return Object.values(e).forEach((function(n){e[n.id].elementId=t[n.elementId]})),e}function m(e){return Object.values(e).forEach((function(n){var o=n.id,i=Object(d["a"])();t[o]=i,e[i]=At()(n),e[i].id=i,delete e[o]})),e}return r=m(r),o=p(o),r=f(r),i=u(i),i=l(i),c=a(c),Object($n["a"])(Object($n["a"])({},s(i,o)),{},{ports:r,groups:c})}function Bo(e){if(!e.integratedCircuit)return e;var t=So({items:Object(Un["a"])({},e.id,e),connections:{},ports:{},groups:{}}),n=t.items;return Object.values(n)[0]}var Eo={mapStandardCircuitIds:So,mapIntegratedCircuitIds:Bo};function Po(e,t,n,o){return{x:(n.x-t.x-e.left)/o,y:(n.y-t.y-e.top)/o}}function No(e,t,n,o,i){return{id:t,orientation:n,name:i,position:{x:0,y:0},type:o,rotation:0,elementId:e,value:0,hue:0,isMonitored:!1,isFreeport:!1,connectedPortIds:[]}}function Do(e,t){var n=[e.type];return e.subtype!==ln.None&&n.push(e.subtype),n.push(t.toString()),n.join(" ")}var _o=.1,Mo=2,zo=.1,Vo=function(e){return Object(o["b"])({id:e,state:function(){return{undoStack:[],redoStack:[],simulation:new go([],[],{}),oscillogram:{},taxonomyCounts:{},zoomLevel:1,zIndex:1,oscilloscopeHeight:200,isOscilloscopeOpen:!1,isCircuitEvaluated:!1,isDebugging:!1,isDirty:!1,hasLoaded:!1,isPrinting:!1,isCreatingImage:!1,isToolboxOpen:!1,viewport:new DOMRect,canvas:{top:0,left:0,bottom:0,right:0},snapBoundaries:[],connectablePortIds:[],selectedConnectionIds:[],selectedItemIds:[],selectedPortIndex:-1,cachedState:null,activeFreeportId:null,activePortId:null,connectionPreviewId:null,items:{},connections:{},ports:{},groups:{}}},getters:{baseItems:function(e){return Object.values(e.connections).concat(Object.values(e.items)).sort(wo)},zoom:function(e){return e.zoomLevel},hasSelection:function(e){return e.selectedItemIds.length>0||e.selectedConnectionIds.length>0},hasSelectedItems:function(e){return e.selectedItemIds.length>0},selectedGroupIds:function(e){var t=new Set;return e.selectedItemIds.forEach((function(n){var o;return t.add(null===(o=e.items[n])||void 0===o?void 0:o.groupId)})),Array.from(t)},canGroup:function(){return this.selectedGroupIds.length>1},canUngroup:function(){return!0},canUndo:function(e){return e.undoStack.length>0},canRedo:function(e){return e.redoStack.length>0}},actions:{loadDocument:function(e){this.buildCircuit(),this.applyState(e),this.reset()},incrementZoom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.setZoom({zoom:this.zoomLevel+zo*e})},setZoom:function(e){var t=e.zoom,n=e.point;t<_o&&(t=_o),t>Mo&&(t=Mo),t=Math.round(100*t)/100,n||(n=ne.getBoundingBoxMidpoint(this.viewport),n.x+=this.viewport.left,n.y+=this.viewport.top);var o=Po(this.canvas,this.viewport,n,this.zoomLevel),i={x:o.x*t,y:o.y*t},r={x:n.x-this.viewport.x,y:n.y-this.viewport.y};this.panTo({x:Math.round(Math.min(r.x-i.x,0)),y:Math.round(Math.min(r.y-i.y,0))}),this.zoomLevel=t},setViewerSize:function(e){this.viewport=e,this.canvas.right=screen.width/_o,this.canvas.bottom=screen.height/_o,!this.hasLoaded&&e.width>0&&e.height>0&&(this.hasLoaded=!0,this.centerAll(),this.panToCenter())},panTo:function(e){var t=e.x-this.canvas.left,n=e.y-this.canvas.top;this.canvas.left+=t,this.canvas.right+=t,this.canvas.top+=n,this.canvas.bottom+=n},panToCenter:function(){var e=ne.getBoundingBoxMidpoint(this.canvas);this.panTo({x:this.viewport.width/2-e.x,y:this.viewport.height/2-e.y})},centerAll:function(){var e=this,t=Object.values(this.items).map((function(e){var t=e.boundingBox;return t})),n=ne.getGroupBoundingBox(t),o=ne.getCenteredScreenPoint(this.canvas,n,20),i=o.x,r=o.y,c=i-n.left,a=r-n.top;Object.values(this.items).forEach((function(t){e.setItemPosition({id:t.id,position:{x:t.position.x+c,y:t.position.y+a}})}))},saveIntegratedCircuit:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=ko(e.$state),o=Eo.mapIntegratedCircuitIds(n),e.insertItemAtPosition({item:o,ports:[]}),e.setItemBoundingBox(o.id),e.setItemPortPositions(o.id),e.setSelectionState({id:o.id,value:!0});case 6:case"end":return t.stop()}}),t)})))()},buildCircuit:function(){var e=this;this.simulation.oscillator&&this.simulation.oscillator.stop();var t=new go(Object.values(this.items),Object.values(this.connections),this.ports);t.on("change",(function(t,n){for(var o in t)e.ports[o]&&(e.ports[o].value=t[o]);e.isCircuitEvaluated=!e.simulation.canContinue,e.oscillogram=n})),this.simulation=t},recycleSelection:function(e){var t=e?this.baseItems[0]:this.baseItems.slice(-1)[0];t&&(this.deselectAll(),this.setSelectionState({id:t.id,value:!0}))},undo:function(){var e=this.undoStack.slice(-1).pop();e&&(this.redoStack.push(JSON.stringify({connections:this.connections,items:this.items,ports:this.ports,groups:this.groups})),this.applyState(e),this.undoStack.pop(),this.isDirty=!0)},redo:function(){var e=this.redoStack.slice(-1).pop();e&&(this.undoStack.push(JSON.stringify({connections:this.connections,items:this.items,ports:this.ports,groups:this.groups})),this.applyState(e),this.redoStack.pop(),this.isDirty=!0)},commitState:function(){this.cacheState(),this.commitCachedState()},deleteSelection:function(){var e=this;if(this.hasSelection){this.commitState();var t=Object.values(this.items).filter((function(e){var t=e.isSelected,n=e.type;return t&&n!==un.Freeport})),n=t.map((function(e){var t=e.id;return t}));Object.values(this.connections).filter((function(t){var o=e.ports[t.source],i=e.ports[t.target];if(o&&i)return n.includes(o.elementId)||n.includes(i.elementId)})).forEach((function(t){var n=t.id;return e.setSelectionState({id:n,value:!0})})),Object.values(this.connections).filter((function(e){var t=e.isSelected;return t})).forEach((function(t){e.disconnect({source:t.source,target:t.target})})),t.forEach((function(t){return e.removeElement(t.id)})),Object.values(this.items).filter((function(e){var t=e.isSelected,n=e.type;return t&&n===un.Freeport})).forEach((function(t){return e.removeFreeport(t.id)}))}},setSnapBoundaries:function(e){var t=this;this.snapBoundaries=function(){if(t.connectablePortIds.length)return t.connectablePortIds.filter((function(t){return t!==e})).map((function(e){return ne.getPointBoundary(t.ports[e].position)}));var n=t.items[e];if(n&&!n.groupId){if(n.type!==un.Freeport)return Object.values(t.items).filter((function(t){return t.id!==e&&t.type!==un.Freeport})).map((function(e){return e.boundingBox}));if(n.portIds.length>1)return Object.values(t.connections).reduce((function(e,o){return n.portIds.includes(o.source)?e.concat(ne.getLinearBoundaries(t.ports[o.target].position)):n.portIds.includes(o.target)?e.concat(ne.getLinearBoundaries(t.ports[o.source].position)):e}),[])}return[]}()},setItemSize:function(e){var t=e.rect,n=e.id,o=this.items[n],i=t.width/this.zoomLevel,r=t.height/this.zoomLevel,c=o.position.x+o.width/2,a=o.position.y+o.height/2,s=c-i/2,u=a-r/2;this.items[n].position={x:s,y:u},this.items[n].width=i,this.items[n].height=r,this.setItemBoundingBox(n),this.setItemPortPositions(n),this.items[n].groupId&&this.setGroupBoundingBox(this.items[n].groupId||"")},setItemPortPositions:function(e){var t=this,n=this.items[e];if(n){var o=n.portIds.reduce((function(e,o){var i=t.ports[o];if(i){var r,c=xo.rotate(i.orientation+n.rotation);null===(r=e.get(c))||void 0===r||r.push(i)}return e}),new Map([[oe.Left,[]],[oe.Top,[]],[oe.Right,[]],[oe.Bottom,[]]])),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach((function(o,i){t.ports[o.id].position=xo.getRotatedPortPosition(o,e,n,i)}))};i(o.get(oe.Left)),i(o.get(oe.Top)),i(o.get(oe.Right)),i(o.get(oe.Bottom))}},setItemPosition:function(e){var t=this,n=e.id,o=e.position,i=this.items[n],r={x:o.x-i.position.x,y:o.y-i.position.y};this.items[n].position=o,this.setItemBoundingBox(n),i.portIds.forEach((function(e){var n=t.ports[e];t.ports[e].position={x:n.position.x+r.x,y:n.position.y+r.y}}))},dragItem:function(e,t,n){var o=Po(this.canvas,this.viewport,t,this.zoom),i=o.x,r=o.y,c=this.items[e],a=c.width,s=c.height,u=c.rotation,l=ne.getBoundingBox({x:i,y:r},u,a,s),d=ne.getSnapOffset(this.snapBoundaries,l,n||V.Outer,15);this.setSelectionPosition({id:e,position:{x:i+d.x,y:r+d.y}})},moveSelectionPosition:function(e){var t=this.selectedItemIds[0];if(t){var n=this.items[t],o={x:n.position.x+e.x,y:n.position.y+e.y};this.commitState(),this.setSelectionPosition({id:t,position:o})}},setSelectionPosition:function(e){var t=this,n=e.id,o=e.position,i=this.items[n],r={x:o.x-i.position.x,y:o.y-i.position.y},c=new Set;if(this.setSelectionState({id:n,value:!0}),i.type===un.Freeport)return this.setItemPosition({id:n,position:o});this.selectedItemIds.forEach((function(e){var n=t.items[e],o={x:n.position.x+r.x,y:n.position.y+r.y};n.groupId&&c.add(n.groupId),t.setItemPosition({id:e,position:o})})),c.forEach(this.setGroupBoundingBox)},setItemBoundingBox:function(e){if(this.items[e]){var t=this.items[e],n=t.position,o=t.rotation,i=t.width,r=t.height;this.items[e].boundingBox=ne.getBoundingBox(n,o,i,r)}},setGroupBoundingBox:function(e){var t=this;if(this.groups[e]){var n=this.groups[e].itemIds.map((function(e){return t.items[e].boundingBox}));this.groups[e].boundingBox=ne.getGroupBoundingBox(n)}},group:function(){var e=this;this.commitState();var t=Object(d["a"])(),n=Object.values(this.items).filter((function(e){var t=e.isSelected;return t})),o=n.reduce((function(e,t){return e.concat(t.portIds)}),[]),i=Object.values(this.connections).filter((function(e){return o.includes(e.source)&&o.includes(e.target)&&e.isSelected}));n.forEach((function(t){return t.groupId&&e.destroyGroup(t.groupId)})),i.forEach((function(t){return t.groupId&&e.destroyGroup(t.groupId)}));var r=[].concat(Object(z["a"])(n),Object(z["a"])(i)).reduce((function(e,t){return Math.max(t.zIndex,e)}),0);this.setZIndex(r);var c={id:t,itemIds:n.map((function(e){var t=e.id;return t})),connectionIds:i.map((function(e){var t=e.id;return t})),isSelected:!0,boundingBox:{left:0,top:0,right:0,bottom:0},position:{x:0,y:0},zIndex:r};this.groups[t]=c,c.itemIds.forEach((function(t){e.items[t].groupId=c.id})),c.connectionIds.forEach((function(t){e.connections[t].groupId=c.id})),this.setGroupBoundingBox(t)},ungroup:function(){for(var e in this.commitState(),this.groups)this.groups[e].isSelected&&this.destroyGroup(e)},deselectAll:function(){for(var e in this.clearStatelessInfo(),this.connections)this.connections[e].isSelected=!1,this.selectedConnectionIds=[];for(var t in this.items)this.items[t].isSelected=!1,this.selectedItemIds.push(t),this.selectedItemIds=[]},selectAll:function(){for(var e in this.clearStatelessInfo(),this.connections)this.connections[e].isSelected=!0,this.selectedConnectionIds.push(e);for(var t in this.items)this.items[t].isSelected=!0,this.selectedItemIds.push(t)},clearStatelessInfo:function(){this.unsetConnectionPreview(),this.connectablePortIds=[],this.selectedConnectionIds=[],this.selectedItemIds=[],this.selectedPortIndex=-1,this.cachedState=null,this.activePortId=null,this.connectionPreviewId=null},createSelection:function(e){var t=this;if(ne.isOneOrTwoDimensional(e))try{var n=Object.keys(this.items).filter((function(n){return ne.hasIntersection(e,t.items[n].boundingBox)})),o=Object.keys(this.connections).filter((function(n){var o=t.connections[n],i=t.ports[o.source],r=t.ports[o.target];return ne.isLineIntersectingRectangle(i.position,r.position,e)}));n.concat(o).forEach((function(e){t.SET_SELECTION_STATE({id:e,isSelected:!0})})),this.selectItemConnections(n)}catch(i){console.log("SELECTION ERROR: ",i,e)}},selectItemConnections:function(e){var t=this,n=e.reduce((function(e,n){return e.concat(t.items[n].portIds)}),[]);for(var o in this.connections){var i=this.connections[o];n.includes(i.source)&&n.includes(i.target)&&this.SET_SELECTION_STATE({id:o,isSelected:!0})}},setSelectionState:function(e){var t=this,n=e.id,o=e.value,i=this.items[n]||this.connections[n],r=o;if(i&&i.isSelected!==r)if(i.groupId){var c=this.groups[i.groupId],a=c.itemIds,s=c.connectionIds;a.concat(s).forEach((function(e){t.SET_SELECTION_STATE({id:e,isSelected:r})})),this.SET_SELECTION_STATE({id:i.groupId,isSelected:r})}else this.SET_SELECTION_STATE({id:n,isSelected:r})},deselectItem:function(e){this.setSelectionState({id:e,value:!0})},selectItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t||this.deselectAll(),this.setSelectionState({id:e,value:!0})},setConnectionPreview:function(e){if(this.activePortId&&e){var t=this.activePortId,n=e;this.ports[this.activePortId].type===nn.Input&&(t=e,n=this.activePortId);var o=Object(d["a"])();this.unsetConnectionPreview(),this.connect({source:t,target:n,id:o}),this.connectionPreviewId=o}},unsetConnectionPreview:function(){this.connectionPreviewId&&this.disconnect(this.connections[this.connectionPreviewId]),this.connectionPreviewId=null},commitPreviewedConnection:function(){if(this.connectionPreviewId){var e=this.connections[this.connectionPreviewId],t=e.source,n=e.target;this.disconnect({source:t,target:n}),this.commitState(),this.connect({source:t,target:n}),this.connectionPreviewId=null}},cycleConnectionPreviews:function(e){var t;e&&e!==this.activePortId&&this.setActivePortId(e);var n=this.selectedPortIndex+1;n<=0&&(n=0),n>=this.connectablePortIds.length&&(n=-1);var o=this.connectablePortIds[n];!o||null!==(t=this.ports[e])&&void 0!==t&&t.connectedPortIds.includes(o)?(0===this.connectablePortIds.length&&window.api.beep(),this.unsetConnectionPreview()):this.setConnectionPreview(o),this.selectedPortIndex=n},setActivePortId:function(e){this.activePortId!==e&&(e?this.setConnectablePortIds({portId:e}):this.connectablePortIds=[],this.activePortId=e,this.selectedPortIndex=-1)},rotate:function(e){var t=this;this.commitState();var n=Object.values(this.items).filter((function(e){var t=e.isSelected;return t})),o=n.map((function(e){var t=e.boundingBox;return t})),i=ne.getGroupBoundingBox(o),r=new Set;n.forEach((function(n){var o=xo.rotate(n.rotation+e);n.groupId&&r.add(n.groupId),t.items[n.id].rotation=o,t.items[n.id].portIds.forEach((function(e){t.ports[e].rotation=o})),t.setItemPosition({id:n.id,position:xo.getGroupedItemRotatedPosition(i,n,e)}),t.setItemPortPositions(n.id)})),r.forEach((function(e){t.setGroupBoundingBox(e)}))},setPortValue:function(e){var t=e.id,n=e.value;this.simulation.setPortValue(t,n)},removeFreeport:function(e){var t=this.items[e],n="",o="";Object.values(this.connections).forEach((function(e){e.target===t.portIds[0]&&(n=e.source),e.source===t.portIds[1]&&(o=e.target)})),n&&this.disconnect({source:n,target:t.portIds[0]}),o&&this.disconnect({source:t.portIds[1],target:o}),n&&o&&this.connect({source:n,target:o}),this.removeElement(e)},createFreeport:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.items[e.itemId]||(e.sourceId&&e.targetId&&this.commitState(),this.deselectAll(),this.addFreeportItem(e),this.setItemBoundingBox(e.itemId),this.activeFreeportId=e.itemId,e.sourceId&&e.targetId&&this.simulation.removeConnection(e.sourceId,e.targetId),e.sourceId&&this.connect({source:e.sourceId,target:e.inputPortId,connectionChainId:e.connectionChainId},t),e.targetId&&this.connect({source:e.outputPortId,target:e.targetId,connectionChainId:e.connectionChainId},t),e.sourceId&&e.targetId&&(this.deselectAll(),this.setSelectionState({id:e.itemId,value:!0}),this.incrementZIndex(1)))},connectFreeport:function(e){var t=this,n=e.sourceId,o=e.targetId,i=e.portId,r=this.ports[i],c=Object.values(this.ports).find((function(e){return e.id!==i&&t.connectablePortIds.includes(e.id)&&ne.isInNeighborhood(e.position,r.position,10)}));c?n?(this.disconnect({source:n,target:i}),this.connect({source:n,target:c.id})):o&&(this.disconnect({source:i,target:o}),this.connect({source:c.id,target:o})):this.disconnect({source:n||i,target:o||i});var a=Object.values(this.items).find((function(e){var t=e.portIds;return t.includes(i)}));a&&this.removeElement(a.id),this.clearStatelessInfo()},setConnectablePortIds:function(e){var t=e.portId,n=e.isDragging,o=this.ports[t];if(!o.isFreeport){var i=Object.values(this.connections).reduce((function(e,t){return e.concat([t.source,t.target])}),[]);n&&i.splice(-2);var r=o.type===nn.Output?function(e){return e.type===nn.Input&&!e.isFreeport&&!i.includes(e.id)&&e.elementId!==o.elementId}:function(e){return e.type===nn.Output&&!e.isFreeport&&!i.includes(o.id)&&e.elementId!==o.elementId};this.connectablePortIds=Object.values(this.ports).filter(r).map((function(e){var t=e.id;return t}))}},stop:function(){this.simulation.pause()},start:function(){this.isDebugging||this.simulation.unpause()},reset:function(){var e=this;this.buildCircuit(),this.simulation.isPaused=this.isDebugging,this.oscillogram={},this.simulation.oscillogram={},Object.values(this.items).forEach((function(t){t.portIds.forEach((function(n){var o,i;(e.ports[n].value=Xn.UNKNOWN,null!==(o=t.properties)&&void 0!==o&&o.startValue&&e.ports[n].type===nn.Output)&&e.setPortValue({id:n,value:null===(i=t.properties)||void 0===i?void 0:i.startValue.value})}))})),this.simulation.unpause()},toggleDebugger:function(){this.isDebugging?this.simulation.stopDebugging():this.simulation.startDebugging(),this.isDebugging=!this.isDebugging},stepThroughCircuit:function(){this.simulation.advance(),this.isCircuitEvaluated=!this.simulation.canContinue},toggleOscilloscope:function(){this.isOscilloscopeOpen?this.closeOscilloscope():this.openOscilloscope()},openOscilloscope:function(){var e=this;Object.values(this.ports).forEach((function(t){t.isMonitored&&e.simulation.monitorPort(t.id,t.value,t.hue)})),this.isOscilloscopeOpen=!0},closeOscilloscope:function(e){this.isOscilloscopeOpen&&(Object.keys(this.ports).forEach(this.simulation.unmonitorPort),this.simulation.oscillator.clear(),this.isOscilloscopeOpen=!1,e&&(this.oscilloscopeHeight=e))},clearOscilloscope:function(){this.simulation.oscillator.clear()},togglePortMonitoring:function(e){this.ports[e].isMonitored?this.unmonitorPort(e):this.monitorPort(e)},monitorPort:function(e){var t=this.ports[e];t.hue=t.hue||~~(360*Math.random()),t.isMonitored=!0,this.simulation.monitorPort(e,t.value,t.hue),this.isOscilloscopeOpen=!0},unmonitorPort:function(e){var t=this.ports[e];t.isMonitored=!1,this.simulation.unmonitorPort(e),this.isOscilloscopeOpen=Object.keys(this.oscillogram).length>0},setInputCount:function(e){var t=this,n=e.id,o=e.count,i=this.items[n],r=i.properties.inputCount.value;if(r>o)this.items[n].portIds.filter((function(e){return t.ports[e].type===nn.Input})).slice(o).forEach((function(e){return t.removePort(e)}));else for(var c=r;c<o;c++){var a=Object(d["a"])();this.addPort(n,{id:a,name:"",connectedPortIds:[],type:nn.Input,elementId:n,virtualElementId:n,orientation:oe.Left,isFreeport:!1,isMonitored:!1,hue:0,position:{x:0,y:0},rotation:0,value:0})}},setProperties:function(e){var t=e.id,n=e.properties,o=this.items[t];for(var i in n){var r=n[i];if(o.properties[i].value!==r.value){switch(i){case"inputCount":this.setInputCount({id:t,count:r.value});break}this.items[t].properties[i].value=r.value}}},setPortValues:function(e){for(var t in e)this.ports[t]&&(this.ports[t].value=e[t])},cacheState:function(){this.cachedState=JSON.stringify({connections:this.connections,items:this.items,ports:this.ports,groups:this.groups})},commitCachedState:function(){this.cachedState&&(this.undoStack.push(this.cachedState.toString()),this.cachedState=null,this.redoStack=[],this.isDirty=!0)},applyState:function(e){var t=this,n=JSON.parse(e),o=n.items,i=n.connections,r=n.ports,c=n.groups;function a(e,t){var n=Object.keys(e),o=Object.keys(t);return n.filter((function(e){return!o.includes(e)}))}var s=a(this.items,o),u=a(this.connections,i),l=a(o,this.items),d=a(i,this.connections);u.forEach((function(e){return t.disconnect(t.connections[e])})),s.forEach((function(e){return t.removeElement(e)})),this.ports=r,this.items=o,this.groups=c,l.forEach((function(e){t.addItem({item:o[e],ports:r})})),d.forEach((function(e){return t.connect(i[e])})),this.simulation.step()},addPort:function(e,t){var n=this,o=Object.values(this.simulation.nodes).find((function(t){var o=t.name;return n.items[e].portIds.includes(o)}));this.ports[t.id]=t,this.items[e].portIds.push(t.id),o?this.simulation.addPort(t.id,o):this.simulation.addNode(this.items[e],this.ports)},removePort:function(e){var t=this;Object.values(this.connections).filter((function(t){var n=t.source,o=t.target;return n===e||o===e})).forEach((function(e){var n=Io(Object.values(t.connections),t.ports,e.connectionChainId),o=n.connectionIds,i=n.freeportIds;o.forEach((function(e){var n=t.connections[e],o=n.source,i=n.target;t.simulation.removeConnection(o,i),delete t.connections[e]})),i.forEach((function(e){t.items[e].portIds.forEach((function(e){delete t.ports[e],t.simulation.removePort(e)})),delete t.items[e]}))}));var n=this.ports[e];if(n){var o=this.items[n.elementId];if(!o)return;var i=o.portIds.findIndex((function(t){return t===e}));-1!==i&&this.items[o.id].portIds.splice(i,1),delete this.ports[e],this.simulation.removePort(e)}},addItem:function(e){var t,n=this,o=e.item,i=e.ports,r=(null===(t=o.integratedCircuit)||void 0===t?void 0:t.ports)||i;o.portIds.forEach((function(e){var t=r[e];t&&(n.ports[t.id]=t,t.isMonitored&&n.monitorPort(t.id))}));var c="".concat(o.type,"_").concat(o.subtype);this.taxonomyCounts[c]||(this.taxonomyCounts[c]=0),o.name=Do(o,++this.taxonomyCounts[c]),this.items[o.id]=o,this.items[o.id].zIndex=++this.zIndex,this.simulation.addNode(o,this.ports),this.resetItemValue(o)},insertItemAtPosition:function(e){var t=e.item,n=e.ports,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o||(o=ne.getBoundingBoxMidpoint(this.viewport));var i=Po(this.canvas,this.viewport,o,this.zoomLevel);i.x-=t.width/2,i.y-=t.height/2,t.position=i,this.commitState(),this.addItem({item:t,ports:n.reduce((function(e,t){return Object($n["a"])(Object($n["a"])({},e),{},Object(Un["a"])({},t.id,t))}),{})}),this.setItemBoundingBox(t.id),this.setItemPortPositions(t.id),this.setSelectionState({id:t.id,value:!0})},resetItemValue:function(e){var t,n=this,o=null===(t=e.properties)||void 0===t?void 0:t.startValue;if(o){var i=o.value;e.portIds.forEach((function(e){return n.setPortValue({id:e,value:i})}))}},removeElement:function(e){var t=this,n=this.items[e];this.simulation.removeNode(n),n.portIds.forEach((function(e){return t.removePort(e)})),delete this.items[e]},SET_SELECTION_STATE:function(e){var t=this,n=e.id,o=e.isSelected,i=function(e,n){var i=t[n].findIndex((function(t){return t===e}));o&&-1===i&&t[n].push(e),o||-1===i||t[n].splice(i,1)};if(this.items[n])this.items[n].isSelected=o,i(n,"selectedItemIds");else if(this.connections[n]){var r=this.connections[n].connectionChainId,c=Io(Object.values(this.connections),this.ports,r),a=c.connectionIds,s=c.freeportIds;a.forEach((function(e){t.connections[e].isSelected=o,i(e,"selectedConnectionIds")})),s.forEach((function(e){t.items[e].isSelected=o,i(e,"selectedItemIds")}))}},sendBackward:function(){this.commitState(),this.incrementZIndex(-1)},bringForward:function(){this.commitState(),this.incrementZIndex(1)},sendToBack:function(){this.commitState(),this.setZIndex(1)},bringToFront:function(){this.commitState(),this.setZIndex(this.zIndex)},incrementZIndex:function(e){var t=Object.values(this.items),n=Object.values(this.connections),o=t.concat(n).sort(wo),i=o.filter((function(e){var t=e.isSelected;return t})).map((function(e){var t=e.id;return t}));e>0&&i.reverse();var r=[];i.forEach((function(t){var n,i=o.findIndex((function(e){return e.id===t})),c=i+e;if(c<0||c>=o.length)r.push(o[i].id);else if(!r.includes(null===(n=o[c])||void 0===n?void 0:n.id)){var a=o[i];o.splice(i,1),o.splice(c,0,a)}})),o.forEach((function(e,t){e.zIndex=t+1})),this.zIndex=Object.keys(o).length},setZIndex:function(e){for(var t=Object.values(this.items),n=Object.values(this.connections),o=t.concat(n).sort(wo),i=o.filter((function(e){var t=e.isSelected;return t})),r=0;r<o.length;r++)o[r].isSelected&&(o.splice(r,1),r--);o.splice.apply(o,[e-1,0].concat(Object(z["a"])(i))),o.forEach((function(e,t){e.zIndex=t+1})),this.zIndex=Object.keys(o).length},connect:function(e){var t=e.source,n=e.target,o=e.connectionChainId,i=e.id,r=void 0===i?Object(d["a"])():i,c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&n&&(this.connections[r]={id:r,source:t,target:n,connectionChainId:o||r,groupId:null,zIndex:++this.zIndex,isSelected:!1},this.ports[t].connectedPortIds.push(n),this.ports[n].connectedPortIds.push(t),c&&this.simulation.addConnection(t,n))},disconnect:function(e){var t=e.source,n=e.target,o=Object.values(this.connections).find((function(e){return e.source===t&&e.target===n}));if(o){this.simulation.removeConnection(t,n);var i=this.ports[t].connectedPortIds.findIndex((function(e){return e===n})),r=this.ports[n].connectedPortIds.findIndex((function(e){return e===t}));this.ports[t].connectedPortIds.splice(i,1),this.ports[n].connectedPortIds.splice(r,1),delete this.connections[o.id]}},destroyGroup:function(e){var t=this,n=this.groups[e];n.itemIds.forEach((function(e){t.items[e].groupId=null,t.selectedItemIds.push(e)})),n.connectionIds.forEach((function(e){t.connections[e].groupId=null,t.selectedConnectionIds.push(e)})),delete this.groups[e]},addFreeportItem:function(e){var t=e.itemId,n=e.inputPortId,o=e.outputPortId,i=e.value,r=void 0===i?0:i,c=[];n&&(this.ports[n]=No(t,n,oe.Left,nn.Input,n),this.ports[n].value=r,c.push(this.ports[n])),o&&(this.ports[o]=No(t,o,oe.Right,nn.Output,o),this.ports[o].value=r,c.push(this.ports[o])),this.items[t]=Co(t,un.Freeport,ln.None,1,1,c),this.items[t].zIndex=this.zIndex++,this.simulation.addNode(this.items[t],this.ports,!0)},print:function(){this.isPrinting=!0},createImage:function(){this.isCreatingImage=!0},cut:function(){this.copy(),this.deleteSelection()},copy:function(){var e=this;if(this.hasSelection){var t={},n={};this.selectedItemIds.forEach((function(o){t[o]=e.items[o],t[o].portIds.forEach((function(t){n[t]=e.ports[t]}))}));var o=Object.values(this.connections).reduce((function(e,t){return n[t.source]&&n[t.target]&&(e[t.id]=t),e}),{}),i=Object.values(this.groups).filter((function(e){var t=e.isSelected;return t})).reduce((function(e,t){return Object($n["a"])(Object($n["a"])({},e),{},Object(Un["a"])({},t.id,t))}),{});window.api.copy(JSON.stringify({items:t,ports:n,connections:o,groups:i,pasteCount:1}))}},paste:function(){var e=this;try{var t=window.api.paste(),n=JSON.parse(t),o=Eo.mapStandardCircuitIds(n);this.commitState(),this.deselectAll(),Object.keys(o.ports).forEach((function(e){o.ports[e].value=0})),Object.values(o.items).forEach((function(t){t.position.x+=20*n.pasteCount,t.position.y+=20*n.pasteCount,t.isSelected=!1,e.addItem({item:t,ports:o.ports}),e.setSelectionState({id:t.id,value:!0})})),Object.values(o.connections).forEach((function(t){return e.connect(t)})),Object.values(o.groups).forEach((function(t){e.groups[t.id]=t,e.setGroupBoundingBox(t.id),e.setSelectionState({id:t.id,value:!0})}));var i=JSON.stringify(Object($n["a"])(Object($n["a"])({},JSON.parse(t)),{},{pasteCount:n.pasteCount+1}));window.api.copy(i)}catch(r){console.log("ERROR: ",r)}},toggleToolbox:function(){this.isToolboxOpen=!this.isToolboxOpen}}})},To=n("e58a");n("1276");function Fo(e){var t;return(null===(t=e.split("\\").pop())||void 0===t?void 0:t.split("/").pop())||""}var Ro=Object(o["b"])({id:"root",state:function(){return{documents:{},clipboard:null,activeDocumentId:null,canExit:!1,isFullscreen:!1}},getters:{hasOpenDocuments:function(e){return Object.keys(e.documents).length>0},activeDocument:function(e){return e.activeDocumentId?e.documents[e.activeDocumentId]:null}},actions:{openIntegratedCircuit:function(e){e.integratedCircuit&&this.openDocument("",e.integratedCircuit.serializedState,e.id,e.name)},saveImage:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var o,i,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.activeDocument){n.next=2;break}return n.abrupt("return");case 2:if(n.prev=2,o=t.activeDocument.displayName.replace(/\.[^/.]+$/,""),i="".concat(o,".png"),r=window.api.showSaveFileDialog([{name:"PNG Image",extensions:[".png"]}],i),r){n.next=8;break}return n.abrupt("return");case 8:return n.next=10,To["a"].writeBlob(r,e);case 10:n.next=15;break;case 12:n.prev=12,n.t0=n["catch"](2),window.api.showMessageBox({message:"An error occurred while trying to save the image.",title:"Error",type:"error"});case 15:case"end":return n.stop()}}),n,null,[[2,12]])})))()},newDocument:function(){console.log("will create new doc")},closeAll:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.activeDocumentId){t.next=9;break}return t.next=3,e.closeDocument(e.activeDocumentId);case 3:return n=t.sent,t.next=6,new Promise((function(e){return setTimeout(e)}));case 6:if(!n){t.next=8;break}return t.abrupt("return",e.closeAll());case 8:return t.abrupt("return",!1);case 9:return t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t)})))()},printActiveDocument:function(){this.activeDocument&&(this.activeDocument.store().isPrinting=!0)},closeDocument:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var o,i,r,c,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=t.documents[e],i=o.store(),r=!0,t.activateDocument(e),!i.isDirty){n.next=12;break}if(c=window.api.showMessageBox({message:"Save changes to ".concat(o.fileName,"?"),title:"Confirm",buttons:["Yes","No","Cancel"]}),0!==c){n.next=10;break}return n.next=9,t.saveActiveDocument();case 9:r=n.sent;case 10:if(2!==c){n.next=12;break}return n.abrupt("return",!1);case 12:return delete t.documents[e],t.activeDocumentId=null,a=Object.keys(t.documents).pop(),a&&t.activateDocument(a),n.abrupt("return",r);case 17:case"end":return n.stop()}}),n)})))()},saveActiveDocument:function(){var e=arguments,t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var o,i,r,c,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=e.length>0&&void 0!==e[0]&&e[0],n.prev=1,t.activeDocument){n.next=4;break}return n.abrupt("return",!0);case 4:if(t.activeDocument.filePath&&!o){n.next=10;break}if(i=t.activeDocument.fileName||"".concat(t.activeDocument.fileName,".alfx"),r=window.api.showSaveFileDialog([{name:"Aristotle Logic Circuit (*.alfx)",extensions:["alfx"]}],i),r){n.next=9;break}return n.abrupt("return",!0);case 9:r&&(c=Fo(r),t.activeDocument.filePath=r,t.activeDocument.fileName=c,t.activeDocument.displayName=c);case 10:return a=t.activeDocument.store(),To["a"].save(t.activeDocument.filePath,{items:a.items,connections:a.connections,groups:a.groups,ports:a.ports}),a.isDirty=!1,n.abrupt("return",!0);case 16:return n.prev=16,n.t0=n["catch"](1),window.api.showMessageBox({message:"An error occurred while trying to save the file.",title:"Error",type:"error"}),n.abrupt("return",!1);case 20:case"end":return n.stop()}}),n,null,[[1,16]])})))()},selectDocument:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=window.api.showOpenFileDialog([{name:"Aristotle Logic Circuit (*.alfx)",extensions:["alfx"]}]),o=0;case 2:if(!(o<n.length)){t.next=8;break}return t.next=5,e.openDocumentFromPath(n[o]);case 5:o++,t.next=2;break;case 8:case"end":return t.stop()}}),t)})))()},openDocumentFromPath:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,To["a"].open(e);case 3:o=n.sent,o&&t.openDocument(e,o,Object(d["a"])()),n.next=11;break;case 7:n.prev=7,n.t0=n["catch"](0),console.log("ERR",n.t0),window.api.showMessageBox({message:"Could not open ".concat(e,". The file is not a valid Aristotle circuit."),title:"Error",type:"error"});case 11:case"end":return n.stop()}}),n,null,[[0,7]])})))()},openDocument:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(this.documents[n])return this.activateDocument(n);var i=Vo(n),r=i(),c=Fo(e);r.loadDocument(t),this.documents[n]={fileName:c,filePath:e,displayName:o||c,store:i},this.activateDocument(n)},switchDocument:function(e){var t=this,n=Object.keys(this.documents),o=n.findIndex((function(e){return t.activeDocumentId===e})),i=o+e;0!==n.length&&(-1===o||i>=n.length?i=0:i<0&&(i=n.length-1),this.activateDocument(n[i]))},pauseActivity:function(){var e;null===(e=this.activeDocument)||void 0===e||e.store().stop()},resumeActivity:function(){var e;null===(e=this.activeDocument)||void 0===e||e.store().start()},activateDocument:function(e){this.pauseActivity(),this.activeDocumentId=e,this.resumeActivity()},openTestDocuments:function(){this.openDocument("flip-flop.alfx",JSON.stringify(An),Object(d["a"])(),"flip-flop.alfx")},navigateDocumentList:function(e){var t=this,n=Object.keys(this.documents),o=n.findIndex((function(e){return e===t.activeDocumentId})),i=o+e;i<0&&(i=n.length-1),i>=n.length&&(i=0),this.activateDocument(n[i])},toggleFullscreen:function(){this.isFullscreen=!this.isFullscreen,window.api.setFullscreen(this.isFullscreen)}}}),Lo=Object(i["defineComponent"])({name:"Document",components:{Group:Cn,Editor:jn,Connection:me,Item:fn},props:{store:{type:Function,required:!0}},setup:function(e){var t=e.store(),n=Ro(),o=Object(i["ref"])(),r=1,c={};function a(e){if(o.value){var n=Object.values(t.items).map((function(e){var t=e.boundingBox;return t})),i=ne.getGroupBoundingBox(n),r=o.value.$el.querySelector(".editor__grid");e(r,i)}}function u(){return l.apply(this,arguments)}function l(){return l=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(n,o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ln.printImage(t.zoom,n,o);case 2:t.isPrinting=!1;case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function d(){return p.apply(this,arguments)}function p(){return p=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(o,i){var r,c,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=Ln.createPrintArea(1/t.zoom,o,i,20,""),c=r.printArea,e.next=3,Ln.createImage(c,"toBlob");case 3:return a=e.sent,e.next=6,n.saveImage(a);case 6:t.isCreatingImage=!1;case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function f(e){return function(n){n.target instanceof HTMLInputElement||(t[e](),n.preventDefault())}}function m(e){if(!(e.target instanceof HTMLInputElement))switch(e.key){case"Escape":return t.deselectAll();case"a":return e.ctrlKey&&t.selectAll();default:return v(e)}}function h(e){c[e.key]=!1,r=1}function b(t){console.log("contextmenu"),window.api.showContextMenu(Bn(e.store)),t.preventDefault(),t.stopPropagation()}function v(e){var n=function(){switch(e.key){case"ArrowLeft":return{x:-1,y:0};case"ArrowUp":return{x:0,y:-1};case"ArrowRight":return{x:1,y:0};case"ArrowDown":return{x:0,y:1}}}();if(n){var o=Math.min(r,10);t.moveSelectionPosition({x:n.x*o,y:n.y*o}),r*=1.05}}function g(){c={}}return Object(i["watchEffect"])((function(){t.isPrinting&&u(),t.isCreatingImage&&d()})),Object(i["onMounted"])((function(){document.addEventListener("keydown",m),document.addEventListener("keyup",h),document.addEventListener("cut",f("cut")),document.addEventListener("copy",f("copy")),document.addEventListener("paste",f("paste")),window.addEventListener("blur",g)})),Object(i["onBeforeUnmount"])((function(){document.removeEventListener("keydown",m),document.removeEventListener("keyup",h),document.addEventListener("cut",f("cut")),document.addEventListener("copy",f("copy")),document.addEventListener("paste",f("paste")),window.removeEventListener("blur",g)})),{store:t,editor:o,storeDefinition:e.store,onKeyDown:m,onKeyUp:h,onContextMenu:b,clearKeys:g,gridSize:20}}});const Ao=O()(Lo,[["render",u]]);var Uo=Ao,$o={class:"toolbar"},qo={class:"toolbar__fixed"},Go={class:"toolbar__left"},Wo={class:"toolbar__right"};function Ko(e,t,n,o,r,c){var a=Object(i["resolveComponent"])("toolbar-button"),s=Object(i["resolveComponent"])("toolbar-separator"),u=Object(i["resolveComponent"])("scroll-fade");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",$o,[Object(i["createElementVNode"])("div",qo,[Object(i["createVNode"])(a,{icon:e.faScrewdriverWrench,text:"Toolbox","is-toolbox":"",onClick:e.store.toggleToolbox,active:e.store.isToolboxOpen},null,8,["icon","onClick","active"]),Object(i["createVNode"])(s)]),Object(i["createVNode"])(u,{class:"toolbar__scrollable"},{default:Object(i["withCtx"])((function(){return[Object(i["createElementVNode"])("div",Go,[Object(i["createVNode"])(a,{icon:e.faFolderOpen,text:"Open"},null,8,["icon"]),Object(i["createVNode"])(a,{icon:e.faFile,text:"New"},null,8,["icon"]),Object(i["createVNode"])(a,{icon:e.faSave,text:"Save"},null,8,["icon"]),Object(i["createVNode"])(s),Object(i["createVNode"])(a,{onClick:e.store.undo,disabled:!e.store.canUndo,icon:e.faReply,text:"Undo"},null,8,["onClick","disabled","icon"]),Object(i["createVNode"])(a,{onClick:e.store.redo,disabled:!e.store.canRedo,icon:e.faShare,text:"Redo"},null,8,["onClick","disabled","icon"]),Object(i["createVNode"])(s),Object(i["createVNode"])(a,{onClick:t[0]||(t[0]=function(t){return e.store.rotate(1)}),disabled:!e.store.hasSelectedItems,icon:e.faRotateForward,text:"Rotate"},null,8,["disabled","icon"]),Object(i["createVNode"])(s),Object(i["createVNode"])(a,{onClick:e.store.group,disabled:!e.store.canGroup,icon:e.faObjectGroup,text:"Group"},null,8,["onClick","disabled","icon"]),Object(i["createVNode"])(a,{onClick:e.store.ungroup,disabled:!e.store.canUngroup,icon:e.faObjectUngroup,text:"Ungroup"},null,8,["onClick","disabled","icon"]),Object(i["createVNode"])(s),Object(i["createVNode"])(a,{icon:e.faScissors,text:"Cut"},null,8,["icon"]),Object(i["createVNode"])(a,{icon:e.faCopy,text:"Copy"},null,8,["icon"]),Object(i["createVNode"])(a,{icon:e.faPaste,text:"Paste"},null,8,["icon"]),Object(i["createVNode"])(a,{onClick:e.store.deleteSelection,disabled:!e.store.hasSelection,icon:e.faBan,text:"Delete"},null,8,["onClick","disabled","icon"]),Object(i["createVNode"])(s),Object(i["createVNode"])(a,{onClick:e.store.saveIntegratedCircuit,icon:e.faMicrochip,text:"Build IC"},null,8,["onClick","icon"])]),Object(i["createElementVNode"])("div",Wo,[Object(i["createVNode"])(a,{icon:e.faBug,active:e.store.isDebugging,onClick:e.store.toggleDebugger,text:"Debug"},null,8,["icon","active","onClick"]),Object(i["createVNode"])(s),Object(i["createVNode"])(a,{icon:e.faArrowsRotate,onClick:e.store.reset,text:"Reset"},null,8,["icon","onClick"]),Object(i["createVNode"])(a,{icon:e.faForwardStep,disabled:!e.store.isDebugging||e.store.isCircuitEvaluated,onClick:e.store.stepThroughCircuit,text:"Next"},null,8,["icon","disabled","onClick"]),Object(i["createVNode"])(s),Object(i["createVNode"])(a,{icon:e.faWaveSquare,disabled:e.store.isDebugging,active:!e.store.isDebugging&&e.store.isOscilloscopeOpen,onClick:e.store.toggleOscilloscope,text:"Monitor"},null,8,["icon","disabled","active","onClick"])])]})),_:1})])}var Zo=n("b702"),Xo=n("c074"),Yo={class:"toolbar-button__text"};function Ho(e,t,n,o,r,c){var a=Object(i["resolveComponent"])("icon");return Object(i["openBlock"])(),Object(i["createElementBlock"])("button",{tabindex:0,class:Object(i["normalizeClass"])([{"toolbar-button--active":e.active&&!e.isToolbox,"toolbar-button--toolbox":e.active&&e.isToolbox,"toolbar-button--disabled":e.disabled},"toolbar-button"]),role:"button"},[e.icon?(Object(i["openBlock"])(),Object(i["createBlock"])(a,{key:0,icon:e.icon,class:"toolbar-button__icon"},null,8,["icon"])):(Object(i["openBlock"])(),Object(i["createBlock"])(a,{key:1,icon:e.faUser,class:"toolbar-button__icon"},null,8,["icon"])),Object(i["createElementVNode"])("div",Yo,Object(i["toDisplayString"])(e.text),1)],2)}var Jo=["viewBox"],Qo=["d"];function ei(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 ".concat(e.width," ").concat(e.height)},[Object(i["createElementVNode"])("path",{fill:"currentColor",d:e.svgPath},null,8,Qo)],8,Jo)}var ti=Object(i["defineComponent"])({name:"Icon",props:{icon:{type:Object,required:!0}},setup:function(e){var t=Object(i["computed"])((function(){return e.icon.icon[0]})),n=Object(i["computed"])((function(){return e.icon.icon[1]})),o=Object(i["computed"])((function(){return e.icon.icon[4]}));return{width:t,height:n,svgPath:o}}});n("c36a");const ni=O()(ti,[["render",ei]]);var oi=ni,ii=Object(i["defineComponent"])({name:"ToolbarButton",components:{Icon:oi},data:function(){return{faUser:Xo["q"]}},props:{active:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},isToolbox:{type:Boolean,default:!1},icon:{type:Object,default:null},text:{type:String,default:""}}});n("5ee8");const ri=O()(ii,[["render",Ho]]);var ci=ri,ai={class:"toolbar-separator"};function si(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",ai)}var ui=Object(i["defineComponent"])({name:"ToolbarSeparator"});n("ce00");const li=O()(ui,[["render",si]]);var di=li;function pi(e,t,n,o,r,c){var a=Object(i["resolveComponent"])("resizable");return Object(i["openBlock"])(),Object(i["createBlock"])(a,{ref:"scroll",class:Object(i["normalizeClass"])(["scroll-fade",{"scrollbar-fade--show-scrollbar":!e.hideScrollbar}]),style:Object(i["normalizeStyle"])("--mask-image-content: linear-gradient(to right, ".concat(e.gradientStyle,")")),onScroll:e.onChange,onResize:e.onChange},{default:Object(i["withCtx"])((function(){return[Object(i["renderSlot"])(e.$slots,"default")]})),_:3},8,["class","style","onScroll","onResize"])}var fi=Object(i["defineComponent"])({name:"none",components:{Resizable:j},props:{hideScrollbar:{type:Boolean,default:!1}},setup:function(){var e="transparent, black var(--mask-width)",t="black calc(100% - var(--mask-width)), transparent",n=Object(i["ref"])(),o=Object(i["ref"])("");function r(n){var i=n.scrollWidth,r=n.scrollLeft,c=n.clientWidth;if(i>c){var a=[];return r>0&&a.push(e),r+c<i&&a.push(t),o.value=a.join(", "),a.join(", ")}return"transparent transparent"}function c(){n.value&&(o.value=r(n.value.$el))}return{onChange:c,gradientStyle:o,scroll:n}}});n("58b4");const mi=O()(fi,[["render",pi]]);var hi=mi,bi=Object(i["defineComponent"])({name:"Toolbar",components:{ToolbarButton:ci,ToolbarSeparator:di,ScrollFade:hi},data:function(){return{faScrewdriverWrench:Xo["o"],faFolderOpen:Zo["c"],faFile:Zo["b"],faSave:Zo["g"],faScissors:Xo["n"],faCopy:Zo["a"],faPaste:Zo["f"],faObjectGroup:Zo["d"],faObjectUngroup:Zo["e"],faRotateBackward:Xo["l"],faRotateForward:Xo["m"],faReply:Xo["k"],faShare:Xo["p"],faMicrochip:Xo["h"],faBan:Xo["b"],faArrowsRotate:Xo["a"],faBug:Xo["c"],faForwardStep:Xo["g"],faWaveSquare:Xo["r"]}},props:{store:{type:Function,required:!0}},setup:function(e){var t=e.store(),n=Object(i["computed"])((function(){return t.simulation.circuit.isComplete()}));return{store:t,isComplete:n}}});n("7726");const vi=O()(bi,[["render",Ko]]);var gi=vi;function Oi(e,t,n,o,r,c){var a=Object(i["resolveComponent"])("toolbox-item"),s=Object(i["resolveComponent"])("toolbox-layout");return e.isToolboxOpen?(Object(i["openBlock"])(),Object(i["createBlock"])(s,{key:0,"is-open":e.isToolboxOpen},Object(i["createSlots"])({_:2},[Object(i["renderList"])(e.factories,(function(t,n){return{name:n,fn:Object(i["withCtx"])((function(){return[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(t,(function(t,n){return Object(i["openBlock"])(),Object(i["createBlock"])(a,{factory:t,key:n,label:n,zoom:e.zoom,onDrop:e.onDrop},null,8,["factory","label","zoom","onDrop"])})),128))]}))}}))]),1032,["is-open"])):Object(i["createCommentVNode"])("",!0)}var yi={class:"toolbox-item__parent"},ji={class:"toolbox-item__label"};function xi(e,t,n,o,r,c){var a=Object(i["resolveComponent"])("circuit-component"),s=Object(i["resolveComponent"])("resizable"),u=Object(i["resolveComponent"])("draggable");return Object(i["openBlock"])(),Object(i["createBlock"])(u,{class:"toolbox-item",tabindex:0,onDragStart:e.onDragStart,onDrag:e.onDrag,onDragEnd:e.onDragEnd,onClick:t[2]||(t[2]=function(t){return e.$emit("drop",e.factory)})},{default:Object(i["withCtx"])((function(){return[Object(i["createElementVNode"])("div",yi,[Object(i["createVNode"])(s,{class:"toolbox-item__preview",ref:"preview",onResize:t[1]||(t[1]=function(t){return e.previewRect=t})},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(s,{class:"toolbox-item__inner",ref:"selectable",style:Object(i["normalizeStyle"])({zoom:e.zoom}),onResize:t[0]||(t[0]=function(t){return e.selectableRect=t})},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(a,{type:e.item.type,subtype:e.item.subtype,ports:e.ports,properties:e.item.properties},null,8,["type","subtype","ports","properties"])]})),_:1},8,["style"])]})),_:1},512)]),Object(i["createElementVNode"])("div",ji,Object(i["toDisplayString"])(e.item.subtype),1)]})),_:1},8,["onDragStart","onDrag","onDragEnd"])}var Ii=Object(i["defineComponent"])({name:"ToolboxItem",components:{CircuitComponent:Pt,Draggable:w,Resizable:j},emits:{drop:function(e,t){return!0}},props:{factory:{type:Function,required:!0},zoom:{type:Number,default:1}},setup:function(e,t){var n=t.emit,o=Object(i["ref"])(),r=Object(i["ref"])(new DOMRect),c=Object(i["ref"])(new DOMRect),a=Object(i["ref"])(1),s=e.factory(),u=s.item,l=s.ports,d=null;function p(){var e=r.value,t=c.value,n=Math.max(e.width/t.width,e.height/t.height);a.value=Math.min(1/n,1)}function f(){var t,n=r.value;d=null===(t=o.value)||void 0===t?void 0:t.$el.cloneNode(!0),d.style.position="absolute",d.style["zoom"]="".concat(e.zoom),d.style.width="".concat(n.width,"px"),d.style.height="".concat(n.height,"px")}function m(t){var n=t.x,o=t.y;if(d){document.body.contains(d)||document.body.appendChild(d);var i=d.getBoundingClientRect(),r=i.width,c=i.height;d.style.left="".concat((n-r/2*e.zoom)/e.zoom,"px"),d.style.top="".concat((o-c/2*e.zoom)/e.zoom,"px")}}function h(t){d&&document.body.contains(d)&&(d.remove(),d=null,n("drop",e.factory,t))}return{onDragStart:f,onDrag:m,onDragEnd:h,onSizeChanged:p,item:u,ports:l,zoom:a,selectable:o,selectableRect:r,previewRect:c}}});n("cbfb");const wi=O()(Ii,[["render",xi]]);var Ci=wi,ki=["onClick"];function Si(e,t,n,o,r,c){var a=Object(i["resolveComponent"])("scroll-fade");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{ref:"toolbox",class:Object(i["normalizeClass"])(["toolbox-layout",{"toolbox-layout--open":e.isOpen}]),style:Object(i["normalizeStyle"])({height:"".concat(e.height,"px")})},[Object(i["createVNode"])(a,{class:"toolbox-layout__categories","hide-scrollbar":!0},{default:Object(i["withCtx"])((function(){return[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.categories,(function(t){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:Object(i["normalizeClass"])(["toolbox-layout__badge",{"toolbox-layout__badge--active":t===e.selected}]),key:t,onClick:function(n){return e.select(t)}},Object(i["toDisplayString"])(t),11,ki)})),128))]})),_:1}),Object(i["createVNode"])(a,{class:"toolbox-layout__items"},{default:Object(i["withCtx"])((function(){return[e.selected?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:e.selected,class:"toolbox-layout__fade-in"},[Object(i["renderSlot"])(e.$slots,e.selected)])):Object(i["createCommentVNode"])("",!0)]})),_:3})],6)}var Bi=Object(i["defineComponent"])({name:"Toolbox",components:{ScrollFade:hi},props:{isOpen:{type:Boolean,default:!1}},setup:function(e,t){var n=t.slots,o=Object(i["ref"])(null),r=Object(i["ref"])(null),c=Object(i["computed"])((function(){return Object.keys(n)})),a=Object(i["computed"])((function(){var t;return e.isOpen?null===(t=r.value)||void 0===t?void 0:t.scrollHeight:0}));function s(e){o.value=e}return s(c.value[0]),{categories:c,selected:o,select:s,height:a,toolbox:r}}});n("7a6f");const Ei=O()(Bi,[["render",Si]]);var Pi,Ni,Di,_i=Ei,Mi=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=Object(d["a"])(),r=[No(i,Object(d["a"])(),oe.Right,nn.Output,"Output Port")],c=Co(i,un.InputNode,e,t,n,r);return c.properties=Object($n["a"])(Object($n["a"])({},o),{},{startValue:{label:"Start value",value:-1,type:"number",options:{True:1,"Hi-Z":0,False:-1}}}),{item:c,ports:r}},zi=Mi,Vi=function(){return zi(ln.Clock,60,60,{interval:{label:"Interval",value:1e3,type:"number",min:100}})},Ti=Vi;function Fi(){var e=Object(d["a"])(),t=[No(e,Object(d["a"])(),oe.Left,nn.Input,"Input Port")],n=Co(e,un.OutputNode,ln.Lightbulb,40,40,t);return{item:n,ports:t}}function Ri(e,t,n){var o=Object(d["a"])(),i=[No(o,Object(d["a"])(),0,1,"Input Port 1"),No(o,Object(d["a"])(),0,1,"Input Port 2"),No(o,Object(d["a"])(),2,0,"Output Port")],r=Co(o,un.LogicGate,e,t,n,i);return r.properties={inputCount:{label:"Input count",value:2,type:"number",min:2},showInOscilloscope:{label:"Show in oscilloscope",value:!1,type:"boolean"}},{item:r,ports:i}}var Li=(Di={},Object(Un["a"])(Di,un.InputNode,(Pi={},Object(Un["a"])(Pi,ln.Switch,zi.bind(void 0,ln.Switch,60,60)),Object(Un["a"])(Pi,ln.Clock,Ti),Pi)),Object(Un["a"])(Di,un.OutputNode,Object(Un["a"])({},ln.Lightbulb,Fi)),Object(Un["a"])(Di,un.LogicGate,(Ni={},Object(Un["a"])(Ni,ln.And,Ri.bind(void 0,ln.And,140,50)),Object(Un["a"])(Ni,ln.Nand,Ri.bind(void 0,ln.Nand,140,50)),Object(Un["a"])(Ni,ln.Xnor,Ri.bind(void 0,ln.Xnor,140,50)),Object(Un["a"])(Ni,ln.Nor,Ri.bind(void 0,ln.Nor,140,50)),Object(Un["a"])(Ni,ln.Or,Ri.bind(void 0,ln.Or,140,50)),Ni)),Di),Ai=Object(i["defineComponent"])({name:"Toolbox",components:{ScrollFade:hi,ToolboxItem:Ci,ToolboxLayout:_i},props:{store:{type:Function,required:!0}},setup:function(e){var t=e.store(),n=Object(i["computed"])((function(){return t.zoom})),o=Object(i["computed"])((function(){return t.isToolboxOpen}));function r(e,n){t.insertItemAtPosition(e(),n)}return{factories:Li,zoom:n,isToolboxOpen:o,onDrop:r}}});const Ui=O()(Ai,[["render",Oi]]);var $i=Ui,qi={class:"tab-item__label"};function Gi(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{class:Object(i["normalizeClass"])([{"tab-item--active":e.active,"tab-item--dirty":e.dirty},"tab-item"]),onMousedown:t[1]||(t[1]=function(t){return e.$emit("activate")}),onTouchstart:t[2]||(t[2]=function(t){return e.$emit("activate")})},[Object(i["createElementVNode"])("div",qi,Object(i["toDisplayString"])(e.label)+Object(i["toDisplayString"])(e.dirty?"*":""),1),Object(i["createElementVNode"])("div",{class:"tab-item__close",onClick:t[0]||(t[0]=Object(i["withModifiers"])((function(t){return e.$emit("close")}),["stop"]))}," âœ– ")],34)}var Wi=Object(i["defineComponent"])({name:"TabItem",props:{active:{type:Boolean,default:!1},label:{type:String,required:!0},dirty:{type:Boolean,default:!1}}});n("c31e");const Ki=O()(Wi,[["render",Gi]]);var Zi=Ki,Xi={class:"tab-host"},Yi={class:"tab-host__list"};function Hi(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Xi,[Object(i["createElementVNode"])("div",Yi,[Object(i["renderSlot"])(e.$slots,"tabs")]),Object(i["renderSlot"])(e.$slots,"default")])}var Ji=Object(i["defineComponent"])({name:"TabHost"});n("823c");const Qi=O()(Ji,[["render",Hi]]);var er=Qi,tr={key:0};function nr(e,t,n,o,r,c){var a=Object(i["resolveComponent"])("oscilloscope-title-bar"),s=Object(i["resolveComponent"])("oscilloscope-timeline"),u=Object(i["resolveComponent"])("oscilloscope-viewer");return e.isOscilloscopeOpen?(Object(i["openBlock"])(),Object(i["createBlock"])(u,{key:0,modelValue:e.oscilloscopeHeight,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.oscilloscopeHeight=t}),"collapse-height":40,onCollapse:e.closeOscilloscope},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(a,{clearable:e.hasWaves,onClear:e.clearOscilloscope},null,8,["clearable","onClear"]),e.hasWaves?(Object(i["openBlock"])(),Object(i["createBlock"])(s,{key:1,oscillogram:e.oscillogram},null,8,["oscillogram"])):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",tr," no waves to observe "))]})),_:1},8,["modelValue","onCollapse"])):Object(i["createCommentVNode"])("",!0)}var or={class:"oscilloscope-timeline"},ir={class:"oscilloscope-timeline__list",ref:"list"},rr=["width","viewBox"],cr=["points","stroke"];function ar(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",or,[Object(i["createElementVNode"])("div",ir,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.oscillogram,(function(e,t){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:t,style:Object(i["normalizeStyle"])({color:"hsla(".concat(e.hue,", var(--lightness), var(--saturation), 0.8)")}),class:"oscilloscope-timeline__label"},Object(i["toDisplayString"])(t),5)})),128))],512),Object(i["createElementVNode"])("div",{class:"oscilloscope-timeline__display",ref:"timeline",onWheel:t[0]||(t[0]=function(){return e.onWheel&&e.onWheel.apply(e,arguments)})},[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(e.oscillogram,(function(t,n){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{style:Object(i["normalizeStyle"])({width:"".concat(e.totalWidth,"px")}),key:n,class:"oscilloscope-timeline__item"},[Object(i["createElementVNode"])("div",{style:Object(i["normalizeStyle"])({width:"".concat(t.width,"px")}),class:"oscilloscope-timeline__svg"},[(Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",{width:t.width,viewBox:"0 0 ".concat(t.width," 1"),preserveAspectRatio:"none"},[Object(i["createElementVNode"])("polyline",{points:t.points,stroke:"hsla(".concat(t.hue,", var(--lightness), var(--saturation), 0.8)"),"stroke-width":"2",fill:"none","vector-effect":"non-scaling-stroke"},null,8,cr)],8,rr))],4)],4)})),128))],544)])}var sr=Object(i["defineComponent"])({name:"OscilloscopeTimeline",props:{oscillogram:{type:Object,required:!0}},computed:{totalWidth:function(){return Object.values(this.oscillogram).reduce((function(e,t){var n=t.width;return Math.max(n,e)}),0)}},mounted:function(){var e=this.$refs.timeline,t=this.$refs.list;this.scrollToNextInterval(),t.addEventListener("scroll",this.onTimelineScroll),e.addEventListener("scroll",this.onTimelineScroll)},beforeUnmount:function(){var e=this.$refs.timeline,t=this.$refs.list;t.removeEventListener("scroll",this.onTimelineScroll),e.removeEventListener("scroll",this.onTimelineScroll)},methods:{onWheel:function(e){var t=this.$refs.timeline;t.scrollTop+=e.deltaY/10,e.preventDefault()},scrollToNextInterval:function(){var e=this.$refs.timeline;e.scrollLeft=e.scrollWidth},onTimelineScroll:function(){var e=this.$refs.list,t=this.$refs.timeline;t&&(e.scrollTop=t.scrollTop)}},watch:{oscillogram:{handler:function(){this.scrollToNextInterval()},deep:!0}}});n("fa3a");const ur=O()(sr,[["render",ar]]);var lr=ur,dr={class:"oscilloscope-title-bar"},pr=Object(i["createElementVNode"])("div",{class:"oscilloscope-title-bar__title"},"Oscilloscope",-1),fr={class:"oscilloscope-title-bar__actions"},mr=["disabled"];function hr(e,t,n,o,r,c){var a=Object(i["resolveComponent"])("icon");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",dr,[pr,Object(i["createElementVNode"])("div",fr,[Object(i["createElementVNode"])("button",{class:"oscilloscope-title-bar__button",title:"Clear oscilloscope",disabled:!e.clearable,onClick:t[0]||(t[0]=function(t){return e.$emit("clear")})},[Object(i["createVNode"])(a,{icon:e.faBan},null,8,["icon"])],8,mr),Object(i["createElementVNode"])("button",{class:"oscilloscope-title-bar__button",title:"Close",onClick:t[1]||(t[1]=function(t){return e.$emit("close")})},[Object(i["createVNode"])(a,{icon:e.faClose},null,8,["icon"])])])])}var br=Object(i["defineComponent"])({name:"OscilloscopeTitleBar",components:{Icon:oi},props:{clearable:{type:Boolean,default:!0}},setup:function(){return{faBan:Xo["b"],faClose:Xo["d"]}}});n("2fde");const vr=O()(br,[["render",hr]]);var gr=vr;function Or(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{ref:"viewer",class:"oscilloscope-viewer",style:Object(i["normalizeStyle"])({height:"".concat(e.height,"px")})},[Object(i["createElementVNode"])("div",{class:"oscilloscope-viewer__touch-resizer",onTouchstart:t[1]||(t[1]=function(){return e.onTouchStart&&e.onTouchStart.apply(e,arguments)}),onTouchmove:t[2]||(t[2]=function(){return e.onTouchMove&&e.onTouchMove.apply(e,arguments)}),onTouchcancel:t[3]||(t[3]=function(){return e.onMouseUp&&e.onMouseUp.apply(e,arguments)}),onTouchend:t[4]||(t[4]=function(){return e.onMouseUp&&e.onMouseUp.apply(e,arguments)})},[Object(i["createElementVNode"])("div",{class:"oscilloscope-viewer__mouse-resizer",onMousedown:t[0]||(t[0]=function(){return e.onMouseDown&&e.onMouseDown.apply(e,arguments)})},null,32)],32),Object(i["renderSlot"])(e.$slots,"default")],4)}var yr=Object(i["defineComponent"])({name:"OscilloscopeViewer",props:{collapseHeight:{type:Number,default:20},modelValue:{type:Number,required:!0}},setup:function(e,t){var n=t.emit,o=Object(i["ref"])(e.modelValue),r=Object(i["ref"])(),c=0,a=0,s=!1;function u(e){c=o.value,a=e.clientY,s=!0}function l(e){u(e.touches[0])}function d(t){var i;if(s&&r.value){var u=null===(i=r.value.parentElement)||void 0===i?void 0:i.getBoundingClientRect();o.value+=Math.min(a-t.clientY,(null===u||void 0===u?void 0:u.height)||1/0),a=t.clientY,o.value<=e.collapseHeight?n("collapse",c):n("update:modelValue",o.value)}}function p(e){d(e.touches[0])}function f(){s=!1}return Object(i["onMounted"])((function(){window.addEventListener("mousemove",d),window.addEventListener("mouseup",f)})),Object(i["onUnmounted"])((function(){window.removeEventListener("mousemove",d),window.removeEventListener("mouseup",f)})),{onMouseDown:u,onMouseUp:f,onTouchStart:l,onTouchMove:p,height:o,viewer:r}}});n("0867");const jr=O()(yr,[["render",Or]]);var xr=jr,Ir=Object(i["defineComponent"])({name:"Oscilloscope",components:{OscilloscopeTimeline:lr,OscilloscopeTitleBar:gr,OscilloscopeViewer:xr},props:{store:{type:Function,required:!0}},setup:function(e){var t=e.store(),n=Object(o["c"])(t),r=n.oscillogram,c=n.isDebugging,a=n.isOscilloscopeOpen,s=n.oscilloscopeHeight,u=Object(i["computed"])((function(){return Object.keys(r).length>0}));return{isDebugging:c,isOscilloscopeOpen:a,hasWaves:u,oscillogram:r,oscilloscopeHeight:s,clearOscilloscope:t.clearOscilloscope,closeOscilloscope:t.closeOscilloscope}}});const wr=O()(Ir,[["render",nr]]);var Cr=wr,kr={key:0},Sr={key:1},Br={key:2};function Er(e,t,n,o,r,c){var a=Object(i["resolveComponent"])("icon"),s=Object(i["resolveComponent"])("status-bar-button"),u=Object(i["resolveComponent"])("status-bar-zoom"),l=Object(i["resolveComponent"])("status-bar-viewer");return Object(i["openBlock"])(),Object(i["createBlock"])(l,null,{left:Object(i["withCtx"])((function(){return[e.isPrinting?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",kr,"Printing...")):e.isCreatingImage?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",Sr,"Rendering image...")):(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",Br,"Ready"))]})),right:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(s,{title:"Zoom out",disabled:e.store.zoomLevel<=.1,onClick:t[0]||(t[0]=function(t){return e.store.incrementZoom(-1)})},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(a,{icon:e.faMinus},null,8,["icon"])]})),_:1},8,["disabled"]),Object(i["createVNode"])(u,{type:"range",class:"status-bar__range",min:0,step:10,max:200,zoom:e.store.zoomLevel,onZoom:t[1]||(t[1]=function(t){return e.store.setZoom({zoom:t})})},null,8,["zoom"]),Object(i["createVNode"])(s,{title:"Zoom in",disabled:e.store.zoomLevel>=2,onClick:t[2]||(t[2]=function(t){return e.store.incrementZoom(1)})},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(a,{icon:e.faPlus},null,8,["icon"])]})),_:1},8,["disabled"]),Object(i["createVNode"])(s,{width:"3em",onClick:t[3]||(t[3]=function(t){return e.store.setZoom({zoom:1})})},{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.zoomPercent)+"% ",1)]})),_:1}),Object(i["createVNode"])(s,{title:"Toggle fullscreen",onClick:t[4]||(t[4]=function(t){return e.$emit("fullscreen")})},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(a,{icon:e.isFullscreen?e.faCompress:e.faExpand},null,8,["icon"])]})),_:1})]})),_:1})}var Pr=["disabled","title"];function Nr(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("button",{class:"status-bar-button",disabled:e.disabled,title:e.title,style:Object(i["normalizeStyle"])({width:e.width})},[Object(i["renderSlot"])(e.$slots,"default")],12,Pr)}var Dr=Object(i["defineComponent"])({name:"StatusBarButton",props:{disabled:{type:Boolean,default:!1},title:{type:String,default:""},width:{type:String,default:"2em"}}});n("600c");const _r=O()(Dr,[["render",Nr]]);var Mr=_r,zr={class:"status-bar-viewer"},Vr={class:"status-bar-viewer__left"},Tr={class:"status-bar-viewer__right"};function Fr(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",zr,[Object(i["createElementVNode"])("div",Vr,[Object(i["renderSlot"])(e.$slots,"left")]),Object(i["createElementVNode"])("div",Tr,[Object(i["renderSlot"])(e.$slots,"right")])])}var Rr=Object(i["defineComponent"])({name:"StatusBarViewer"});n("09ef");const Lr=O()(Rr,[["render",Fr]]);var Ar=Lr,Ur=["step","min","max","value"];function $r(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("input",{type:"range",class:"status-bar-zoom",step:e.step,min:e.min,max:e.max,value:e.value,onInput:t[0]||(t[0]=function(){return e.onInput&&e.onInput.apply(e,arguments)})},null,40,Ur)}var qr=Object(i["defineComponent"])({name:"StatusBarZoom",components:{Icon:oi},props:{zoom:{type:Number,required:!0},min:{type:Number,default:0},max:{type:Number,default:200},step:{type:Number,default:10}},setup:function(e,t){var n=t.emit,o=Object(i["computed"])((function(){return Math.round(100*e.zoom)}));function r(e){var t=e.target,o=parseFloat(t.value);n("zoom",o/100)}return{onInput:r,value:o}}});n("5af6");const Gr=O()(qr,[["render",$r]]);var Wr=Gr,Kr=Object(i["defineComponent"])({name:"StatusBar",components:{Icon:oi,StatusBarButton:Mr,StatusBarViewer:Ar,StatusBarZoom:Wr},props:{store:{type:Function,required:!0},isFullscreen:{type:Boolean,default:!1}},setup:function(e){var t=e.store(),n=Object(i["computed"])((function(){return t.isPrinting})),o=Object(i["computed"])((function(){return t.isCreatingImage})),r=Object(i["computed"])((function(){return Math.round(100*t.zoomLevel)}));return{store:t,isPrinting:n,isCreatingImage:o,zoomPercent:r,faMinus:Xo["i"],faPlus:Xo["j"],faExpand:Xo["f"],faCompress:Xo["e"]}}});const Zr=O()(Kr,[["render",Er]]);var Xr=Zr;function Yr(){var e,t=Ro(),n=null!==t.activeDocumentId,o=Object.keys(t.documents),i=null===(e=t.activeDocument)||void 0===e?void 0:e.store(),r=[{label:"&New Circuit",accelerator:"CommandOrControl+N",click:t.newDocument},{type:"separator"},{label:"&Open Circuit",accelerator:"CommandOrControl+O",click:t.selectDocument},{label:"Open &Integrated Circuit",accelerator:"CommandOrControl+Shift+O",click:t.selectDocument},{type:"separator"},{label:"Save",enabled:n,accelerator:"CommandOrControl+S",click:function(){return t.saveActiveDocument()}},{label:"Save As...",enabled:n,accelerator:"CommandOrControl+Shift+S",click:function(){return t.saveActiveDocument(!0)}},{label:"Save All",enabled:n,accelerator:"CommandOrControl+Shift+A",click:function(){return console.log("root store save all")}},{type:"separator"},{label:"Print",enabled:n,accelerator:"CommandOrControl+P",click:function(){return null===i||void 0===i?void 0:i.print()}},{type:"separator"},{label:"Export...",enabled:n,submenu:[{label:"Integrated Circuit",accelerator:"CommandOrControl+Shift+E",click:function(){return console.log("export IC")}},{label:"PNG Image",accelerator:"CommandOrControl+Shift+I",click:function(){return null===i||void 0===i?void 0:i.createImage()}}]},{type:"separator"},{label:"Preferences",submenu:[{label:"Global Preferences",accelerator:"CommandOrControl+,",click:function(){return console.log("global prefs")}},{label:"Document Preferences",accelerator:"CommandOrControl+Shift+,",click:function(){return console.log("doc prefs")}}]}];if(Object.keys(t.documents).length>1){for(var c=[{label:"Previous File",accelerator:"Ctrl+Shift+Tab",click:function(){return t.switchDocument(-1)}},{label:"Next File",accelerator:"Ctrl+Tab",click:function(){return t.switchDocument(1)}},{type:"separator"}],a=function(e){c.push({type:"checkbox",label:t.documents[o[e]].displayName,checked:t.activeDocumentId===o[e],click:function(){return t.activateDocument(o[e])}})},s=0;s<o.length;s++)a(s);r.push({type:"separator"}),r.push({label:"Switch to...",submenu:c})}return r.push({type:"separator"}),r.push({label:"Close Document",accelerator:"CmdOrCtrl+W",enabled:n,click:function(){return t.closeDocument(t.activeDocumentId)}}),r.push({type:"separator"}),r.push({label:"Exit",accelerator:"CmdOrCtrl+Q",click:function(){return window.close()}}),r}function Hr(e){for(var t=e(),n=[],o=!1,i=function(e){var i=25*e/100,r=t.zoomLevel===i;o=o||r,n.push({type:"checkbox",checked:r,label:"".concat(100*i,"%"),accelerator:1===i?"CommandOrControl+0":void 0,click:function(){return t.setZoom({zoom:i})}})},r=1;r<=8;r++)i(r);o||n.unshift({type:"checkbox",checked:!0,label:"Custom"});var c=[{label:"&Zoom In",accelerator:"CommandOrControl+=",enabled:t.zoomLevel<2,click:function(){return t.incrementZoom(1)}},{label:"&Zoom Out",accelerator:"CommandOrControl+-",enabled:t.zoomLevel>.1,click:function(){return t.incrementZoom(-1)}},{label:"&Zoom...",submenu:n},{type:"separator"},{label:"&Pan to Center",accelerator:"CommandOrControl+;",click:t.panToCenter},{type:"separator"}];return c.concat(Sn(e))}function Jr(){var e=Ro(),t=[{label:"File",submenu:Yr()}];return e.activeDocument&&(t.push({label:"Edit",submenu:kn(e.activeDocument.store)}),t.push({label:"View",submenu:Hr(e.activeDocument.store).concat([{type:"separator"},{type:"checkbox",click:e.toggleFullscreen,checked:e.isFullscreen,accelerator:"F11",label:"Fullscreen"}])})),t}var Qr={class:"main-view"},ec={class:"main-view__top"},tc={class:"main-view__middle"},nc={class:"main-view__bottom"};function oc(e,t,n,o,r,c){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",Qr,[Object(i["createElementVNode"])("div",ec,[Object(i["renderSlot"])(e.$slots,"top")]),Object(i["createElementVNode"])("div",tc,[Object(i["renderSlot"])(e.$slots,"middle")]),Object(i["createElementVNode"])("div",nc,[Object(i["renderSlot"])(e.$slots,"bottom")])])}var ic=Object(i["defineComponent"])({name:"OscilloscopeViewer"});n("5a18");const rc=O()(ic,[["render",oc]]);var cc=rc,ac=!1,sc=Object(i["defineComponent"])({name:"App",components:{Document:Uo,Toolbar:gi,TabItem:Zi,TabHost:er,Toolbox:$i,Oscilloscope:Cr,StatusBar:Xr,MainView:cc},setup:function(){var e=Ro(),t=Object(o["c"])(e),n=t.activeDocument,r=t.activeDocumentId,c=t.documents,a=t.hasOpenDocuments,u=t.isFullscreen,l=Object(i["ref"])(!1);function d(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),l.value=!0}function p(e){return f.apply(this,arguments)}function f(){return f=Object(s["a"])(regeneratorRuntime.mark((function t(n){var o,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n.stopPropagation(),n.preventDefault(),i=null===(o=n.dataTransfer)||void 0===o?void 0:o.files,!i){t.next=11;break}r=0;case 5:if(!(r<i.length)){t.next=11;break}return t.next=8,e.openDocumentFromPath(i[r].path);case 8:r++,t.next=5;break;case 11:l.value=!1;case 12:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}function m(){l.value=!1}function h(e){e.ctrlKey&&"R"===e.key.toUpperCase()&&window.location.reload()}return a.value||e.openTestDocuments(),Object(i["watchEffect"])((function(){return window.api.setApplicationMenu(Jr())})),Object(i["watchEffect"])((function(){document.title=e.activeDocument?"".concat(e.activeDocument.displayName," - Aristotle"):"Aristotle"})),window.api.onBeforeClose(e.closeAll),window.api.onOpenFile(e.openDocumentFromPath),Object(i["onMounted"])((function(){document.addEventListener("keydown",h),document.addEventListener("dragover",d),document.addEventListener("dragleave",m),document.addEventListener("drop",p)})),Object(i["onBeforeUnmount"])((function(){document.removeEventListener("keydown",h),document.removeEventListener("dragover",d),document.removeEventListener("dragleave",m),document.removeEventListener("drop",p)})),{activeDocument:n,activeDocumentId:r,documents:c,hasOpenDocuments:a,isDropping:l,isFullscreen:u,toggleFullscreen:e.toggleFullscreen,activateDocument:e.activateDocument,closeDocument:e.closeDocument,switchDocument:e.switchDocument,openIntegratedCircuit:e.openIntegratedCircuit}},data:function(){return{horizontal:!1,lastPosition:0,toolboxWidth:20,oscilloscopeHeight:80,isMobile:ac}}});n("a7a3");const uc=O()(sc,[["render",a]]);var lc=uc;n("fb98");window.api||(window.api={showContextMenu:function(){},setApplicationMenu:function(){},showOpenFileDialog:function(){return[]},showSaveFileDialog:function(){return""},showMessageBox:function(){return 0},beep:function(){},quit:function(){},copy:function(){},paste:function(){return""},onBeforeClose:function(){},onOpenFile:function(){},openFile:function(){return""},saveFile:function(){},setFullscreen:function(){}}),Object(i["createApp"])(lc).use(Object(o["a"])()).mount("#app")},ce00:function(e,t,n){"use strict";n("3744")},cfbe:function(e,t,n){"use strict";n("4598")},e58a:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var o=n("1da1"),i=n("d4ec"),r=n("bee2"),c=(n("e9c4"),n("96cf"),n("c4e3")),a=n.n(c),s=function(){function t(){Object(i["a"])(this,t)}return Object(r["a"])(t,null,[{key:"open",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,o,i,r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new a.a,o=window.api.openFile(t),e.next=4,n.loadAsync(o);case 4:return i=e.sent,r=i.files,e.next=8,r.content.async("text");case 8:return c=e.sent,e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"writeBlob",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n,o){var i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.arrayBuffer();case 2:i=t.sent,r=e.from(i),window.api.saveFile(n,r);case 5:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"save",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=new a.a,o.file("content",JSON.stringify(n)),e.next=4,o.generateAsync({type:"blob"});case 4:i=e.sent,this.writeBlob(t,i);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),t}()}).call(this,n("1c35").Buffer)},ed6a:function(e,t,n){"use strict";n("b4e7")},f6ee:function(e,t,n){},f7ab:function(e,t,n){},fa3a:function(e,t,n){"use strict";n("7684")},fb98:function(e,t,n){},fea7:function(e,t,n){}});
//# sourceMappingURL=index.9444ac5d.js.map